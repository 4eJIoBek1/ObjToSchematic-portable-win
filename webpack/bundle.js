/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={9282:(e,t,r)=>{"use strict";var n=r(4155),i=r(5108);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a,s,l=r(2136).codes,u=l.ERR_AMBIGUOUS_ARGUMENT,c=l.ERR_INVALID_ARG_TYPE,f=l.ERR_INVALID_ARG_VALUE,h=l.ERR_INVALID_RETURN_VALUE,d=l.ERR_MISSING_ARGS,p=r(5961),g=r(9539).inspect,m=r(9539).types,y=m.isPromise,_=m.isRegExp,b=Object.assign?Object.assign:r(8091).assign,v=Object.is?Object.is:r(609);function x(){var e=r(9158);a=e.isDeepEqual,s=e.isDeepStrictEqual}new Map;var w=!1,E=e.exports=M,A={};function T(e){if(e.message instanceof Error)throw e.message;throw new p(e)}function S(e,t,r,n){if(!r){var i=!1;if(0===t)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new p({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function M(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];S.apply(void 0,[M,t.length].concat(t))}E.fail=function e(t,r,o,a,s){var l,u=arguments.length;if(0===u?l="Failed":1===u?(o=t,t=void 0):(!1===w&&(w=!0,(n.emitWarning?n.emitWarning:i.warn.bind(i))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===u&&(a="!=")),o instanceof Error)throw o;var c={actual:t,expected:r,operator:void 0===a?"fail":a,stackStartFn:s||e};void 0!==o&&(c.message=o);var f=new p(c);throw l&&(f.message=l,f.generatedMessage=!0),f},E.AssertionError=p,E.ok=M,E.equal=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");t!=r&&T({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})},E.notEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");t==r&&T({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})},E.deepEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===a&&x(),a(t,r)||T({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})},E.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===a&&x(),a(t,r)&&T({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})},E.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===a&&x(),s(t,r)||T({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})},E.notDeepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");void 0===a&&x(),s(t,r)&&T({actual:t,expected:r,message:n,operator:"notDeepStrictEqual",stackStartFn:e})},E.strictEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");v(t,r)||T({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})},E.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new d("actual","expected");v(t,r)&&T({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var k=function e(t,r,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.forEach((function(e){e in t&&(void 0!==n&&"string"==typeof n[e]&&_(t[e])&&t[e].test(n[e])?i[e]=n[e]:i[e]=t[e])}))};function O(e,t,r,n){if("function"!=typeof t){if(_(t))return t.test(e);if(2===arguments.length)throw new c("expected",["Function","RegExp"],t);if("object"!==o(e)||null===e){var i=new p({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var l=Object.keys(t);if(t instanceof Error)l.push("name","message");else if(0===l.length)throw new f("error",t,"may not be an empty object");return void 0===a&&x(),l.forEach((function(i){"string"==typeof e[i]&&_(t[i])&&t[i].test(e[i])||function(e,t,r,n,i,o){if(!(r in e)||!s(e[r],t[r])){if(!n){var a=new k(e,i),l=new k(t,i,e),u=new p({actual:a,expected:l,operator:"deepStrictEqual",stackStartFn:o});throw u.actual=e,u.expected=t,u.operator=o.name,u}T({actual:e,expected:t,message:n,operator:o.name,stackStartFn:o})}}(e,t,i,r,l,n)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function I(e){if("function"!=typeof e)throw new c("fn","Function",e);try{e()}catch(e){return e}return A}function R(e){return y(e)||null!==e&&"object"===o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function C(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!R(t=e()))throw new h("instance of Promise","promiseFn",t)}else{if(!R(e))throw new c("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return A})).catch((function(e){return e}))}))}function L(e,t,r,n){if("string"==typeof r){if(4===arguments.length)throw new c("error",["Object","Error","Function","RegExp"],r);if("object"===o(t)&&null!==t){if(t.message===r)throw new u("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new u("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(null!=r&&"object"!==o(r)&&"function"!=typeof r)throw new c("error",["Object","Error","Function","RegExp"],r);if(t===A){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var a="rejects"===e.name?"rejection":"exception";T({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(a).concat(i),stackStartFn:e})}if(r&&!O(t,r,n,e))throw t}function B(e,t,r,n){if(t!==A){if("string"==typeof r&&(n=r,r=void 0),!r||O(t,r)){var i=n?": ".concat(n):".",o="doesNotReject"===e.name?"rejection":"exception";T({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(o).concat(i,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function V(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];S.apply(void 0,[V,t.length].concat(t))}E.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];L.apply(void 0,[e,I(t)].concat(n))},E.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return C(t).then((function(t){return L.apply(void 0,[e,t].concat(n))}))},E.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];B.apply(void 0,[e,I(t)].concat(n))},E.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return C(t).then((function(t){return B.apply(void 0,[e,t].concat(n))}))},E.ifError=function e(t){if(null!=t){var r="ifError got unwanted exception: ";"object"===o(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=g(t);var n=new p({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),i=t.stack;if("string"==typeof i){var a=i.split("\n");a.shift();for(var s=n.stack.split("\n"),l=0;l<a.length;l++){var u=s.indexOf(a[l]);if(-1!==u){s=s.slice(0,u);break}}n.stack="".concat(s.join("\n"),"\n").concat(a.join("\n"))}throw n}},E.strict=b(V,E,{equal:E.strictEqual,deepEqual:E.deepStrictEqual,notEqual:E.notStrictEqual,notDeepEqual:E.notDeepStrictEqual}),E.strict.strict=E.strict},5961:(e,t,r)=>{"use strict";var n=r(4155);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){var t="function"==typeof Map?new Map:void 0;return l=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,f(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},l(e)}function u(e,t,r){return u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&c(i,r.prototype),i},u.apply(null,arguments)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var d=r(9539).inspect,p=r(2136).codes.ERR_INVALID_ARG_TYPE;function g(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}var m="",y="",_="",b="",v={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},x=10;function w(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){r[t]=e[t]})),Object.defineProperty(r,"message",{value:e.message}),r}function E(e){return d(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var A=function(e){function t(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==h(e)||null===e)throw new p("options","Object",e);var i=e.message,o=e.operator,l=e.stackStartFn,u=e.actual,c=e.expected,d=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=i)r=a(this,f(t).call(this,String(i)));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(m="[34m",y="[32m",b="[39m",_="[31m"):(m="",y="",b="",_="")),"object"===h(u)&&null!==u&&"object"===h(c)&&null!==c&&"stack"in u&&u instanceof Error&&"stack"in c&&c instanceof Error&&(u=w(u),c=w(c)),"deepStrictEqual"===o||"strictEqual"===o)r=a(this,f(t).call(this,function(e,t,r){var i="",o="",a=0,s="",l=!1,u=E(e),c=u.split("\n"),f=E(t).split("\n"),d=0,p="";if("strictEqual"===r&&"object"===h(e)&&"object"===h(t)&&null!==e&&null!==t&&(r="strictEqualObject"),1===c.length&&1===f.length&&c[0]!==f[0]){var w=c[0].length+f[0].length;if(w<=x){if(!("object"===h(e)&&null!==e||"object"===h(t)&&null!==t||0===e&&0===t))return"".concat(v[r],"\n\n")+"".concat(c[0]," !== ").concat(f[0],"\n")}else if("strictEqualObject"!==r&&w<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;c[0][d]===f[0][d];)d++;d>2&&(p="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,r-e.length)}(" ",d),"^"),d=0)}}for(var A=c[c.length-1],T=f[f.length-1];A===T&&(d++<2?s="\n  ".concat(A).concat(s):i=A,c.pop(),f.pop(),0!==c.length&&0!==f.length);)A=c[c.length-1],T=f[f.length-1];var S=Math.max(c.length,f.length);if(0===S){var M=u.split("\n");if(M.length>30)for(M[26]="".concat(m,"...").concat(b);M.length>27;)M.pop();return"".concat(v.notIdentical,"\n\n").concat(M.join("\n"),"\n")}d>3&&(s="\n".concat(m,"...").concat(b).concat(s),l=!0),""!==i&&(s="\n  ".concat(i).concat(s),i="");var k=0,O=v[r]+"\n".concat(y,"+ actual").concat(b," ").concat(_,"- expected").concat(b),I=" ".concat(m,"...").concat(b," Lines skipped");for(d=0;d<S;d++){var R=d-a;if(c.length<d+1)R>1&&d>2&&(R>4?(o+="\n".concat(m,"...").concat(b),l=!0):R>3&&(o+="\n  ".concat(f[d-2]),k++),o+="\n  ".concat(f[d-1]),k++),a=d,i+="\n".concat(_,"-").concat(b," ").concat(f[d]),k++;else if(f.length<d+1)R>1&&d>2&&(R>4?(o+="\n".concat(m,"...").concat(b),l=!0):R>3&&(o+="\n  ".concat(c[d-2]),k++),o+="\n  ".concat(c[d-1]),k++),a=d,o+="\n".concat(y,"+").concat(b," ").concat(c[d]),k++;else{var C=f[d],L=c[d],B=L!==C&&(!g(L,",")||L.slice(0,-1)!==C);B&&g(C,",")&&C.slice(0,-1)===L&&(B=!1,L+=","),B?(R>1&&d>2&&(R>4?(o+="\n".concat(m,"...").concat(b),l=!0):R>3&&(o+="\n  ".concat(c[d-2]),k++),o+="\n  ".concat(c[d-1]),k++),a=d,o+="\n".concat(y,"+").concat(b," ").concat(L),i+="\n".concat(_,"-").concat(b," ").concat(C),k+=2):(o+=i,i="",1!==R&&0!==d||(o+="\n  ".concat(L),k++))}if(k>20&&d<S-2)return"".concat(O).concat(I,"\n").concat(o,"\n").concat(m,"...").concat(b).concat(i,"\n")+"".concat(m,"...").concat(b)}return"".concat(O).concat(l?I:"","\n").concat(o).concat(i).concat(s).concat(p)}(u,c,o)));else if("notDeepStrictEqual"===o||"notStrictEqual"===o){var A=v[o],T=E(u).split("\n");if("notStrictEqual"===o&&"object"===h(u)&&null!==u&&(A=v.notStrictEqualObject),T.length>30)for(T[26]="".concat(m,"...").concat(b);T.length>27;)T.pop();r=1===T.length?a(this,f(t).call(this,"".concat(A," ").concat(T[0]))):a(this,f(t).call(this,"".concat(A,"\n\n").concat(T.join("\n"),"\n")))}else{var S=E(u),M="",k=v[o];"notDeepEqual"===o||"notEqual"===o?(S="".concat(v[o],"\n\n").concat(S)).length>1024&&(S="".concat(S.slice(0,1021),"...")):(M="".concat(E(c)),S.length>512&&(S="".concat(S.slice(0,509),"...")),M.length>512&&(M="".concat(M.slice(0,509),"...")),"deepEqual"===o||"equal"===o?S="".concat(k,"\n\n").concat(S,"\n\nshould equal\n\n"):M=" ".concat(o," ").concat(M)),r=a(this,f(t).call(this,"".concat(S).concat(M)))}return Error.stackTraceLimit=d,r.generatedMessage=!i,Object.defineProperty(s(r),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),r.code="ERR_ASSERTION",r.actual=u,r.expected=c,r.operator=o,Error.captureStackTrace&&Error.captureStackTrace(s(r),l),r.stack,r.name="AssertionError",a(r)}var r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,l=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:d.custom,value:function(e,t){return d(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},t,{customInspect:!1,depth:0}))}}],l&&o(r.prototype,l),t}(l(Error));e.exports=A},2136:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}var a,s,l={};function u(e,t,r){r||(r=Error);var a=function(r){function a(r,o,s){var l,u,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u=this,c=i(a).call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,o,s)),l=!c||"object"!==n(c)&&"function"!=typeof c?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(u):c,l.code=e,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(a,r),a}(r);l[e]=a}function c(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}u("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),u("ERR_INVALID_ARG_TYPE",(function(e,t,i){var o,s,l,u,f;if(void 0===a&&(a=r(9282)),a("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(s="not ",t.substr(0,s.length)===s)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))l="The ".concat(e," ").concat(o," ").concat(c(t,"type"));else{var h=("number"!=typeof f&&(f=0),f+".".length>(u=e).length||-1===u.indexOf(".",f)?"argument":"property");l='The "'.concat(e,'" ').concat(h," ").concat(o," ").concat(c(t,"type"))}return l+". Received type ".concat(n(i))}),TypeError),u("ERR_INVALID_ARG_VALUE",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===s&&(s=r(9539));var i=s.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(n,". Received ").concat(i)}),TypeError,RangeError),u("ERR_INVALID_RETURN_VALUE",(function(e,t,r){var i;return i=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(n(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),u("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];void 0===a&&(a=r(9282)),a(t.length>0,"At least one arg needs to be specified");var i="The ",o=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),o){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,o-1).join(", "),i+=", and ".concat(t[o-1]," arguments")}return"".concat(i," must be specified")}),TypeError),e.exports.codes=l},9158:(e,t,r)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=void 0!==/a/g.flags,a=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},s=function(e){var t=[];return e.forEach((function(e,r){return t.push([r,e])})),t},l=Object.is?Object.is:r(609),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},c=Number.isNaN?Number.isNaN:r(360);function f(e){return e.call.bind(e)}var h=f(Object.prototype.hasOwnProperty),d=f(Object.prototype.propertyIsEnumerable),p=f(Object.prototype.toString),g=r(9539).types,m=g.isAnyArrayBuffer,y=g.isArrayBufferView,_=g.isDate,b=g.isMap,v=g.isRegExp,x=g.isSet,w=g.isNativeError,E=g.isBoxedPrimitive,A=g.isNumberObject,T=g.isStringObject,S=g.isBooleanObject,M=g.isBigIntObject,k=g.isSymbolObject,O=g.isFloat32Array,I=g.isFloat64Array;function R(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function C(e){return Object.keys(e).filter(R).concat(u(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function L(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}var B=0,V=1,P=2,U=3;function N(e,t,r,n){if(e===t)return 0!==e||!r||l(e,t);if(r){if("object"!==i(e))return"number"==typeof e&&c(e)&&c(t);if("object"!==i(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==i(e))return(null===t||"object"!==i(t))&&e==t;if(null===t||"object"!==i(t))return!1}var a,s,u,f,h=p(e);if(h!==p(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var d=C(e),g=C(t);return d.length===g.length&&j(e,t,r,n,V,d)}if("[object Object]"===h&&(!b(e)&&b(t)||!x(e)&&x(t)))return!1;if(_(e)){if(!_(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(v(e)){if(!v(t)||(u=e,f=t,!(o?u.source===f.source&&u.flags===f.flags:RegExp.prototype.toString.call(u)===RegExp.prototype.toString.call(f))))return!1}else if(w(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(y(e)){if(r||!O(e)&&!I(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===L(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e,t))return!1;var R=C(e),N=C(t);return R.length===N.length&&j(e,t,r,n,B,R)}if(x(e))return!(!x(t)||e.size!==t.size)&&j(e,t,r,n,P);if(b(e))return!(!b(t)||e.size!==t.size)&&j(e,t,r,n,U);if(m(e)){if(s=t,(a=e).byteLength!==s.byteLength||0!==L(new Uint8Array(a),new Uint8Array(s)))return!1}else if(E(e)&&!function(e,t){return A(e)?A(t)&&l(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):T(e)?T(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):S(e)?S(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):M(e)?M(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):k(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return j(e,t,r,n,B)}function F(e,t){return t.filter((function(t){return d(e,t)}))}function j(e,t,r,o,l,c){if(5===arguments.length){c=Object.keys(e);var f=Object.keys(t);if(c.length!==f.length)return!1}for(var p=0;p<c.length;p++)if(!h(t,c[p]))return!1;if(r&&5===arguments.length){var g=u(e);if(0!==g.length){var m=0;for(p=0;p<g.length;p++){var y=g[p];if(d(e,y)){if(!d(t,y))return!1;c.push(y),m++}else if(d(t,y))return!1}var _=u(t);if(g.length!==_.length&&F(t,_).length!==m)return!1}else{var b=u(t);if(0!==b.length&&0!==F(t,b).length)return!1}}if(0===c.length&&(l===B||l===V&&0===e.length||0===e.size))return!0;if(void 0===o)o={val1:new Map,val2:new Map,position:0};else{var v=o.val1.get(e);if(void 0!==v){var x=o.val2.get(t);if(void 0!==x)return v===x}o.position++}o.val1.set(e,o.position),o.val2.set(t,o.position);var w=function(e,t,r,o,l,u){var c=0;if(u===P){if(!function(e,t,r,n){for(var o=null,s=a(e),l=0;l<s.length;l++){var u=s[l];if("object"===i(u)&&null!==u)null===o&&(o=new Set),o.add(u);else if(!t.has(u)){if(r)return!1;if(!G(e,t,u))return!1;null===o&&(o=new Set),o.add(u)}}if(null!==o){for(var c=a(t),f=0;f<c.length;f++){var h=c[f];if("object"===i(h)&&null!==h){if(!z(o,h,r,n))return!1}else if(!r&&!e.has(h)&&!z(o,h,r,n))return!1}return 0===o.size}return!0}(e,t,r,l))return!1}else if(u===U){if(!function(e,t,r,o){for(var a=null,l=s(e),u=0;u<l.length;u++){var c=n(l[u],2),f=c[0],h=c[1];if("object"===i(f)&&null!==f)null===a&&(a=new Set),a.add(f);else{var d=t.get(f);if(void 0===d&&!t.has(f)||!N(h,d,r,o)){if(r)return!1;if(!H(e,t,f,h,o))return!1;null===a&&(a=new Set),a.add(f)}}}if(null!==a){for(var p=s(t),g=0;g<p.length;g++){var m=n(p[g],2),y=(f=m[0],m[1]);if("object"===i(f)&&null!==f){if(!W(a,e,f,y,r,o))return!1}else if(!(r||e.has(f)&&N(e.get(f),y,!1,o)||W(a,e,f,y,!1,o)))return!1}return 0===a.size}return!0}(e,t,r,l))return!1}else if(u===V)for(;c<e.length;c++){if(!h(e,c)){if(h(t,c))return!1;for(var f=Object.keys(e);c<f.length;c++){var d=f[c];if(!h(t,d)||!N(e[d],t[d],r,l))return!1}return f.length===Object.keys(t).length}if(!h(t,c)||!N(e[c],t[c],r,l))return!1}for(c=0;c<o.length;c++){var p=o[c];if(!N(e[p],t[p],r,l))return!1}return!0}(e,t,r,c,o,l);return o.val1.delete(e),o.val2.delete(t),w}function z(e,t,r,n){for(var i=a(e),o=0;o<i.length;o++){var s=i[o];if(N(t,s,r,n))return e.delete(s),!0}return!1}function D(e){switch(i(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(c(e))return!1}return!0}function G(e,t,r){var n=D(r);return null!=n?n:t.has(n)&&!e.has(n)}function H(e,t,r,n,i){var o=D(r);if(null!=o)return o;var a=t.get(o);return!(void 0===a&&!t.has(o)||!N(n,a,!1,i))&&!e.has(o)&&N(n,a,!1,i)}function W(e,t,r,n,i,o){for(var s=a(e),l=0;l<s.length;l++){var u=s[l];if(N(r,u,i,o)&&N(n,t.get(u),i,o))return e.delete(u),!0}return!1}e.exports={isDeepEqual:function(e,t){return N(e,t,false)},isDeepStrictEqual:function(e,t){return N(e,t,true)}}},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=l(e),a=o[0],s=o[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),c=0,f=s>0?a-4:a;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,l=n-i;s<l;s+=a)o.push(u(e,s,s+a>l?l:s+a));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},4505:(e,t,r)=>{"use strict";var n=r(3085).lW,i=r(4155),o=r(9282),a=r(2292),s=r(405),l=r(7948),u=r(1619);for(var c in u)t[c]=u[c];function f(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,f.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,o(this.init_done,"close before init"),o(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||l.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},f.prototype.write=function(e,t,r,n,i,o,a){return this._write(!0,e,t,r,n,i,o,a)},f.prototype.writeSync=function(e,t,r,n,i,o,a){return this._write(!1,e,t,r,n,i,o,a)},f.prototype._write=function(e,r,a,s,l,u,c,f){if(o.equal(arguments.length,8),o(this.init_done,"write before init"),o(this.mode!==t.NONE,"already finalized"),o.equal(!1,this.write_in_progress,"write already in progress"),o.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,o.equal(!1,void 0===r,"must provide flush value"),this.write_in_progress=!0,r!==t.Z_NO_FLUSH&&r!==t.Z_PARTIAL_FLUSH&&r!==t.Z_SYNC_FLUSH&&r!==t.Z_FULL_FLUSH&&r!==t.Z_FINISH&&r!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==a&&(a=n.alloc(0),l=0,s=0),this.strm.avail_in=l,this.strm.input=a,this.strm.next_in=s,this.strm.avail_out=f,this.strm.output=u,this.strm.next_out=c,this.flush=r,!e)return this._process(),this._checkError()?this._afterSync():void 0;var h=this;return i.nextTick((function(){h._process(),h._after()})),this},f.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},f.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=l.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=l.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=l.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=l.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},f.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},f.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},f.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},f.prototype.init=function(e,r,n,i,a){o(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),o(e>=8&&e<=15,"invalid windowBits"),o(r>=-1&&r<=9,"invalid compression level"),o(n>=1&&n<=9,"invalid memlevel"),o(i===t.Z_FILTERED||i===t.Z_HUFFMAN_ONLY||i===t.Z_RLE||i===t.Z_FIXED||i===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(r,e,n,i,a),this._setDictionary()},f.prototype.params=function(){throw new Error("deflateParams Not supported")},f.prototype.reset=function(){this._reset(),this._setDictionary()},f.prototype._init=function(e,r,n,i,o){switch(this.level=e,this.windowBits=r,this.memLevel=n,this.strategy=i,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=l.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=o,this.write_in_progress=!1,this.init_done=!0},f.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},f.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=l.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=f},2635:(e,t,r)=>{"use strict";var n=r(4155),i=r(8764).Buffer,o=r(8338).Transform,a=r(4505),s=r(9539),l=r(9282).ok,u=r(8764).kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+u.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var f=Object.keys(a),h=0;h<f.length;h++){var d=f[h];d.match(/^Z/)&&Object.defineProperty(t,d,{enumerable:!0,value:a[d],writable:!1})}for(var p={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},g=Object.keys(p),m=0;m<g.length;m++){var y=g[m];p[p[y]]=y}function _(e,t,r){var n=[],o=0;function a(){for(var t;null!==(t=e.read());)n.push(t),o+=t.length;e.once("readable",a)}function s(){var t,a=null;o>=u?a=new RangeError(c):t=i.concat(n,o),n=[],e.close(),r(a,t)}e.on("error",(function(t){e.removeListener("end",s),e.removeListener("readable",a),r(t)})),e.on("end",s),e.end(t),a()}function b(e,t){if("string"==typeof t&&(t=i.from(t)),!i.isBuffer(t))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return e._processChunk(t,r)}function v(e){if(!(this instanceof v))return new v(e);k.call(this,e,a.DEFLATE)}function x(e){if(!(this instanceof x))return new x(e);k.call(this,e,a.INFLATE)}function w(e){if(!(this instanceof w))return new w(e);k.call(this,e,a.GZIP)}function E(e){if(!(this instanceof E))return new E(e);k.call(this,e,a.GUNZIP)}function A(e){if(!(this instanceof A))return new A(e);k.call(this,e,a.DEFLATERAW)}function T(e){if(!(this instanceof T))return new T(e);k.call(this,e,a.INFLATERAW)}function S(e){if(!(this instanceof S))return new S(e);k.call(this,e,a.UNZIP)}function M(e){return e===a.Z_NO_FLUSH||e===a.Z_PARTIAL_FLUSH||e===a.Z_SYNC_FLUSH||e===a.Z_FULL_FLUSH||e===a.Z_FINISH||e===a.Z_BLOCK}function k(e,r){var n=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,o.call(this,e),e.flush&&!M(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!M(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||a.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:a.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!i.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(r);var s=this;this._hadError=!1,this._handle.onerror=function(e,r){O(s),s._hadError=!0;var n=new Error(e);n.errno=r,n.code=t.codes[r],s.emit("error",n)};var l=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(l=e.level);var u=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(u=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,l,e.memLevel||t.Z_DEFAULT_MEMLEVEL,u,e.dictionary),this._buffer=i.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=u,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!n._handle},configurable:!0,enumerable:!0})}function O(e,t){t&&n.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function I(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(p),writable:!1}),t.Deflate=v,t.Inflate=x,t.Gzip=w,t.Gunzip=E,t.DeflateRaw=A,t.InflateRaw=T,t.Unzip=S,t.createDeflate=function(e){return new v(e)},t.createInflate=function(e){return new x(e)},t.createDeflateRaw=function(e){return new A(e)},t.createInflateRaw=function(e){return new T(e)},t.createGzip=function(e){return new w(e)},t.createGunzip=function(e){return new E(e)},t.createUnzip=function(e){return new S(e)},t.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),_(new v(t),e,r)},t.deflateSync=function(e,t){return b(new v(t),e)},t.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),_(new w(t),e,r)},t.gzipSync=function(e,t){return b(new w(t),e)},t.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),_(new A(t),e,r)},t.deflateRawSync=function(e,t){return b(new A(t),e)},t.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),_(new S(t),e,r)},t.unzipSync=function(e,t){return b(new S(t),e)},t.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),_(new x(t),e,r)},t.inflateSync=function(e,t){return b(new x(t),e)},t.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),_(new E(t),e,r)},t.gunzipSync=function(e,t){return b(new E(t),e)},t.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),_(new T(t),e,r)},t.inflateRawSync=function(e,t){return b(new T(t),e)},s.inherits(k,o),k.prototype.params=function(e,r,i){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==e||this._strategy!==r){var o=this;this.flush(a.Z_SYNC_FLUSH,(function(){l(o._handle,"zlib binding closed"),o._handle.params(e,r),o._hadError||(o._level=e,o._strategy=r,i&&i())}))}else n.nextTick(i)},k.prototype.reset=function(){return l(this._handle,"zlib binding closed"),this._handle.reset()},k.prototype._flush=function(e){this._transform(i.alloc(0),"",e)},k.prototype.flush=function(e,t){var r=this,o=this._writableState;("function"==typeof e||void 0===e&&!t)&&(t=e,e=a.Z_FULL_FLUSH),o.ended?t&&n.nextTick(t):o.ending?t&&this.once("end",t):o.needDrain?t&&this.once("drain",(function(){return r.flush(e,t)})):(this._flushFlag=e,this.write(i.alloc(0),"",t))},k.prototype.close=function(e){O(this,e),n.nextTick(I,this)},k.prototype._transform=function(e,t,r){var n,o=this._writableState,s=(o.ending||o.ended)&&(!e||o.length===e.length);return null===e||i.isBuffer(e)?this._handle?(s?n=this._finishFlushFlag:(n=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(e,n,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},k.prototype._processChunk=function(e,t,r){var n=e&&e.length,o=this._chunkSize-this._offset,a=0,s=this,f="function"==typeof r;if(!f){var h,d=[],p=0;this.on("error",(function(e){h=e})),l(this._handle,"zlib binding closed");do{var g=this._handle.writeSync(t,e,a,n,this._buffer,this._offset,o)}while(!this._hadError&&_(g[0],g[1]));if(this._hadError)throw h;if(p>=u)throw O(this),new RangeError(c);var m=i.concat(d,p);return O(this),m}l(this._handle,"zlib binding closed");var y=this._handle.write(t,e,a,n,this._buffer,this._offset,o);function _(u,c){if(this&&(this.buffer=null,this.callback=null),!s._hadError){var h=o-c;if(l(h>=0,"have should not go down"),h>0){var g=s._buffer.slice(s._offset,s._offset+h);s._offset+=h,f?s.push(g):(d.push(g),p+=g.length)}if((0===c||s._offset>=s._chunkSize)&&(o=s._chunkSize,s._offset=0,s._buffer=i.allocUnsafe(s._chunkSize)),0===c){if(a+=n-u,n=u,!f)return!0;var m=s._handle.write(t,e,a,n,s._buffer,s._offset,s._chunkSize);return m.callback=_,void(m.buffer=e)}if(!f)return!1;r()}}y.buffer=e,y.callback=_},s.inherits(v,k),s.inherits(x,k),s.inherits(w,k),s.inherits(E,k),s.inherits(A,k),s.inherits(T,k),s.inherits(S,k)},8764:(e,t,r)=>{"use strict";var n=r(5108),i=r(9742),o=r(645),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50;var s=2147483647;function l(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|m(e,t),n=l(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(D(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(D(e,ArrayBuffer)||e&&D(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(D(e,SharedArrayBuffer)||e&&D(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);var i=function(e){if(u.isBuffer(e)){var t=0|g(e.length),r=l(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||G(e.length)?l(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return f(e),l(e<0?0:0|g(e))}function d(e){for(var t=e.length<0?0:0|g(e.length),r=l(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function g(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||D(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(i)return n?-1:F(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return M(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function _(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),G(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var f=!0,h=0;h<l;h++)if(u(e,o+h)!==u(t,h)){f=!1;break}if(f)return o}return-1}function x(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(G(s))return a;e[r+a]=s}return a}function w(e,t,r,n){return z(F(t,e.length-r),e,r,n)}function E(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function A(e,t,r,n){return z(j(t),e,r,n)}function T(e,t,r,n){return z(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function M(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,l,u=e[i],c=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=r)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}(n)}t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||void 0===n||"function"!=typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return f(e),e<=0?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)}(e,t,r)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(D(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),D(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(D(o,Uint8Array))i+o.length>n.length?u.from(o).copy(n,i):Uint8Array.prototype.set.call(n,o,i);else{if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i)}i+=o.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?M(this,0,e):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(D(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(n,i),c=e.slice(t,r),f=0;f<s;++f)if(l[f]!==c[f]){o=l[f],a=c[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function R(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=H[e[o]];return i}function C(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function V(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(e,t,r,n,i){return t=+t,r>>>=0,i||V(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,i){return t=+t,r>>>=0,i||V(e,0,r,8),o.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||B(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||B(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);B(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);B(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=u.isBuffer(e)?e:u.from(e,n),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var N=/[^+/0-9A-Za-z-_]/g;function F(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function j(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function D(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!=e}var H=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},157:e=>{var t,r,n,i,o=o||{};o.EPSILON=1e-6,o.BVHVector3=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0},o.BVHVector3.prototype={constructor:o.BVHVector3,copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setFromArray:function(e,t){this.x=e[t],this.y=e[t+1],this.z=e[t+2]},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function(e){var t=this.x,r=this.y,n=this.z;return this.x=r*e.z-n*e.y,this.y=n*e.x-t*e.z,this.z=t*e.y-r*e.x,this},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this},clone:function(){return new o.BVHVector3(this.x,this.y,this.z)}},o.BVH=function(e,t){var r=[];r.length=9*e.length;for(var n=0;n<e.length;n++){var i=e[n][0],a=e[n][1],s=e[n][2];r[9*n]=i.x,r[9*n+1]=i.y,r[9*n+2]=i.z,r[9*n+3]=a.x,r[9*n+4]=a.y,r[9*n+5]=a.z,r[9*n+6]=s.x,r[9*n+7]=s.y,r[9*n+8]=s.z}this._trianglesArray=r,this._maxTrianglesPerNode=t||10,this._bboxArray=this.calcBoundingBoxes(r),this._bboxHelper=new Float32Array(this._bboxArray.length),this._bboxHelper.set(this._bboxArray);var l=r.length/9,u=this.calcExtents(0,l,o.EPSILON);for(this._rootNode=new o.BVHNode(u[0],u[1],0,l,0),this._nodesToSplit=[this._rootNode];this._nodesToSplit.length>0;){var c=this._nodesToSplit.pop();this.splitNode(c)}},o.BVH.prototype.intersectRay=function(e,t,r){for(var n,i=[this._rootNode],a=[],s=[],l=new o.BVHVector3(1/t.x,1/t.y,1/t.z);i.length>0;){var u=i.pop();if(o.BVH.intersectNodeBox(e,l,u))for(u._node0&&i.push(u._node0),u._node1&&i.push(u._node1),n=u._startIndex;n<u._endIndex;n++)a.push(this._bboxArray[7*n])}var c=new o.BVHVector3,f=new o.BVHVector3,h=new o.BVHVector3,d=new o.BVHVector3(e.x,e.y,e.z),p=new o.BVHVector3(t.x,t.y,t.z);for(n=0;n<a.length;n++){var g=a[n];c.setFromArray(this._trianglesArray,9*g),f.setFromArray(this._trianglesArray,9*g+3),h.setFromArray(this._trianglesArray,9*g+6);var m=o.BVH.intersectRayTriangle(c,f,h,d,p,r);m&&s.push({triangle:[c.clone(),f.clone(),h.clone()],triangleIndex:g,intersectionPoint:m})}return s},o.BVH.prototype.calcBoundingBoxes=function(e){for(var t,r,n,i,a,s,l,u,c,f,h,d,p,g,m,y=e.length/9,_=new Float32Array(7*y),b=0;b<y;b++)t=e[9*b],r=e[9*b+1],n=e[9*b+2],i=e[9*b+3],a=e[9*b+4],s=e[9*b+5],l=e[9*b+6],u=e[9*b+7],c=e[9*b+8],f=Math.min(Math.min(t,i),l),h=Math.min(Math.min(r,a),u),d=Math.min(Math.min(n,s),c),p=Math.max(Math.max(t,i),l),g=Math.max(Math.max(r,a),u),m=Math.max(Math.max(n,s),c),o.BVH.setBox(_,b,b,f,h,d,p,g,m);return _},o.BVH.prototype.calcExtents=function(e,t,r){if(r=r||0,e>=t)return[{x:0,y:0,z:0},{x:0,y:0,z:0}];for(var n=Number.MAX_VALUE,i=Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=-Number.MAX_VALUE,l=-Number.MAX_VALUE,u=e;u<t;u++)n=Math.min(this._bboxArray[7*u+1],n),i=Math.min(this._bboxArray[7*u+2],i),o=Math.min(this._bboxArray[7*u+3],o),a=Math.max(this._bboxArray[7*u+4],a),s=Math.max(this._bboxArray[7*u+5],s),l=Math.max(this._bboxArray[7*u+6],l);return[{x:n-r,y:i-r,z:o-r},{x:a+r,y:s+r,z:l+r}]},o.BVH.prototype.splitNode=function(e){if(!(e.elementCount()<=this._maxTrianglesPerNode||0===e.elementCount())){var t=e._startIndex,r=e._endIndex,n=[[],[],[]],i=[[],[],[]],a=[e.centerX(),e.centerY(),e.centerZ()],s=[e._extentsMax.x-e._extentsMin.x,e._extentsMax.y-e._extentsMin.y,e._extentsMax.z-e._extentsMin.z],l=[];l.length=3;for(var u=t;u<r;u++){l[0]=.5*(this._bboxArray[7*u+1]+this._bboxArray[7*u+4]),l[1]=.5*(this._bboxArray[7*u+2]+this._bboxArray[7*u+5]),l[2]=.5*(this._bboxArray[7*u+3]+this._bboxArray[7*u+6]);for(var c=0;c<3;c++)l[c]<a[c]?n[c].push(u):i[c].push(u)}var f=[];if(f.length=3,f[0]=0===n[0].length||0===i[0].length,f[1]=0===n[1].length||0===i[1].length,f[2]=0===n[2].length||0===i[2].length,!(f[0]&&f[1]&&f[2])){var h,d,p=[0,1,2];for(p.sort((function(e,t){return s[t]-s[e]})),c=0;c<3;c++){var g=p[c];if(!f[g]){h=n[g],d=i[g];break}}var m,y=t,_=y+h.length,b=_,v=r,x=e._startIndex,w=h.concat(d);for(u=0;u<w.length;u++)m=w[u],o.BVH.copyBox(this._bboxArray,m,this._bboxHelper,x),x++;var E=this._bboxHelper.subarray(7*e._startIndex,7*e._endIndex);this._bboxArray.set(E,7*e._startIndex);var A=this.calcExtents(y,_,o.EPSILON),T=this.calcExtents(b,v,o.EPSILON),S=new o.BVHNode(A[0],A[1],y,_,e._level+1),M=new o.BVHNode(T[0],T[1],b,v,e._level+1);e._node0=S,e._node1=M,e.clearShapes(),this._nodesToSplit.push(S),this._nodesToSplit.push(M)}}},o.BVH._calcTValues=function(e,t,r,n){var i={min:0,max:0};return n>=0?(i.min=(e-r)*n,i.max=(t-r)*n):(i.min=(t-r)*n,i.max=(e-r)*n),i},o.BVH.intersectNodeBox=function(e,t,r){var n=o.BVH._calcTValues(r._extentsMin.x,r._extentsMax.x,e.x,t.x),i=o.BVH._calcTValues(r._extentsMin.y,r._extentsMax.y,e.y,t.y);if(n.min>i.max||i.min>n.max)return!1;(i.min>n.min||n.min!=n.min)&&(n.min=i.min),(i.max<n.max||n.max!=n.max)&&(n.max=i.max);var a=o.BVH._calcTValues(r._extentsMin.z,r._extentsMax.z,e.z,t.z);return!(n.min>a.max||a.min>n.max||((a.min>n.min||n.min!=n.min)&&(n.min=a.min),(a.max<n.max||n.max!=n.max)&&(n.max=a.max),n.max<0))},o.BVH.intersectRayTriangle=(t=new o.BVHVector3,r=new o.BVHVector3,n=new o.BVHVector3,i=new o.BVHVector3,function(e,a,s,l,u,c){r.subVectors(a,e),n.subVectors(s,e),i.crossVectors(r,n);var f,h=u.dot(i);if(h>0){if(c)return null;f=1}else{if(!(h<0))return null;f=-1,h=-h}t.subVectors(l,e);var d=f*u.dot(n.crossVectors(t,n));if(d<0)return null;var p=f*u.dot(r.cross(t));if(p<0)return null;if(d+p>h)return null;var g=-f*t.dot(i);if(g<0)return null;var m=g/h;return(new o.BVHVector3).copy(u).multiplyScalar(m).add(l)}),o.BVH.setBox=function(e,t,r,n,i,o,a,s,l){e[7*t]=r,e[7*t+1]=n,e[7*t+2]=i,e[7*t+3]=o,e[7*t+4]=a,e[7*t+5]=s,e[7*t+6]=l},o.BVH.copyBox=function(e,t,r,n){r[7*n]=e[7*t],r[7*n+1]=e[7*t+1],r[7*n+2]=e[7*t+2],r[7*n+3]=e[7*t+3],r[7*n+4]=e[7*t+4],r[7*n+5]=e[7*t+5],r[7*n+6]=e[7*t+6]},o.BVH.getBox=function(e,t,r){r.triangleId=e[7*t],r.minX=e[7*t+1],r.minY=e[7*t+2],r.minZ=e[7*t+3],r.maxX=e[7*t+4],r.maxY=e[7*t+5],r.maxZ=e[7*t+6]},o.BVHNode=function(e,t,r,n,i){this._extentsMin=e,this._extentsMax=t,this._startIndex=r,this._endIndex=n,this._level=i,this._node0=null,this._node1=null},o.BVHNode.prototype.elementCount=function(){return this._endIndex-this._startIndex},o.BVHNode.prototype.centerX=function(){return.5*(this._extentsMin.x+this._extentsMax.x)},o.BVHNode.prototype.centerY=function(){return.5*(this._extentsMin.y+this._extentsMax.y)},o.BVHNode.prototype.centerZ=function(){return.5*(this._extentsMin.z+this._extentsMax.z)},o.BVHNode.prototype.clearShapes=function(){this._startIndex=-1,this._endIndex=-1},o.BVHNode.calcBoundingSphereRadius=function(e,t){var r=.5*(e.x+t.x),n=.5*(e.y+t.y),i=.5*(e.z+t.z),o=(r-e.x)*(r-e.x)+(n-e.y)*(n-e.y)+(i-e.z)*(i-e.z),a=(r-t.x)*(r-t.x)+(n-t.y)*(n-t.y)+(i-t.z)*(i-t.z);return Math.sqrt(Math.max(o,a))},e.exports&&(e.exports.BVH=o.BVH,e.exports.intersectRay=o.intersectRay)},1924:(e,t,r)=>{"use strict";var n=r(210),i=r(5559),o=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?i(r):r}},5559:(e,t,r)=>{"use strict";var n=r(8612),i=r(210),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||n.call(a,o),l=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(n,a,arguments);return l&&u&&l(t,"length").configurable&&u(t,"length",{value:1+c(0,e.length-(arguments.length-1))}),t};var f=function(){return s(n,o,arguments)};u?u(e.exports,"apply",{value:f}):e.exports.apply=f},5108:(e,t,r)=>{var n=r(9539),i=r(9282);function o(){return(new Date).getTime()}var a,s=Array.prototype.slice,l={};a=void 0!==r.g&&r.g.console?r.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var u=[[function(){},"log"],[function(){a.log.apply(a,arguments)},"info"],[function(){a.log.apply(a,arguments)},"warn"],[function(){a.warn.apply(a,arguments)},"error"],[function(e){l[e]=o()},"time"],[function(e){var t=l[e];if(!t)throw new Error("No such label: "+e);delete l[e];var r=o()-t;a.log(e+": "+r+"ms")},"timeEnd"],[function(){var e=new Error;e.name="Trace",e.message=n.format.apply(null,arguments),a.error(e.stack)},"trace"],[function(e){a.log(n.inspect(e)+"\n")},"dir"],[function(e){if(!e){var t=s.call(arguments,1);i.ok(!1,n.format.apply(null,t))}},"assert"]],c=0;c<u.length;c++){var f=u[c],h=f[0],d=f[1];a[d]||(a[d]=h)}e.exports=a},2918:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(8081),i=r.n(n),o=r(3645),a=r.n(o)()(i());a.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Lexend:wght@300;400&display=swap);"]),a.push([e.id,":root {\r\n  --properties-width: max(400px, 20%);\r\n  --pill-radius: 5px;\r\n  --prop-bg: hsl(0, 0%, 10%);\r\n  --prop-alt: hsl(0, 0%, 15%);\r\n\r\n  --prop-accent-border-hovered: #33AAC2;\r\n  --prop-accent-hovered: #0095b3;\r\n  --prop-accent-standard: #00738a;\r\n  --prop-accent-disabled: #00404d;\r\n\r\n  --prop-border-hovered: hsl(0, 0%, 38%);\r\n  --prop-hovered: hsl(0, 0%, 22%);\r\n  --prop-standard: hsl(0, 0%, 18%);\r\n  --prop-disabled: hsl(0, 0%, 14%);\r\n  --prop-sunken: hsl(0, 0%, 8%);\r\n\r\n  --text-standard: hsl(0, 0%, 66%);\r\n  --text-disabled: hsl(0, 0%, 33%);\r\n\r\n  --vertical-divider: hsl(0, 0%, 14%);\r\n\r\n  --border-radius: 5px;\r\n  --property-height: 34px;\r\n  --subproperty-height: 20px;\r\n}\r\n\r\n\r\nbody {\r\n  margin: 0px;\r\n  background: rgb(25, 25, 25);\r\n  font-family: 'Lexend', sans-serif;\r\n  overflow: hidden;\r\n  user-select: none;\r\n  font-size: 85%;\r\n}\r\n\r\ncanvas {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n\r\n.column-properties {\r\n  background: var(--prop-bg);\r\n  position: absolute;\r\n  width: var(--properties-width);\r\n  height: 100%;\r\n  overflow: auto;\r\n}\r\n\r\n.column-canvas {\r\n  position: absolute;\r\n  margin-left: var(--properties-width);\r\n  width: calc(100% - var(--properties-width));\r\n  height: 100%;\r\n  cursor: crosshair;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 10px;\r\n}\r\n\r\n.property {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  color: var(--text-standard);\r\n  font-size: 85%;\r\n  margin: 0px 0px;\r\n  padding: 5px 10px;\r\n}\r\n\r\n.big-padding {\r\n  padding-bottom: 25px;\r\n}\r\n.big-padding:last-child {\r\n  padding-bottom: 5px;\r\n}\r\n\r\n.group-heading {\r\n  padding: 10px 10px;\r\n  color: #303030;\r\n  font-weight: 400;\r\n  font-size: 85%;\r\n  letter-spacing: 4px;\r\n}\r\n\r\n\r\n.prop-key-container {\r\n  align-self: center;\r\n  padding: 0px 10px 0px 0px;\r\n  width: 150px;\r\n  overflow: auto;\r\n}\r\n\r\n.prop-key-container-disabled {\r\n  color: var(--text-disabled) !important;\r\n}\r\n\r\n.prop-value-container {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  width: 0px;\r\n}\r\n\r\n\r\n\r\n.subproperty-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n}\r\n\r\n.subproperty {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  color: var(--text-standard);\r\n  font-size: 85%;\r\n  width: 100%;\r\n  padding-top: 2px;\r\n  padding-bottom: 2px;\r\n  border-bottom: 1px solid var(--vertical-divider);\r\n}\r\n.subproperty:last-child {\r\n  border-bottom: 0px;\r\n}\r\n\r\n.subprop-key-container {\r\n  align-self: center;\r\n  width: 30%;\r\n  overflow: auto;\r\n}\r\n\r\n.subprop-value-container {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  min-height: var(--subproperty-height);\r\n  width: 100%;\r\n  overflow: auto;\r\n  font-weight: 300;\r\n  /*border-left: 1px solid var(--vertical-divider);*/\r\n  padding-left: 5px;\r\n}\r\n\r\n\r\n\r\n.height-small {\r\n  height: var(--subproperty-height);\r\n  font-size: 100%;\r\n}\r\n\r\n.height-normal {\r\n  height: var(--property-height);\r\n}\r\n\r\n\r\n.item-body-sunken {\r\n  background: var(--prop-sunken);\r\n  box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 10px 0px inset;\r\n  border-radius: var(--border-radius);\r\n  color: #8C8C8C80;\r\n  font-weight: 300;\r\n  font-size: 90%;\r\n  padding: 12px 18px;\r\n  line-height: 180%;\r\n  min-height: 22px;\r\n  width: 100%;\r\n  border: 1.5px solid var(--prop-sunken);\r\n  transition-duration: 1s;\r\n  overflow: hidden;\r\n}\r\n\r\n.slider-height-normal {\r\n  height: calc(var(--property-height) - 4px);\r\n}\r\n\r\n.slider-height-small {\r\n  height: calc(var(--subproperty-height) - 4px);\r\n  font-size: 100%;\r\n}\r\n\r\ninput {\r\n  font-size: 100%;\r\n  user-select: none;\r\n  margin-right: 3px;\r\n  border-radius: var(--border-radius);\r\n  text-align: center;\r\n  background: var(--prop-standard);\r\n  font-family: 'Lexend', sans-serif;\r\n  font-weight: 300;\r\n  color: var(--text-standard);\r\n  outline-color: var(--prop-accent-hovered);\r\n  border: 1px solid rgb(255, 255, 255, 0.0);\r\n}\r\ninput:hover:enabled {\r\n  color: #C6C6C6;\r\n  border: 1px solid rgb(255, 255, 255, 0.1);\r\n  background: var(--prop-hovered);\r\n}\r\ninput:disabled {\r\n  background: var(--prop-disabled);\r\n  color: var(--text-disabled);\r\n}\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n\r\nselect {\r\n  font-size: 100%;\r\n  width: 100%;\r\n  height: var(--property-height);\r\n  padding-left: 5px;\r\n  border-radius: var(--border-radius);\r\n  font-family: 'Lexend', sans-serif;\r\n  font-weight: 300;\r\n  color: var(--text-standard);\r\n  background: var(--prop-standard);\r\n  border: 1px solid rgb(255, 255, 255, 0.0);\r\n  max-width: 100%;\r\n  outline-color: var(--prop-accent-hovered);\r\n  opacity: 1.0;\r\n  cursor: inherit;\r\n}\r\nselect:hover:enabled {\r\n  color: #C6C6C6;\r\n  background: var(--prop-hovered);\r\n  border: 1px solid rgb(255, 255, 255, 0.1);\r\n  cursor: pointer;\r\n}\r\nselect:disabled {\r\n  background: var(--prop-disabled) !important;\r\n  color: var(--text-disabled);\r\n}\r\n\r\n.slider-bar-height-normal {\r\n  height: calc(var(--property-height) - 2px);\r\n}\r\n\r\n.slider-bar-height-small {\r\n  height: calc(var(--subproperty-height) - 2px);\r\n}\r\n\r\n.new-slider {\r\n  border-radius: var(--border-radius);\r\n  font-family: 'Lexend', sans-serif;\r\n  font-weight: 300;\r\n  background: var(--prop-standard);\r\n  cursor: ew-resize;\r\n  border: 1px solid var(--prop-bg);\r\n  overflow: hidden;\r\n}\r\n.new-slider-hover {\r\n  border: 1px solid rgba(255, 255, 255, 0.1) !important;\r\n  background: var(--prop-hovered) !important;\r\n}\r\n.new-slider-disabled {\r\n  background: var(--prop-disabled) !important;\r\n  cursor: inherit !important;\r\n}\r\n\r\n.new-slider-bar {\r\n  border-radius: var(--border-radius);\r\n  height: calc(100% - 2px);\r\n  background: var(--prop-accent-standard);\r\n  border: 1px solid rgb(255, 255, 255, 0.0);\r\n}\r\n.new-slider-bar-hover {\r\n  border: 1px solid rgb(255, 255, 255, 0.2) !important;\r\n  background: var(--prop-accent-hovered) !important;\r\n}\r\n.new-slider-bar-disabled {\r\n  background: var(--prop-accent-disabled) !important;\r\n  cursor: inherit !important;\r\n  border: 1px solid rgb(255, 255, 255, 0.0) !important;\r\n}\r\n\r\n\r\n\r\n.button {\r\n  width: calc(100% - 2px);\r\n  height: calc(var(--property-height) - 2px);\r\n  background: var(--prop-accent-standard);\r\n  border-radius: var(--border-radius);\r\n  color: white;\r\n  text-align: center;\r\n  border: 1px solid rgb(255, 255, 255, 0);\r\n  position: relative;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.button:hover {\r\n  border: 1px solid rgb(255, 255, 255, 0.2);\r\n  background: var(--prop-accent-hovered);\r\n  cursor: pointer;\r\n}\r\n.button-disabled {\r\n  cursor: inherit !important;\r\n  background: var(--prop-accent-disabled) !important;\r\n  border: 1px solid rgb(255, 255, 255, 0) !important;\r\n  color: #808080 !important;\r\n}\r\n\r\n.button-progress {\r\n  /*border: 1px solid green;*/\r\n\tz-index: 5;\r\n\tbackground: white;\r\n  opacity: 0.1;\r\n  border-radius: var(--border-radius);\r\n  position: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n  width: 0%;\r\n  transition: width 0.2s;\r\n}\r\n\r\n.input-file {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: calc(var(--property-height) - 2px);\r\n  background: var(--prop-standard);\r\n  border-radius: var(--border-radius);\r\n  font-weight: 300;\r\n  padding: 0px 10px;\r\n  border: 1px solid rgb(255, 255, 255, 0);\r\n}\r\n.input-file-hover {\r\n  border: 1px solid rgb(255, 255, 255, 0.2);\r\n  background: var(--prop-hovered);\r\n  cursor: pointer;\r\n}\r\n.input-file-disabled {\r\n  background: var(--prop-disabled) !important;\r\n  color: var(--text-disabled) !important;\r\n}\r\n\r\n.h-div {\r\n  height: 2px;\r\n  border-radius: 2px;\r\n  background: var(--prop-alt);\r\n}\r\n\r\n.disabled {\r\n  opacity: 0.5;\r\n  cursor: inherit !important;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n::-webkit-scrollbar {\r\n  width: 10px;\r\n  height: 5px;\r\n}\r\n\r\n::-webkit-scrollbar-track {\r\n  background: rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-radius: 10px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb:hover {\r\n  background: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.message-builder-item {\r\n  overflow: auto;\r\n  white-space: nowrap;\r\n}\r\n\r\n.status-warning {\r\n  transition-duration: 0.5s;\r\n  color: orange;\r\n}\r\n\r\n.status-success {\r\n  transition-duration: 0.5s;\r\n  color: var(--prop-accent-standard);\r\n}\r\n\r\n.status-error {\r\n  transition-duration: 0.5s;\r\n  color: rgb(156, 27, 27);\r\n}\r\n\r\n.spinbox-key {\r\n  color: #ffffffb9;\r\n  font-size: 85%;\r\n  font-weight: 300;\r\n  padding-right: 5px;\r\n}\r\n\r\n.spinbox-key-hover {\r\n  border: rgba(255, 255, 255, 0.2) !important;\r\n  filter: brightness(1.5);\r\n  cursor: ew-resize;\r\n}\r\n\r\n.spinbox-key-disabled {\r\n  filter: brightness(0.4);\r\n}\r\n\r\n.spinbox-value {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: calc(var(--property-height) - 2px);\r\n  background: var(--prop-standard);\r\n  border-radius: 5px;\r\n  flex-grow: 1;\r\n  font-weight: 300;\r\n  border: 1px solid rgba(255, 255, 255, 0.0);\r\n  color: var(--text-standard);\r\n}\r\n\r\n.spinbox-value-hover {\r\n  border: 1px solid rgba(255, 255, 255, 0.2) !important;\r\n  background: var(--prop-hovered) !important;\r\n  cursor: ew-resize;\r\n}\r\n\r\n.spinbox-value-disabled {\r\n  color: var(--text-disabled);\r\n  background: var(--prop-disabled) !important;\r\n}\r\n\r\n.spinbox-divider {\r\n  width: 3px;\r\n}\r\n\r\n.toolbar {\r\n  display: flex;\r\n  position: inherit;\r\n  flex-direction: row;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n  cursor: inherit;\r\n  pointer-events: none;\r\n}\r\n\r\n.toolbar-column {\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin: 20px 10px;\r\n}\r\n\r\n.toolbar-column:last-child {\r\n  flex-direction: row-reverse !important;\r\n}\r\n\r\n.toolbar-group {\r\n  display: flex;\r\n  flex-direction: row;\r\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 16px;\r\n  border-radius: var(--border-radius);\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.toolbar-item {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 32px;\r\n  padding: 0px 8px 0px 8px;\r\n  text-align: center;\r\n  color: var(--text-standard);\r\n  font-size: 85%;\r\n  background-color: var(--prop-standard);\r\n  border: 1px solid var(--prop-standard);\r\n  pointer-events: all;\r\n  gap: 2px;\r\n}\r\n\r\n.toolbar-item-small {\r\n  height: 24px !important;\r\n  padding: 0px 4px 0px 4px !important;\r\n}\r\n\r\n.toolbar-item-hover {\r\n  background-color: var(--prop-hovered) !important;\r\n  border: 1px solid var(--prop-border-hovered) !important;\r\n  cursor: pointer;\r\n}\r\n\r\n.toolbar-item-active-hover {\r\n  background-color: var(--prop-accent-hovered) !important;\r\n  border: 1px solid var(--prop-accent-border-hovered) !important;\r\n  cursor: pointer;\r\n  color: white;\r\n}\r\n\r\n.toolbar-item-disabled-active {\r\n  background-color: var(--prop-accent-disabled) !important;\r\n  border: 1px solid var(--prop-accent-disabled) !important;\r\n}\r\n\r\n.toolbar-item-disabled {\r\n  background-color: var(--prop-disabled) !important;\r\n  border: 1px solid var(--prop-disabled) !important;\r\n  cursor: default;\r\n}\r\n\r\n.toolbar-item-active {\r\n  background-color: var(--prop-accent-standard) !important;\r\n  border-color: var(--prop-accent-border-hovered) !important;\r\n  color: white;\r\n}\r\n\r\n.toolbar-item:first-child {\r\n  border-top-left-radius: 5px;\r\n  border-bottom-left-radius: 5px;\r\n}\r\n\r\n.toolbar-item:last-child {\r\n  border-top-right-radius: 5px;\r\n  border-bottom-right-radius: 5px;\r\n}\r\n\r\nsvg {\r\n  width: 16px;\r\n  height: 16px;\r\n  stroke: var(--text-standard);\r\n}\r\n\r\n.icon-active {\r\n  stroke: white !important;\r\n}\r\n\r\n.icon-disabled {\r\n  stroke: var(--text-disabled) !important;\r\n}\r\n\r\n.icon-disabled-active {\r\n  stroke: #808080 !important;\r\n}\r\n\r\n.palette-container {\r\n  width: 100%;\r\n  height: 200px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  align-items: flex-start;\r\n  align-content: flex-start;\r\n  overflow: auto;\r\n  gap: 4px;\r\n}\r\n\r\n.palette-item {\r\n  display: flex;\r\n  background: var(--prop-disabled);\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 8px;\r\n}\r\n\r\n\r\n.interactable-base {\r\n  display: flex;\r\n  border-radius: 8px;\r\n  padding: 5px;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n}\r\n\r\n\r\n.interactable {\r\n  border-color: rgb(255, 255, 255, 0.0);\r\n  background-color: var(--prop-standard);\r\n}\r\n\r\n.interactable-hover {\r\n  border-color: rgb(255, 255, 255, 0.2);\r\n  background-color: var(--prop-standard);\r\n}\r\n\r\n.interactable-disabled {\r\n  border-color: rgb(255, 255, 255, 0.0);\r\n  background-color: var(--prop-disabled);\r\n}\r\n\r\n\r\n.interactable-active {\r\n  border-color: var(----prop-accent-standard);\r\n  background-color: var(--prop-accent-standard);\r\n}\r\n\r\n.interactable-active-hover {\r\n  border-color: var(--prop-accent-border-hovered);\r\n  background-color: var(--prop-accent-hovered);\r\n}\r\n\r\n.interactable-active-disabled {\r\n  border-color: var(--prop-accent-disabled);\r\n  background-color: var(--prop-accent-disabled);\r\n}\r\n\r\n\r\n\r\n.toggleable-icon {\r\n  filter: drop-shadow(0px 0px 4px rgba(0, 0, 0, 0.125));\r\n}\r\n\r\n\r\n.button-loading {\r\n  box-shadow: 0 0 0 0 rgba(0, 0, 0, 1);\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n@keyframes pulse {\r\n  0% {\r\n    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.5);\r\n  }\r\n\r\n  70% {\r\n    box-shadow: 0 0 0 6px rgba(255, 255, 255, 0);\r\n  }\r\n\r\n  100% {\r\n    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);\r\n  }\r\n}\r\n\r\n\r\n\r\n.loader-circle {\r\n  width: 6px;\r\n  height: 6px;\r\n  border-radius: 50%;\r\n  background-color: currentColor;\r\n}\r\n\r\n.spin {\r\n  animation: blinker 0.75s ease-in-out infinite;\r\n}\r\n\r\n@keyframes blinker {\r\n  0% {\r\n    opacity: 100%;\r\n  }\r\n  50% {\r\n    opacity: 50%;\r\n  }\r\n  100% {\r\n    opacity: 100%;\r\n  }\r\n}\r\n\r\n\r\n\r\n.progress-bar-container {\r\n  width: 100%;\r\n  height: 2px;\r\n}\r\n\r\n.progress-bar {\r\n  background-color: var(--prop-accent-standard);\r\n  height: 100%;\r\n  transition: width 0.1s;\r\n}\r\n\r\n.colour-swatch {\r\n  border: 1px solid #8C8C8C80;\r\n  border-radius: 5px;\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  appearance: none;\r\n  background: none;\r\n  width: 100%;\r\n  margin: 0px;\r\n  padding: 0px;\r\n}\r\n.colour-swatch-hover {\r\n  border-color: var(--text-standard) !important;\r\n}\r\n\r\n.colour-swatch::-webkit-color-swatch-wrapper {\r\n  border: none;\r\n  margin: 0px;\r\n  padding: 0px;\r\n}\r\n.colour-swatch::-webkit-color-swatch {\r\n  border: none;\r\n  margin: 0px;\r\n  padding: 0px;\r\n  border-radius: 5px;\r\n}\r\n\r\n.texture-preview {\r\n  border: 1px solid #8C8C8C80;\r\n  border-radius: 5px;\r\n  width: calc(100% - 2px);\r\n}\r\n.texture-preview-missing {\r\n  border-color: orange !important;\r\n}\r\n\r\n.texture-hover {\r\n  border-color: var(--text-standard) !important;\r\n}\r\n\r\n.material-container {\r\n}\r\n\r\n.checkbox {\r\n  height: calc(var(--property-height) * 0.75);\r\n  aspect-ratio: 1/1;\r\n  background-color: var(--prop-standard);\r\n  border-radius: 5px;\r\n  border: 1px solid var(--prop-standard);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.checkbox-hover {\r\n  background-color: var(--prop-hovered) !important;\r\n  border: 1px solid rgba(255, 255, 255, 0.2) !important;\r\n  cursor: pointer;\r\n}\r\n.checkbox-disabled {\r\n  background-color: var(--prop-disabled) !important;\r\n  border: 1px solid var(--prop-disabled) !important;\r\n}\r\n\r\n.checkbox-text {\r\n  padding-left: 10px;\r\n  font-weight: 300;\r\n  color: var(--text-standard)\r\n}\r\n.checkbox-text-disabled {\r\n  color: var(--text-disabled);\r\n}\r\n\r\n.checkbox-pip {\r\n  width: 50%;\r\n  height: 50%;\r\n  border-radius: 3px;\r\n}\r\n.checkbox-pip-hover {\r\n  stroke: white;\r\n}\r\n.checkbox-pip-disabled {\r\n  stroke: var(--text-disabled);\r\n}\r\n\r\n.spinbox-main-container {\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 100%;\r\n}\r\n\r\n.spinbox-element-container {\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-grow: 1;\r\n  height: 50%;\r\n  align-items: center;\r\n  padding-left: 5px;\r\n}\r\n\r\n.spinbox-element-container:first-child {\r\n  padding-right: 0px;\r\n}\r\n\r\n\r\n\r\n.row-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2px;\r\n}\r\n\r\n.row-item {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n}\r\n\r\n.col-container {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 2px;\r\n}\r\n\r\n.col-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}",""]);const s=a},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);n&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},4289:(e,t,r)=>{"use strict";var n=r(2215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,l=r(1044)(),u=s&&l,c=function(e,t,r,n){var i;(!(t in e)||"function"==typeof(i=n)&&"[object Function]"===o.call(i)&&n())&&(u?s(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},f=function(e,t){var r=arguments.length>2?arguments[2]:{},o=n(t);i&&(o=a.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1)c(e,o[s],t[o[s]],r[o[s]])};f.supportsDescriptors=!!u,e.exports=f},8091:e=>{"use strict";function t(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var l=o[a],u=Object.getOwnPropertyDescriptor(i,l);void 0!==u&&u.enumerable&&(r[l]=i[l])}}return r}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},7187:(e,t,r)=>{"use strict";var n,i=r(5108),o="object"==typeof Reflect?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}_(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&_(e,"error",t,{once:!0})}(e,i)}))},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var o,a,s,l;if(c(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]),void 0===s)s=a[t]=r,++e._eventsCount;else if("function"==typeof s?s=a[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=f(e))>0&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,i&&i.warn&&i.warn(l)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function g(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):y(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function _(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return f(this)},l.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var u=l.length,c=y(l,u);for(r=0;r<u;++r)a(c[r],this,t)}return!0},l.prototype.addListener=function(e,t){return h(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return h(this,e,t,!0)},l.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},l.prototype.removeListener=function(e,t){var r,n,i,o,a;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},l.prototype.listeners=function(e){return g(this,e,!0)},l.prototype.rawListeners=function(e){return g(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},l.prototype.listenerCount=m,l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},4029:(e,t,r)=>{"use strict";var n=r(5320),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,a=function(e,t,r){for(var n=0,i=e.length;n<i;n++)o.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))},s=function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},l=function(e,t,r){for(var n in e)o.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))};e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=r),"[object Array]"===i.call(e)?a(e,t,o):"string"==typeof e?s(e,t,o):l(e,t,o)}},7648:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,i="[object Function]";e.exports=function(e){var o=this;if("function"!=typeof o||n.call(o)!==i)throw new TypeError(t+o);for(var a,s=r.call(arguments,1),l=Math.max(0,o.length-s.length),u=[],c=0;c<l;c++)u.push("$"+c);if(a=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var t=o.apply(this,s.concat(r.call(arguments)));return Object(t)===t?t:this}return o.apply(e,s.concat(r.call(arguments)))})),o.prototype){var f=function(){};f.prototype=o.prototype,a.prototype=new f,f.prototype=null}return a}},8612:(e,t,r)=>{"use strict";var n=r(7648);e.exports=Function.prototype.bind||n},210:(e,t,r)=>{"use strict";var n,i=SyntaxError,o=Function,a=TypeError,s=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var u=function(){throw new a},c=l?function(){try{return u}catch(e){try{return l(arguments,"callee").get}catch(e){return u}}}():u,f=r(1405)(),h=Object.getPrototypeOf||function(e){return e.__proto__},d={},p="undefined"==typeof Uint8Array?n:h(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":f?h([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?h(h([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f?h((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f?h((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?h(""[Symbol.iterator]()):n,"%Symbol%":f?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":p,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},m=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(r=h(i.prototype))}return g[t]=r,r},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=r(8612),b=r(7642),v=_.call(Function.call,Array.prototype.concat),x=_.call(Function.apply,Array.prototype.splice),w=_.call(Function.call,String.prototype.replace),E=_.call(Function.call,String.prototype.slice),A=_.call(Function.call,RegExp.prototype.exec),T=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,M=function(e){var t=E(e,0,1),r=E(e,-1);if("%"===t&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return w(e,T,(function(e,t,r,i){n[n.length]=r?w(i,S,"$1"):t||e})),n},k=function(e,t){var r,n=e;if(b(y,n)&&(n="%"+(r=y[n])[0]+"%"),b(g,n)){var o=g[n];if(o===d&&(o=m(n)),void 0===o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===A(/^%?[^%]*%?$/,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=M(e),n=r.length>0?r[0]:"",o=k("%"+n+"%",t),s=o.name,u=o.value,c=!1,f=o.alias;f&&(n=f[0],x(r,v([0,1],f)));for(var h=1,d=!0;h<r.length;h+=1){var p=r[h],m=E(p,0,1),y=E(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===y||"'"===y||"`"===y)&&m!==y)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&d||(c=!0),b(g,s="%"+(n+="."+p)+"%"))u=g[s];else if(null!=u){if(!(p in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&h+1>=r.length){var _=l(u,p);u=(d=!!_)&&"get"in _&&!("originalValue"in _.get)?_.get:u[p]}else d=b(u,p),u=u[p];d&&!c&&(g[s]=u)}}return u}},7296:(e,t,r)=>{"use strict";var n=r(210)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},1044:(e,t,r)=>{"use strict";var n=r(210)("%Object.defineProperty%",!0),i=function(){if(n)try{return n({},"a",{value:1}),!0}catch(e){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},1405:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(5419);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}},5419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},6410:(e,t,r)=>{"use strict";var n=r(5419);e.exports=function(){return n()&&!!Symbol.toStringTag}},7642:(e,t,r)=>{"use strict";var n=r(8612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},645:(e,t)=>{t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=u}return(d?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?h/l:h*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+d]=255&a,d+=p,a/=256,u-=8);e[r+d-p]|=128*g}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},2584:(e,t,r)=>{"use strict";var n=r(6410)(),i=r(1924)("Object.prototype.toString"),o=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},a=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,e.exports=s?o:a},5320:e=>{"use strict";var t,r,n=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},i((function(){throw 42}),null,t)}catch(e){e!==r&&(i=null)}else i=null;var o=/^\s*class\b/,a=function(e){try{var t=n.call(e);return o.test(t)}catch(e){return!1}},s=function(e){try{return!a(e)&&(n.call(e),!0)}catch(e){return!1}},l=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,c=!(0 in[,]),f=function(){return!1};if("object"==typeof document){var h=document.all;l.call(h)===l.call(document.all)&&(f=function(e){if((c||!e)&&(void 0===e||"object"==typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=i?function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{i(e,null,t)}catch(e){if(e!==r)return!1}return!a(e)&&s(e)}:function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(u)return s(e);if(a(e))return!1;var t=l.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},8662:(e,t,r)=>{"use strict";var n,i=Object.prototype.toString,o=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=r(6410)(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(a.test(o.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(e);if(!l)return!1;if(void 0===n){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&l(t)}return l(e)===n}},8611:e=>{"use strict";e.exports=function(e){return e!=e}},360:(e,t,r)=>{"use strict";var n=r(5559),i=r(4289),o=r(8611),a=r(9415),s=r(3194),l=n(a(),Number);i(l,{getPolyfill:a,implementation:o,shim:s}),e.exports=l},9415:(e,t,r)=>{"use strict";var n=r(8611);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:n}},3194:(e,t,r)=>{"use strict";var n=r(4289),i=r(9415);e.exports=function(){var e=i();return n(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},5692:(e,t,r)=>{"use strict";var n=r(4029),i=r(3083),o=r(1924),a=o("Object.prototype.toString"),s=r(6410)(),l=r(7296),u="undefined"==typeof globalThis?r.g:globalThis,c=i(),f=o("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},h=o("String.prototype.slice"),d={},p=Object.getPrototypeOf;s&&l&&p&&n(c,(function(e){var t=new u[e];if(Symbol.toStringTag in t){var r=p(t),n=l(r,Symbol.toStringTag);if(!n){var i=p(r);n=l(i,Symbol.toStringTag)}d[e]=n.get}})),e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!s||!(Symbol.toStringTag in e)){var t=h(a(e),8,-1);return f(c,t)>-1}return!!l&&function(e){var t=!1;return n(d,(function(r,n){if(!t)try{t=r.call(e)===n}catch(e){}})),t}(e)}},3085:(e,t,r)=>{"use strict";var n=r(5108);const i=r(9742),o=r(645),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=u,t.h2=50;const s=2147483647;function l(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|m(e,t);let n=l(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if($(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if($(e,ArrayBuffer)||e&&$(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&($(e,SharedArrayBuffer)||e&&$(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|g(e.length),r=l(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||K(e.length)?l(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return f(e),l(e<0?0:0|g(e))}function d(e){const t=e.length<0?0:0|g(e.length),r=l(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function g(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||$(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(i)return n?-1:q(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return M(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function _(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===l)return n*a}else-1!==n&&(o-=o-n),n=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){let r=!0;for(let n=0;n<l;n++)if(u(e,o+n)!==u(t,n)){r=!1;break}if(r)return o}return-1}function x(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let a;for(n>o/2&&(n=o/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(K(n))return a;e[r+a]=n}return a}function w(e,t,r,n){return X(q(t,e.length-r),e,r,n)}function E(e,t,r,n){return X(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function A(e,t,r,n){return X(Y(t),e,r,n)}function T(e,t,r,n){return X(function(e,t){let r,n,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function M(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(o=l));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(l=(15&t)<<12|(63&r)<<6|63&n,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:r=e[i+1],n=e[i+2],s=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(e){const t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}(n)}u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||void 0===n||"function"!=typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return f(e),e<=0?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)}(e,t,r)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if($(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),$(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if($(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)_(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?M(this,0,e):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if($(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const s=Math.min(o,a),l=this.slice(n,i),c=e.slice(t,r);for(let e=0;e<s;++e)if(l[e]!==c[e]){o=l[e],a=c[e];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function O(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function I(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function R(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=J[e[n]];return i}function C(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function V(e,t,r,n,i){G(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function P(e,t,r,n,i){G(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function U(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(e,t,r,n,i){return t=+t,r>>>=0,i||U(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,i){return t=+t,r>>>=0,i||U(e,0,r,8),o.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=Q((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=Q((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=Q((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=Q((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||B(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||B(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=Q((function(e,t=0){return V(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Q((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=Q((function(e,t=0){return V(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Q((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return N(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return N(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=u.isBuffer(e)?e:u.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%a]}return this};const j={};function z(e,t,r){j[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function D(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function G(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new j.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||W(t,e.length-(r+1))}(n,i,o)}function H(e,t){if("number"!=typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,r){if(Math.floor(e)!==e)throw H(e,r),new j.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=D(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=D(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const Z=/[^+/0-9A-Za-z-_]/g;function q(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Y(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function X(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function $(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Q(e){return"undefined"==typeof BigInt?ee:e}function ee(){throw new Error("BigInt not supported")}},4244:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,r){return 0===e&&0===r?1/e==1/r:e===r||!(!t(e)||!t(r))}},609:(e,t,r)=>{"use strict";var n=r(4289),i=r(5559),o=r(4244),a=r(5624),s=r(2281),l=i(a(),Object);n(l,{getPolyfill:a,implementation:o,shim:s}),e.exports=l},5624:(e,t,r)=>{"use strict";var n=r(4244);e.exports=function(){return"function"==typeof Object.is?Object.is:n}},2281:(e,t,r)=>{"use strict";var n=r(5624),i=r(4289);e.exports=function(){var e=n();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},8987:(e,t,r)=>{"use strict";var n;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=r(1414),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{f(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===o.call(e),n=a(e),s=t&&"[object String]"===o.call(e),h=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var p=u&&r;if(s&&e.length>0&&!i.call(e,0))for(var g=0;g<e.length;++g)h.push(String(g));if(n&&e.length>0)for(var m=0;m<e.length;++m)h.push(String(m));else for(var y in e)p&&"prototype"===y||!i.call(e,y)||h.push(String(y));if(l)for(var _=function(e){if("undefined"==typeof window||!d)return f(e);try{return f(e)}catch(e){return!1}}(e),b=0;b<c.length;++b)_&&"constructor"===c[b]||!i.call(e,c[b])||h.push(c[b]);return h}}e.exports=n},2215:(e,t,r)=>{"use strict";var n=Array.prototype.slice,i=r(1414),o=Object.keys,a=o?function(e){return o(e)}:r(8987),s=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(e)?s(n.call(e)):s(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},1414:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},4236:(e,t)=>{"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,a;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},6069:e=>{"use strict";e.exports=function(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+t[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},1619:e=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2869:e=>{"use strict";var t=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,r,n,i){var o=t,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^r[s])];return-1^e}},405:(e,t,r)=>{"use strict";var n,i=r(4236),o=r(342),a=r(6069),s=r(2869),l=r(8898),u=0,c=4,f=0,h=-2,d=-1,p=1,g=4,m=2,y=8,_=9,b=286,v=30,x=19,w=2*b+1,E=15,A=3,T=258,S=T+A+1,M=42,k=103,O=113,I=666,R=1,C=2,L=3,B=4;function V(e,t){return e.msg=l[t],t}function P(e){return(e<<1)-(e>4?9:0)}function U(e){for(var t=e.length;--t>=0;)e[t]=0}function N(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function F(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,N(e.strm)}function j(e,t){e.pending_buf[e.pending++]=t}function z(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function D(e,t){var r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-S?e.strstart-(e.w_size-S):0,u=e.window,c=e.w_mask,f=e.prev,h=e.strstart+T,d=u[o+a-1],p=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(r=t)+a]===p&&u[r+a-1]===d&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<h);if(n=T-(h-o),o=h-T,n>a){if(e.match_start=t,a=n,n>=s)break;d=u[o+a-1],p=u[o+a]}}}while((t=f[t&c])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead}function G(e){var t,r,n,o,l,u,c,f,h,d,p=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-S)){i.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=p?n-p:0}while(--r);t=r=p;do{n=e.prev[--t],e.prev[t]=n>=p?n-p:0}while(--r);o+=p}if(0===e.strm.avail_in)break;if(u=e.strm,c=e.window,f=e.strstart+e.lookahead,h=o,d=void 0,(d=u.avail_in)>h&&(d=h),r=0===d?0:(u.avail_in-=d,i.arraySet(c,u.input,u.next_in,d,f),1===u.state.wrap?u.adler=a(u.adler,c,d,f):2===u.state.wrap&&(u.adler=s(u.adler,c,d,f)),u.next_in+=d,u.total_in+=d,d),e.lookahead+=r,e.lookahead+e.insert>=A)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+A-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<A)););}while(e.lookahead<S&&0!==e.strm.avail_in)}function H(e,t){for(var r,n;;){if(e.lookahead<S){if(G(e),e.lookahead<S&&t===u)return R;if(0===e.lookahead)break}if(r=0,e.lookahead>=A&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-S&&(e.match_length=D(e,r)),e.match_length>=A)if(n=o._tr_tally(e,e.strstart-e.match_start,e.match_length-A),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=A){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(F(e,!1),0===e.strm.avail_out))return R}return e.insert=e.strstart<A-1?e.strstart:A-1,t===c?(F(e,!0),0===e.strm.avail_out?L:B):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?R:C}function W(e,t){for(var r,n,i;;){if(e.lookahead<S){if(G(e),e.lookahead<S&&t===u)return R;if(0===e.lookahead)break}if(r=0,e.lookahead>=A&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=A-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-S&&(e.match_length=D(e,r),e.match_length<=5&&(e.strategy===p||e.match_length===A&&e.strstart-e.match_start>4096)&&(e.match_length=A-1)),e.prev_length>=A&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-A,n=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-A),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=A-1,e.strstart++,n&&(F(e,!1),0===e.strm.avail_out))return R}else if(e.match_available){if((n=o._tr_tally(e,0,e.window[e.strstart-1]))&&F(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return R}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<A-1?e.strstart:A-1,t===c?(F(e,!0),0===e.strm.avail_out?L:B):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?R:C}function Z(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*w),this.dyn_dtree=new i.Buf16(2*(2*v+1)),this.bl_tree=new i.Buf16(2*(2*x+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(E+1),this.heap=new i.Buf16(2*b+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*b+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?M:O,e.adler=2===t.wrap?0:1,t.last_flush=u,o._tr_init(t),f):V(e,h)}function X(e){var t,r=Y(e);return r===f&&((t=e.state).window_size=2*t.w_size,U(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=A-1,t.match_available=0,t.ins_h=0),r}function $(e,t,r,n,o,a){if(!e)return h;var s=1;if(t===d&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>_||r!==y||n<8||n>15||t<0||t>9||a<0||a>g)return V(e,h);8===n&&(n=9);var l=new q;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+A-1)/A),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=r,X(e)}n=[new Z(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(G(e),0===e.lookahead&&t===u)return R;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,F(e,!1),0===e.strm.avail_out))return R;if(e.strstart-e.block_start>=e.w_size-S&&(F(e,!1),0===e.strm.avail_out))return R}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?L:B):(e.strstart>e.block_start&&(F(e,!1),e.strm.avail_out),R)})),new Z(4,4,8,4,H),new Z(4,5,16,8,H),new Z(4,6,32,32,H),new Z(4,4,16,16,W),new Z(8,16,32,32,W),new Z(8,16,128,128,W),new Z(8,32,128,256,W),new Z(32,128,258,1024,W),new Z(32,258,258,4096,W)],t.deflateInit=function(e,t){return $(e,t,y,15,8,0)},t.deflateInit2=$,t.deflateReset=X,t.deflateResetKeep=Y,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,f):h},t.deflate=function(e,t){var r,i,a,l;if(!e||!e.state||t>5||t<0)return e?V(e,h):h;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===I&&t!==c)return V(e,0===e.avail_out?-5:h);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===M)if(2===i.wrap)e.adler=0,j(i,31),j(i,139),j(i,8),i.gzhead?(j(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),j(i,255&i.gzhead.time),j(i,i.gzhead.time>>8&255),j(i,i.gzhead.time>>16&255),j(i,i.gzhead.time>>24&255),j(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),j(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(j(i,255&i.gzhead.extra.length),j(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(j(i,0),j(i,0),j(i,0),j(i,0),j(i,0),j(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),j(i,3),i.status=O);else{var d=y+(i.w_bits-8<<4)<<8;d|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(d|=32),d+=31-d%31,i.status=O,z(i,d),0!==i.strstart&&(z(i,e.adler>>>16),z(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),N(e),a=i.pending,i.pending!==i.pending_buf_size));)j(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),N(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,j(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),N(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,j(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=k)}else i.status=k;if(i.status===k&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&N(e),i.pending+2<=i.pending_buf_size&&(j(i,255&e.adler),j(i,e.adler>>8&255),e.adler=0,i.status=O)):i.status=O),0!==i.pending){if(N(e),0===e.avail_out)return i.last_flush=-1,f}else if(0===e.avail_in&&P(t)<=P(r)&&t!==c)return V(e,-5);if(i.status===I&&0!==e.avail_in)return V(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==u&&i.status!==I){var p=2===i.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(G(e),0===e.lookahead)){if(t===u)return R;break}if(e.match_length=0,r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(F(e,!1),0===e.strm.avail_out))return R}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?L:B):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?R:C}(i,t):3===i.strategy?function(e,t){for(var r,n,i,a,s=e.window;;){if(e.lookahead<=T){if(G(e),e.lookahead<=T&&t===u)return R;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=A&&e.strstart>0&&(n=s[i=e.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=e.strstart+T;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);e.match_length=T-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=A?(r=o._tr_tally(e,1,e.match_length-A),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(F(e,!1),0===e.strm.avail_out))return R}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?L:B):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?R:C}(i,t):n[i.level].func(i,t);if(p!==L&&p!==B||(i.status=I),p===R||p===L)return 0===e.avail_out&&(i.last_flush=-1),f;if(p===C&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(U(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),N(e),0===e.avail_out))return i.last_flush=-1,f}return t!==c?f:i.wrap<=0?1:(2===i.wrap?(j(i,255&e.adler),j(i,e.adler>>8&255),j(i,e.adler>>16&255),j(i,e.adler>>24&255),j(i,255&e.total_in),j(i,e.total_in>>8&255),j(i,e.total_in>>16&255),j(i,e.total_in>>24&255)):(z(i,e.adler>>>16),z(i,65535&e.adler)),N(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?f:1)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==M&&69!==t&&73!==t&&91!==t&&t!==k&&t!==O&&t!==I?V(e,h):(e.state=null,t===O?V(e,-3):f):h},t.deflateSetDictionary=function(e,t){var r,n,o,s,l,u,c,d,p=t.length;if(!e||!e.state)return h;if(2===(s=(r=e.state).wrap)||1===s&&r.status!==M||r.lookahead)return h;for(1===s&&(e.adler=a(e.adler,t,p,0)),r.wrap=0,p>=r.w_size&&(0===s&&(U(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new i.Buf8(r.w_size),i.arraySet(d,t,p-r.w_size,r.w_size,0),t=d,p=r.w_size),l=e.avail_in,u=e.next_in,c=e.input,e.avail_in=p,e.next_in=0,e.input=t,G(r);r.lookahead>=A;){n=r.strstart,o=r.lookahead-(A-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+A-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=A-1,G(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=A-1,r.match_available=0,e.next_in=u,e.input=c,e.avail_in=l,r.wrap=s,f},t.deflateInfo="pako deflate (from Nodeca project)"},4264:e=>{"use strict";e.exports=function(e,t){var r,n,i,o,a,s,l,u,c,f,h,d,p,g,m,y,_,b,v,x,w,E,A,T,S;r=e.state,n=e.next_in,T=e.input,i=n+(e.avail_in-5),o=e.next_out,S=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=r.dmax,u=r.wsize,c=r.whave,f=r.wnext,h=r.window,d=r.hold,p=r.bits,g=r.lencode,m=r.distcode,y=(1<<r.lenbits)-1,_=(1<<r.distbits)-1;e:do{p<15&&(d+=T[n++]<<p,p+=8,d+=T[n++]<<p,p+=8),b=g[d&y];t:for(;;){if(d>>>=v=b>>>24,p-=v,0==(v=b>>>16&255))S[o++]=65535&b;else{if(!(16&v)){if(0==(64&v)){b=g[(65535&b)+(d&(1<<v)-1)];continue t}if(32&v){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}x=65535&b,(v&=15)&&(p<v&&(d+=T[n++]<<p,p+=8),x+=d&(1<<v)-1,d>>>=v,p-=v),p<15&&(d+=T[n++]<<p,p+=8,d+=T[n++]<<p,p+=8),b=m[d&_];r:for(;;){if(d>>>=v=b>>>24,p-=v,!(16&(v=b>>>16&255))){if(0==(64&v)){b=m[(65535&b)+(d&(1<<v)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(w=65535&b,p<(v&=15)&&(d+=T[n++]<<p,(p+=8)<v&&(d+=T[n++]<<p,p+=8)),(w+=d&(1<<v)-1)>l){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=v,p-=v,w>(v=o-a)){if((v=w-v)>c&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(E=0,A=h,0===f){if(E+=u-v,v<x){x-=v;do{S[o++]=h[E++]}while(--v);E=o-w,A=S}}else if(f<v){if(E+=u+f-v,(v-=f)<x){x-=v;do{S[o++]=h[E++]}while(--v);if(E=0,f<x){x-=v=f;do{S[o++]=h[E++]}while(--v);E=o-w,A=S}}}else if(E+=f-v,v<x){x-=v;do{S[o++]=h[E++]}while(--v);E=o-w,A=S}for(;x>2;)S[o++]=A[E++],S[o++]=A[E++],S[o++]=A[E++],x-=3;x&&(S[o++]=A[E++],x>1&&(S[o++]=A[E++]))}else{E=o-w;do{S[o++]=S[E++],S[o++]=S[E++],S[o++]=S[E++],x-=3}while(x>2);x&&(S[o++]=S[E++],x>1&&(S[o++]=S[E++]))}break}}break}}while(n<i&&o<s);n-=x=p>>3,d&=(1<<(p-=x<<3))-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<s?s-o+257:257-(o-s),r.hold=d,r.bits=p}},7948:(e,t,r)=>{"use strict";var n=r(4236),i=r(6069),o=r(2869),a=r(4264),s=r(9241),l=1,u=2,c=0,f=-2,h=1,d=12,p=30,g=852,m=592;function y(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(g),t.distcode=t.distdyn=new n.Buf32(m),t.sane=1,t.back=-1,c):f}function v(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,b(e)):f}function x(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?f:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,v(e))):f}function w(e,t){var r,n;return e?(n=new _,e.state=n,n.window=null,(r=x(e,t))!==c&&(e.state=null),r):f}var E,A,T=!0;function S(e){if(T){var t;for(E=new n.Buf32(512),A=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,E,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,A,0,e.work,{bits:5}),T=!1}e.lencode=E,e.lenbits=9,e.distcode=A,e.distbits=5}function M(e,t,r,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,t,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,t,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}t.inflateReset=v,t.inflateReset2=x,t.inflateResetKeep=b,t.inflateInit=function(e){return w(e,15)},t.inflateInit2=w,t.inflate=function(e,t){var r,g,m,_,b,v,x,w,E,A,T,k,O,I,R,C,L,B,V,P,U,N,F,j,z=0,D=new n.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return f;(r=e.state).mode===d&&(r.mode=13),b=e.next_out,m=e.output,x=e.avail_out,_=e.next_in,g=e.input,v=e.avail_in,w=r.hold,E=r.bits,A=v,T=x,N=c;e:for(;;)switch(r.mode){case h:if(0===r.wrap){r.mode=13;break}for(;E<16;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}if(2&r.wrap&&35615===w){r.check=0,D[0]=255&w,D[1]=w>>>8&255,r.check=o(r.check,D,2,0),w=0,E=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&w)<<8)+(w>>8))%31){e.msg="incorrect header check",r.mode=p;break}if(8!=(15&w)){e.msg="unknown compression method",r.mode=p;break}if(E-=4,U=8+(15&(w>>>=4)),0===r.wbits)r.wbits=U;else if(U>r.wbits){e.msg="invalid window size",r.mode=p;break}r.dmax=1<<U,e.adler=r.check=1,r.mode=512&w?10:d,w=0,E=0;break;case 2:for(;E<16;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}if(r.flags=w,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=p;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=p;break}r.head&&(r.head.text=w>>8&1),512&r.flags&&(D[0]=255&w,D[1]=w>>>8&255,r.check=o(r.check,D,2,0)),w=0,E=0,r.mode=3;case 3:for(;E<32;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}r.head&&(r.head.time=w),512&r.flags&&(D[0]=255&w,D[1]=w>>>8&255,D[2]=w>>>16&255,D[3]=w>>>24&255,r.check=o(r.check,D,4,0)),w=0,E=0,r.mode=4;case 4:for(;E<16;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}r.head&&(r.head.xflags=255&w,r.head.os=w>>8),512&r.flags&&(D[0]=255&w,D[1]=w>>>8&255,r.check=o(r.check,D,2,0)),w=0,E=0,r.mode=5;case 5:if(1024&r.flags){for(;E<16;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}r.length=w,r.head&&(r.head.extra_len=w),512&r.flags&&(D[0]=255&w,D[1]=w>>>8&255,r.check=o(r.check,D,2,0)),w=0,E=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((k=r.length)>v&&(k=v),k&&(r.head&&(U=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,g,_,k,U)),512&r.flags&&(r.check=o(r.check,g,k,_)),v-=k,_+=k,r.length-=k),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===v)break e;k=0;do{U=g[_+k++],r.head&&U&&r.length<65536&&(r.head.name+=String.fromCharCode(U))}while(U&&k<v);if(512&r.flags&&(r.check=o(r.check,g,k,_)),v-=k,_+=k,U)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===v)break e;k=0;do{U=g[_+k++],r.head&&U&&r.length<65536&&(r.head.comment+=String.fromCharCode(U))}while(U&&k<v);if(512&r.flags&&(r.check=o(r.check,g,k,_)),v-=k,_+=k,U)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;E<16;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}if(w!==(65535&r.check)){e.msg="header crc mismatch",r.mode=p;break}w=0,E=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=d;break;case 10:for(;E<32;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}e.adler=r.check=y(w),w=0,E=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=b,e.avail_out=x,e.next_in=_,e.avail_in=v,r.hold=w,r.bits=E,2;e.adler=r.check=1,r.mode=d;case d:if(5===t||6===t)break e;case 13:if(r.last){w>>>=7&E,E-=7&E,r.mode=27;break}for(;E<3;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}switch(r.last=1&w,E-=1,3&(w>>>=1)){case 0:r.mode=14;break;case 1:if(S(r),r.mode=20,6===t){w>>>=2,E-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=p}w>>>=2,E-=2;break;case 14:for(w>>>=7&E,E-=7&E;E<32;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",r.mode=p;break}if(r.length=65535&w,w=0,E=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(k=r.length){if(k>v&&(k=v),k>x&&(k=x),0===k)break e;n.arraySet(m,g,_,k,b),v-=k,_+=k,x-=k,b+=k,r.length-=k;break}r.mode=d;break;case 17:for(;E<14;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}if(r.nlen=257+(31&w),w>>>=5,E-=5,r.ndist=1+(31&w),w>>>=5,E-=5,r.ncode=4+(15&w),w>>>=4,E-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=p;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;E<3;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}r.lens[G[r.have++]]=7&w,w>>>=3,E-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},N=s(0,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,N){e.msg="invalid code lengths set",r.mode=p;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;C=(z=r.lencode[w&(1<<r.lenbits)-1])>>>16&255,L=65535&z,!((R=z>>>24)<=E);){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}if(L<16)w>>>=R,E-=R,r.lens[r.have++]=L;else{if(16===L){for(j=R+2;E<j;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}if(w>>>=R,E-=R,0===r.have){e.msg="invalid bit length repeat",r.mode=p;break}U=r.lens[r.have-1],k=3+(3&w),w>>>=2,E-=2}else if(17===L){for(j=R+3;E<j;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}E-=R,U=0,k=3+(7&(w>>>=R)),w>>>=3,E-=3}else{for(j=R+7;E<j;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}E-=R,U=0,k=11+(127&(w>>>=R)),w>>>=7,E-=7}if(r.have+k>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=p;break}for(;k--;)r.lens[r.have++]=U}}if(r.mode===p)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=p;break}if(r.lenbits=9,F={bits:r.lenbits},N=s(l,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,N){e.msg="invalid literal/lengths set",r.mode=p;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},N=s(u,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,N){e.msg="invalid distances set",r.mode=p;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(v>=6&&x>=258){e.next_out=b,e.avail_out=x,e.next_in=_,e.avail_in=v,r.hold=w,r.bits=E,a(e,T),b=e.next_out,m=e.output,x=e.avail_out,_=e.next_in,g=e.input,v=e.avail_in,w=r.hold,E=r.bits,r.mode===d&&(r.back=-1);break}for(r.back=0;C=(z=r.lencode[w&(1<<r.lenbits)-1])>>>16&255,L=65535&z,!((R=z>>>24)<=E);){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}if(C&&0==(240&C)){for(B=R,V=C,P=L;C=(z=r.lencode[P+((w&(1<<B+V)-1)>>B)])>>>16&255,L=65535&z,!(B+(R=z>>>24)<=E);){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}w>>>=B,E-=B,r.back+=B}if(w>>>=R,E-=R,r.back+=R,r.length=L,0===C){r.mode=26;break}if(32&C){r.back=-1,r.mode=d;break}if(64&C){e.msg="invalid literal/length code",r.mode=p;break}r.extra=15&C,r.mode=22;case 22:if(r.extra){for(j=r.extra;E<j;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}r.length+=w&(1<<r.extra)-1,w>>>=r.extra,E-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;C=(z=r.distcode[w&(1<<r.distbits)-1])>>>16&255,L=65535&z,!((R=z>>>24)<=E);){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}if(0==(240&C)){for(B=R,V=C,P=L;C=(z=r.distcode[P+((w&(1<<B+V)-1)>>B)])>>>16&255,L=65535&z,!(B+(R=z>>>24)<=E);){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}w>>>=B,E-=B,r.back+=B}if(w>>>=R,E-=R,r.back+=R,64&C){e.msg="invalid distance code",r.mode=p;break}r.offset=L,r.extra=15&C,r.mode=24;case 24:if(r.extra){for(j=r.extra;E<j;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}r.offset+=w&(1<<r.extra)-1,w>>>=r.extra,E-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=p;break}r.mode=25;case 25:if(0===x)break e;if(k=T-x,r.offset>k){if((k=r.offset-k)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=p;break}k>r.wnext?(k-=r.wnext,O=r.wsize-k):O=r.wnext-k,k>r.length&&(k=r.length),I=r.window}else I=m,O=b-r.offset,k=r.length;k>x&&(k=x),x-=k,r.length-=k;do{m[b++]=I[O++]}while(--k);0===r.length&&(r.mode=21);break;case 26:if(0===x)break e;m[b++]=r.length,x--,r.mode=21;break;case 27:if(r.wrap){for(;E<32;){if(0===v)break e;v--,w|=g[_++]<<E,E+=8}if(T-=x,e.total_out+=T,r.total+=T,T&&(e.adler=r.check=r.flags?o(r.check,m,T,b-T):i(r.check,m,T,b-T)),T=x,(r.flags?w:y(w))!==r.check){e.msg="incorrect data check",r.mode=p;break}w=0,E=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;E<32;){if(0===v)break e;v--,w+=g[_++]<<E,E+=8}if(w!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=p;break}w=0,E=0}r.mode=29;case 29:N=1;break e;case p:N=-3;break e;case 31:return-4;default:return f}return e.next_out=b,e.avail_out=x,e.next_in=_,e.avail_in=v,r.hold=w,r.bits=E,(r.wsize||T!==e.avail_out&&r.mode<p&&(r.mode<27||4!==t))&&M(e,e.output,e.next_out,T-e.avail_out)?(r.mode=31,-4):(A-=e.avail_in,T-=e.avail_out,e.total_in+=A,e.total_out+=T,r.total+=T,r.wrap&&T&&(e.adler=r.check=r.flags?o(r.check,m,T,e.next_out-T):i(r.check,m,T,e.next_out-T)),e.data_type=r.bits+(r.last?64:0)+(r.mode===d?128:0)+(20===r.mode||15===r.mode?256:0),(0===A&&0===T||4===t)&&N===c&&(N=-5),N)},t.inflateEnd=function(e){if(!e||!e.state)return f;var t=e.state;return t.window&&(t.window=null),e.state=null,c},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?f:(r.head=t,t.done=!1,c):f},t.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?f:11===r.mode&&i(1,t,n,0)!==r.check?-3:M(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,c):f},t.inflateInfo="pako inflate (from Nodeca project)"},9241:(e,t,r)=>{"use strict";var n=r(4236),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,l,u,c,f,h){var d,p,g,m,y,_,b,v,x,w=h.bits,E=0,A=0,T=0,S=0,M=0,k=0,O=0,I=0,R=0,C=0,L=null,B=0,V=new n.Buf16(16),P=new n.Buf16(16),U=null,N=0;for(E=0;E<=15;E++)V[E]=0;for(A=0;A<l;A++)V[t[r+A]]++;for(M=w,S=15;S>=1&&0===V[S];S--);if(M>S&&(M=S),0===S)return u[c++]=20971520,u[c++]=20971520,h.bits=1,0;for(T=1;T<S&&0===V[T];T++);for(M<T&&(M=T),I=1,E=1;E<=15;E++)if(I<<=1,(I-=V[E])<0)return-1;if(I>0&&(0===e||1!==S))return-1;for(P[1]=0,E=1;E<15;E++)P[E+1]=P[E]+V[E];for(A=0;A<l;A++)0!==t[r+A]&&(f[P[t[r+A]]++]=A);if(0===e?(L=U=f,_=19):1===e?(L=i,B-=257,U=o,N-=257,_=256):(L=a,U=s,_=-1),C=0,A=0,E=T,y=c,k=M,O=0,g=-1,m=(R=1<<M)-1,1===e&&R>852||2===e&&R>592)return 1;for(;;){b=E-O,f[A]<_?(v=0,x=f[A]):f[A]>_?(v=U[N+f[A]],x=L[B+f[A]]):(v=96,x=0),d=1<<E-O,T=p=1<<k;do{u[y+(C>>O)+(p-=d)]=b<<24|v<<16|x|0}while(0!==p);for(d=1<<E-1;C&d;)d>>=1;if(0!==d?(C&=d-1,C+=d):C=0,A++,0==--V[E]){if(E===S)break;E=t[r+f[A]]}if(E>M&&(C&m)!==g){for(0===O&&(O=M),y+=T,I=1<<(k=E-O);k+O<S&&!((I-=V[k+O])<=0);)k++,I<<=1;if(R+=1<<k,1===e&&R>852||2===e&&R>592)return 1;u[g=C&m]=M<<24|k<<16|y-c|0}}return 0!==C&&(u[y+C]=E-O<<24|64<<16|0),h.bits=M,0}},8898:e=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},342:(e,t,r)=>{"use strict";var n=r(4236);function i(e){for(var t=e.length;--t>=0;)e[t]=0}var o=0,a=256,s=a+1+29,l=30,u=19,c=2*s+1,f=15,h=16,d=256,p=16,g=17,m=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],_=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],v=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(2*(s+2));i(x);var w=new Array(2*l);i(w);var E=new Array(512);i(E);var A=new Array(256);i(A);var T=new Array(29);i(T);var S,M,k,O=new Array(l);function I(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function R(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function C(e){return e<256?E[e]:E[256+(e>>>7)]}function L(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function B(e,t,r){e.bi_valid>h-r?(e.bi_buf|=t<<e.bi_valid&65535,L(e,e.bi_buf),e.bi_buf=t>>h-e.bi_valid,e.bi_valid+=r-h):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function V(e,t,r){B(e,r[2*t],r[2*t+1])}function P(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function U(e,t,r){var n,i,o=new Array(f+1),a=0;for(n=1;n<=f;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=P(o[s]++,s))}}function N(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<l;t++)e.dyn_dtree[2*t]=0;for(t=0;t<u;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*d]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function F(e){e.bi_valid>8?L(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function j(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function z(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&j(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!j(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function D(e,t,r){var n,i,o,s,l=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===n?V(e,i,t):(V(e,(o=A[i])+a+1,t),0!==(s=y[o])&&B(e,i-=T[o],s),V(e,o=C(--n),r),0!==(s=_[o])&&B(e,n-=O[o],s))}while(l<e.last_lit);V(e,d,t)}function G(e,t){var r,n,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=c,r=0;r<l;r++)0!==o[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)z(e,o,r);i=l;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],z(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,z(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,o,a,s,l=t.dyn_tree,u=t.max_code,h=t.stat_desc.static_tree,d=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,m=t.stat_desc.max_length,y=0;for(o=0;o<=f;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<c;r++)(o=l[2*l[2*(n=e.heap[r])+1]+1]+1)>m&&(o=m,y++),l[2*n+1]=o,n>u||(e.bl_count[o]++,a=0,n>=g&&(a=p[n-g]),s=l[2*n],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(h[2*n+1]+a)));if(0!==y){do{for(o=m-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[m]--,y-=2}while(y>0);for(o=m;0!==o;o--)for(n=e.bl_count[o];0!==n;)(i=e.heap[--r])>u||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),n--)}}(e,t),U(o,u,e.bl_count)}function H(e,t,r){var n,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*p]++):s<=10?e.bl_tree[2*g]++:e.bl_tree[2*m]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))}function W(e,t,r){var n,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<l&&i===a)){if(s<u)do{V(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(V(e,i,e.bl_tree),s--),V(e,p,e.bl_tree),B(e,s-3,2)):s<=10?(V(e,g,e.bl_tree),B(e,s-3,3)):(V(e,m,e.bl_tree),B(e,s-11,7));s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4)}}i(O);var Z=!1;function q(e,t,r,i){B(e,(o<<1)+(i?1:0),3),function(e,t,r,i){F(e),L(e,r),L(e,~r),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r)}t._tr_init=function(e){Z||(function(){var e,t,r,n,i,o=new Array(f+1);for(r=0,n=0;n<28;n++)for(T[n]=r,e=0;e<1<<y[n];e++)A[r++]=n;for(A[r-1]=n,i=0,n=0;n<16;n++)for(O[n]=i,e=0;e<1<<_[n];e++)E[i++]=n;for(i>>=7;n<l;n++)for(O[n]=i<<7,e=0;e<1<<_[n]-7;e++)E[256+i++]=n;for(t=0;t<=f;t++)o[t]=0;for(e=0;e<=143;)x[2*e+1]=8,e++,o[8]++;for(;e<=255;)x[2*e+1]=9,e++,o[9]++;for(;e<=279;)x[2*e+1]=7,e++,o[7]++;for(;e<=287;)x[2*e+1]=8,e++,o[8]++;for(U(x,s+1,o),e=0;e<l;e++)w[2*e+1]=5,w[2*e]=P(e,5);S=new I(x,y,a+1,s,f),M=new I(w,_,0,l,f),k=new I(new Array(0),b,0,u,7)}(),Z=!0),e.l_desc=new R(e.dyn_ltree,S),e.d_desc=new R(e.dyn_dtree,M),e.bl_desc=new R(e.bl_tree,k),e.bi_buf=0,e.bi_valid=0,N(e)},t._tr_stored_block=q,t._tr_flush_block=function(e,t,r,n){var i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),G(e,e.l_desc),G(e,e.d_desc),s=function(e){var t;for(H(e,e.dyn_ltree,e.l_desc.max_code),H(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),t=u-1;t>=3&&0===e.bl_tree[2*v[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==t?q(e,t,r,n):4===e.strategy||o===i?(B(e,2+(n?1:0),3),D(e,x,w)):(B(e,4+(n?1:0),3),function(e,t,r,n){var i;for(B(e,t-257,5),B(e,r-1,5),B(e,n-4,4),i=0;i<n;i++)B(e,e.bl_tree[2*v[i]+1],3);W(e,e.dyn_ltree,t-1),W(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),D(e,e.dyn_ltree,e.dyn_dtree)),N(e),n&&F(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(A[r]+a+1)]++,e.dyn_dtree[2*C(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){B(e,2,3),V(e,d,x),function(e){16===e.bi_valid?(L(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},2292:e=>{"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},6470:(e,t,r)=>{"use strict";var n=r(4155);function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var r,n="",i=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):i=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),o=s,a=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=s,a=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(o+1,s):n=e.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var a={resolve:function(){for(var e,t="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var s;a>=0?s=arguments[a]:(void 0===e&&(e=n.cwd()),s=e),i(s),0!==s.length&&(t=s+"/"+t,r=47===s.charCodeAt(0))}return t=o(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=o(e,!t)).length||t||(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];i(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":a.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if((e=a.resolve(e))===(t=a.resolve(t)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var n=e.length,o=n-r,s=1;s<t.length&&47===t.charCodeAt(s);++s);for(var l=t.length-s,u=o<l?o:l,c=-1,f=0;f<=u;++f){if(f===u){if(l>u){if(47===t.charCodeAt(s+f))return t.slice(s+f+1);if(0===f)return t.slice(s+f)}else o>u&&(47===e.charCodeAt(r+f)?c=f:0===f&&(c=0));break}var h=e.charCodeAt(r+f);if(h!==t.charCodeAt(s+f))break;47===h&&(c=f)}var d="";for(f=r+c+1;f<=n;++f)f!==n&&47!==e.charCodeAt(f)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(s+c):(s+=c,47===t.charCodeAt(s)&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"//":e.slice(0,n)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');i(e);var r,n=0,o=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,l=-1;for(r=e.length-1;r>=0;--r){var u=e.charCodeAt(r);if(47===u){if(!a){n=r+1;break}}else-1===l&&(a=!1,l=r+1),s>=0&&(u===t.charCodeAt(s)?-1==--s&&(o=r):(s=-1,o=l))}return n===o?o=l:-1===o&&(o=e.length),e.slice(n,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!a){n=r+1;break}}else-1===o&&(a=!1,o=r+1);return-1===o?"":e.slice(n,o)},extname:function(e){i(e);for(var t=-1,r=0,n=-1,o=!0,a=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47!==l)-1===n&&(o=!1,n=s+1),46===l?-1===t?t=s:1!==a&&(a=1):-1!==t&&(a=-1);else if(!o){r=s+1;break}}return-1===t||-1===n||0===a||1===a&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var r,n=e.charCodeAt(0),o=47===n;o?(t.root="/",r=1):r=0;for(var a=-1,s=0,l=-1,u=!0,c=e.length-1,f=0;c>=r;--c)if(47!==(n=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===n?-1===a?a=c:1!==f&&(f=1):-1!==a&&(f=-1);else if(!u){s=c+1;break}return-1===a||-1===l||0===f||1===f&&a===l-1&&a===s+1?-1!==l&&(t.base=t.name=0===s&&o?e.slice(1,l):e.slice(s,l)):(0===s&&o?(t.name=e.slice(1,a),t.base=e.slice(1,l)):(t.name=e.slice(s,a),t.base=e.slice(s,l)),t.ext=e.slice(a,l)),s>0?t.dir=e.slice(0,s-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,e.exports=a},9983:(e,t,r)=>{"use strict";var n=r(3085).lW;let i=r(7084),o=[function(){},function(e,t,r,n){if(n===t.length)throw new Error("Ran out of data");let i=t[n];e[r]=i,e[r+1]=i,e[r+2]=i,e[r+3]=255},function(e,t,r,n){if(n+1>=t.length)throw new Error("Ran out of data");let i=t[n];e[r]=i,e[r+1]=i,e[r+2]=i,e[r+3]=t[n+1]},function(e,t,r,n){if(n+2>=t.length)throw new Error("Ran out of data");e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2],e[r+3]=255},function(e,t,r,n){if(n+3>=t.length)throw new Error("Ran out of data");e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2],e[r+3]=t[n+3]}],a=[function(){},function(e,t,r,n){let i=t[0];e[r]=i,e[r+1]=i,e[r+2]=i,e[r+3]=n},function(e,t,r){let n=t[0];e[r]=n,e[r+1]=n,e[r+2]=n,e[r+3]=t[1]},function(e,t,r,n){e[r]=t[0],e[r+1]=t[1],e[r+2]=t[2],e[r+3]=n},function(e,t,r){e[r]=t[0],e[r+1]=t[1],e[r+2]=t[2],e[r+3]=t[3]}];function s(e,t,r,n,i,a){let s=e.width,l=e.height,u=e.index;for(let e=0;e<l;e++)for(let l=0;l<s;l++){let s=r(l,e,u);o[n](t,i,s,a),a+=n}return a}function l(e,t,r,n,i,o){let s=e.width,l=e.height,u=e.index;for(let e=0;e<l;e++){for(let l=0;l<s;l++){let s=i.get(n),c=r(l,e,u);a[n](t,s,c,o)}i.resetAfterLine()}}t.dataToBitMap=function(e,t){let r,o,a=t.width,u=t.height,c=t.depth,f=t.bpp,h=t.interlace;8!==c&&(r=function(e,t){let r=[],n=0;function i(){if(n===e.length)throw new Error("Ran out of data");let i,o,a,s,l,u,c,f,h=e[n];switch(n++,t){default:throw new Error("unrecognised depth");case 16:c=e[n],n++,r.push((h<<8)+c);break;case 4:c=15&h,f=h>>4,r.push(f,c);break;case 2:l=3&h,u=h>>2&3,c=h>>4&3,f=h>>6&3,r.push(f,c,u,l);break;case 1:i=1&h,o=h>>1&1,a=h>>2&1,s=h>>3&1,l=h>>4&1,u=h>>5&1,c=h>>6&1,f=h>>7&1,r.push(f,c,u,l,s,a,o,i)}}return{get:function(e){for(;r.length<e;)i();let t=r.slice(0,e);return r=r.slice(e),t},resetAfterLine:function(){r.length=0},end:function(){if(n!==e.length)throw new Error("extra data found")}}}(e,c)),o=c<=8?n.alloc(a*u*4):new Uint16Array(a*u*4);let d,p,g=Math.pow(2,c)-1,m=0;if(h)d=i.getImagePasses(a,u),p=i.getInterlaceIterator(a,u);else{let e=0;p=function(){let t=e;return e+=4,t},d=[{width:a,height:u}]}for(let t=0;t<d.length;t++)8===c?m=s(d[t],o,p,f,e,m):l(d[t],o,p,f,r,g);if(8===c){if(m!==e.length)throw new Error("extra data found")}else r.end();return o}},9027:(e,t,r)=>{"use strict";var n=r(3085).lW;let i=r(3482);e.exports=function(e,t,r,o){let a=-1!==[i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(o.colorType);if(o.colorType===o.inputColorType){let t=function(){let e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256!==new Int16Array(e)[0]}();if(8===o.bitDepth||16===o.bitDepth&&t)return e}let s=16!==o.bitDepth?e:new Uint16Array(e.buffer),l=255,u=i.COLORTYPE_TO_BPP_MAP[o.inputColorType];4!==u||o.inputHasAlpha||(u=3);let c=i.COLORTYPE_TO_BPP_MAP[o.colorType];16===o.bitDepth&&(l=65535,c*=2);let f=n.alloc(t*r*c),h=0,d=0,p=o.bgColor||{};function g(){let e,t,r,n=l;switch(o.inputColorType){case i.COLORTYPE_COLOR_ALPHA:n=s[h+3],e=s[h],t=s[h+1],r=s[h+2];break;case i.COLORTYPE_COLOR:e=s[h],t=s[h+1],r=s[h+2];break;case i.COLORTYPE_ALPHA:n=s[h+1],e=s[h],t=e,r=e;break;case i.COLORTYPE_GRAYSCALE:e=s[h],t=e,r=e;break;default:throw new Error("input color type:"+o.inputColorType+" is not supported at present")}return o.inputHasAlpha&&(a||(n/=l,e=Math.min(Math.max(Math.round((1-n)*p.red+n*e),0),l),t=Math.min(Math.max(Math.round((1-n)*p.green+n*t),0),l),r=Math.min(Math.max(Math.round((1-n)*p.blue+n*r),0),l))),{red:e,green:t,blue:r,alpha:n}}void 0===p.red&&(p.red=l),void 0===p.green&&(p.green=l),void 0===p.blue&&(p.blue=l);for(let e=0;e<r;e++)for(let e=0;e<t;e++){let e=g();switch(o.colorType){case i.COLORTYPE_COLOR_ALPHA:case i.COLORTYPE_COLOR:8===o.bitDepth?(f[d]=e.red,f[d+1]=e.green,f[d+2]=e.blue,a&&(f[d+3]=e.alpha)):(f.writeUInt16BE(e.red,d),f.writeUInt16BE(e.green,d+2),f.writeUInt16BE(e.blue,d+4),a&&f.writeUInt16BE(e.alpha,d+6));break;case i.COLORTYPE_ALPHA:case i.COLORTYPE_GRAYSCALE:{let t=(e.red+e.green+e.blue)/3;8===o.bitDepth?(f[d]=t,a&&(f[d+1]=e.alpha)):(f.writeUInt16BE(t,d),a&&f.writeUInt16BE(e.alpha,d+2));break}default:throw new Error("unrecognised color Type "+o.colorType)}h+=u,d+=c}return f}},8442:(e,t,r)=>{"use strict";var n=r(4155),i=r(3085).lW;let o=r(9539),a=r(8338),s=e.exports=function(){a.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};o.inherits(s,a),s.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),n.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},s.prototype.write=function(e,t){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let r;return r=i.isBuffer(e)?e:i.from(e,t||this._encoding),this._buffers.push(r),this._buffered+=r.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused},s.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},s.prototype.destroySoon=s.prototype.end,s.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()},s.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},s.prototype._processReadAllowingLess=function(e){this._reads.shift();let t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))},s.prototype._processRead=function(e){this._reads.shift();let t=0,r=0,n=i.alloc(e.length);for(;t<e.length;){let i=this._buffers[r++],o=Math.min(i.length,e.length-t);i.copy(n,t,0,o),t+=o,o!==i.length&&(this._buffers[--r]=i.slice(o))}r>0&&this._buffers.splice(0,r),this._buffered-=e.length,e.func.call(this,n)},s.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else{if(!(this._buffered>=e.length))break;this._processRead(e)}}this._buffers&&!this.writable&&this._end()}catch(e){this.emit("error",e)}}},3482:e=>{"use strict";e.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},3500:e=>{"use strict";let t=[];!function(){for(let e=0;e<256;e++){let r=e;for(let e=0;e<8;e++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r}}();let r=e.exports=function(){this._crc=-1};r.prototype.write=function(e){for(let r=0;r<e.length;r++)this._crc=t[255&(this._crc^e[r])]^this._crc>>>8;return!0},r.prototype.crc32=function(){return-1^this._crc},r.crc32=function(e){let r=-1;for(let n=0;n<e.length;n++)r=t[255&(r^e[n])]^r>>>8;return-1^r}},8876:(e,t,r)=>{"use strict";var n=r(3085).lW;let i=r(6744),o={0:function(e,t,r,n,i){for(let o=0;o<r;o++)n[i+o]=e[t+o]},1:function(e,t,r,n,i,o){for(let a=0;a<r;a++){let r=a>=o?e[t+a-o]:0,s=e[t+a]-r;n[i+a]=s}},2:function(e,t,r,n,i){for(let o=0;o<r;o++){let a=t>0?e[t+o-r]:0,s=e[t+o]-a;n[i+o]=s}},3:function(e,t,r,n,i,o){for(let a=0;a<r;a++){let s=a>=o?e[t+a-o]:0,l=t>0?e[t+a-r]:0,u=e[t+a]-(s+l>>1);n[i+a]=u}},4:function(e,t,r,n,o,a){for(let s=0;s<r;s++){let l=s>=a?e[t+s-a]:0,u=t>0?e[t+s-r]:0,c=t>0&&s>=a?e[t+s-(r+a)]:0,f=e[t+s]-i(l,u,c);n[o+s]=f}}},a={0:function(e,t,r){let n=0,i=t+r;for(let r=t;r<i;r++)n+=Math.abs(e[r]);return n},1:function(e,t,r,n){let i=0;for(let o=0;o<r;o++){let r=o>=n?e[t+o-n]:0,a=e[t+o]-r;i+=Math.abs(a)}return i},2:function(e,t,r){let n=0,i=t+r;for(let o=t;o<i;o++){let i=t>0?e[o-r]:0,a=e[o]-i;n+=Math.abs(a)}return n},3:function(e,t,r,n){let i=0;for(let o=0;o<r;o++){let a=o>=n?e[t+o-n]:0,s=t>0?e[t+o-r]:0,l=e[t+o]-(a+s>>1);i+=Math.abs(l)}return i},4:function(e,t,r,n){let o=0;for(let a=0;a<r;a++){let s=a>=n?e[t+a-n]:0,l=t>0?e[t+a-r]:0,u=t>0&&a>=n?e[t+a-(r+n)]:0,c=e[t+a]-i(s,l,u);o+=Math.abs(c)}return o}};e.exports=function(e,t,r,i,s){let l;if("filterType"in i&&-1!==i.filterType){if("number"!=typeof i.filterType)throw new Error("unrecognised filter types");l=[i.filterType]}else l=[0,1,2,3,4];16===i.bitDepth&&(s*=2);let u=t*s,c=0,f=0,h=n.alloc((u+1)*r),d=l[0];for(let t=0;t<r;t++){if(l.length>1){let t=1/0;for(let r=0;r<l.length;r++){let n=a[l[r]](e,f,u,s);n<t&&(d=l[r],t=n)}}h[c]=d,c++,o[d](e,f,u,h,c,s),c+=u,f+=u}return h}},4603:(e,t,r)=>{"use strict";var n=r(3085).lW;let i=r(9539),o=r(8442),a=r(2769),s=e.exports=function(e){o.call(this);let t=[],r=this;this._filter=new a(e,{read:this.read.bind(this),write:function(e){t.push(e)},complete:function(){r.emit("complete",n.concat(t))}}),this._filter.start()};i.inherits(s,o)},8692:(e,t,r)=>{"use strict";var n=r(3085).lW;let i=r(33),o=r(2769);t.process=function(e,t){let r=[],a=new i(e);return new o(t,{read:a.read.bind(a),write:function(e){r.push(e)},complete:function(){}}).start(),a.process(),n.concat(r)}},2769:(e,t,r)=>{"use strict";var n=r(3085).lW;let i=r(7084),o=r(6744);function a(e,t,r){let n=e*t;return 8!==r&&(n=Math.ceil(n/(8/r))),n}let s=e.exports=function(e,t){let r=e.width,n=e.height,o=e.interlace,s=e.bpp,l=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],o){let e=i.getImagePasses(r,n);for(let t=0;t<e.length;t++)this._images.push({byteWidth:a(e[t].width,s,l),height:e[t].height,lineIndex:0})}else this._images.push({byteWidth:a(r,s,l),height:n,lineIndex:0});this._xComparison=8===l?s:16===l?2*s:1};s.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},s.prototype._unFilterType1=function(e,t,r){let n=this._xComparison,i=n-1;for(let o=0;o<r;o++){let r=e[1+o],a=o>i?t[o-n]:0;t[o]=r+a}},s.prototype._unFilterType2=function(e,t,r){let n=this._lastLine;for(let i=0;i<r;i++){let r=e[1+i],o=n?n[i]:0;t[i]=r+o}},s.prototype._unFilterType3=function(e,t,r){let n=this._xComparison,i=n-1,o=this._lastLine;for(let a=0;a<r;a++){let r=e[1+a],s=o?o[a]:0,l=a>i?t[a-n]:0,u=Math.floor((l+s)/2);t[a]=r+u}},s.prototype._unFilterType4=function(e,t,r){let n=this._xComparison,i=n-1,a=this._lastLine;for(let s=0;s<r;s++){let r=e[1+s],l=a?a[s]:0,u=s>i?t[s-n]:0,c=s>i&&a?a[s-n]:0,f=o(u,l,c);t[s]=r+f}},s.prototype._reverseFilterLine=function(e){let t,r=e[0],i=this._images[this._imageIndex],o=i.byteWidth;if(0===r)t=e.slice(1,o+1);else switch(t=n.alloc(o),r){case 1:this._unFilterType1(e,t,o);break;case 2:this._unFilterType2(e,t,o);break;case 3:this._unFilterType3(e,t,o);break;case 4:this._unFilterType4(e,t,o);break;default:throw new Error("Unrecognised filter type - "+r)}this.write(t),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=t,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}},8417:(e,t,r)=>{"use strict";var n=r(3085).lW;e.exports=function(e,t,r=!1){let i=t.depth,o=t.width,a=t.height,s=t.colorType,l=t.transColor,u=t.palette,c=e;return 3===s?function(e,t,r,n,i){let o=0;for(let a=0;a<n;a++)for(let n=0;n<r;n++){let r=i[e[o]];if(!r)throw new Error("index "+e[o]+" not in palette");for(let e=0;e<4;e++)t[o+e]=r[e];o+=4}}(e,c,o,a,u):(l&&function(e,t,r,n,i){let o=0;for(let a=0;a<n;a++)for(let n=0;n<r;n++){let r=!1;if(1===i.length?i[0]===e[o]&&(r=!0):i[0]===e[o]&&i[1]===e[o+1]&&i[2]===e[o+2]&&(r=!0),r)for(let e=0;e<4;e++)t[o+e]=0;o+=4}}(e,c,o,a,l),8===i||r||(16===i&&(c=n.alloc(o*a*4)),function(e,t,r,n,i){let o=Math.pow(2,i)-1,a=0;for(let i=0;i<n;i++)for(let n=0;n<r;n++){for(let r=0;r<4;r++)t[a+r]=Math.floor(255*e[a+r]/o+.5);a+=4}}(e,c,o,a,i))),c}},7084:(e,t)=>{"use strict";let r=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];t.getImagePasses=function(e,t){let n=[],i=e%8,o=t%8,a=(e-i)/8,s=(t-o)/8;for(let e=0;e<r.length;e++){let t=r[e],l=a*t.x.length,u=s*t.y.length;for(let e=0;e<t.x.length&&t.x[e]<i;e++)l++;for(let e=0;e<t.y.length&&t.y[e]<o;e++)u++;l>0&&u>0&&n.push({width:l,height:u,index:e})}return n},t.getInterlaceIterator=function(e){return function(t,n,i){let o=t%r[i].x.length,a=(t-o)/r[i].x.length*8+r[i].x[o],s=n%r[i].y.length;return 4*a+((n-s)/r[i].y.length*8+r[i].y[s])*e*4}}},6838:(e,t,r)=>{"use strict";var n=r(3085).lW;let i=r(9539),o=r(8338),a=r(3482),s=r(9432),l=e.exports=function(e){o.call(this);let t=e||{};this._packer=new s(t),this._deflate=this._packer.createDeflate(),this.readable=!0};i.inherits(l,o),l.prototype.pack=function(e,t,r,i){this.emit("data",n.from(a.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,r)),i&&this.emit("data",this._packer.packGAMA(i));let o=this._packer.filterData(e,t,r);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(e){this.emit("data",this._packer.packIDAT(e))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(o)}},8360:(e,t,r)=>{"use strict";var n=r(3085).lW;let i=!0,o=r(2635);o.deflateSync||(i=!1);let a=r(3482),s=r(9432);e.exports=function(e,t){if(!i)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let r=new s(t||{}),l=[];l.push(n.from(a.PNG_SIGNATURE)),l.push(r.packIHDR(e.width,e.height)),e.gamma&&l.push(r.packGAMA(e.gamma));let u=r.filterData(e.data,e.width,e.height),c=o.deflateSync(u,r.getDeflateOptions());if(u=null,!c||!c.length)throw new Error("bad png - invalid compressed data response");return l.push(r.packIDAT(c)),l.push(r.packIEND()),n.concat(l)}},9432:(e,t,r)=>{"use strict";var n=r(3085).lW;let i=r(3482),o=r(3500),a=r(9027),s=r(8876),l=r(2635),u=e.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32768,e.deflateLevel=null!=e.deflateLevel?e.deflateLevel:9,e.deflateStrategy=null!=e.deflateStrategy?e.deflateStrategy:3,e.inputHasAlpha=null==e.inputHasAlpha||e.inputHasAlpha,e.deflateFactory=e.deflateFactory||l.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType="number"==typeof e.colorType?e.colorType:i.COLORTYPE_COLOR_ALPHA,e.inputColorType="number"==typeof e.inputColorType?e.inputColorType:i.COLORTYPE_COLOR_ALPHA,-1===[i.COLORTYPE_GRAYSCALE,i.COLORTYPE_COLOR,i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(e.colorType))throw new Error("option color type:"+e.colorType+" is not supported at present");if(-1===[i.COLORTYPE_GRAYSCALE,i.COLORTYPE_COLOR,i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(e.inputColorType))throw new Error("option input color type:"+e.inputColorType+" is not supported at present");if(8!==e.bitDepth&&16!==e.bitDepth)throw new Error("option bit depth:"+e.bitDepth+" is not supported at present")};u.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},u.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},u.prototype.filterData=function(e,t,r){let n=a(e,t,r,this._options),o=i.COLORTYPE_TO_BPP_MAP[this._options.colorType];return s(n,t,r,this._options,o)},u.prototype._packChunk=function(e,t){let r=t?t.length:0,i=n.alloc(r+12);return i.writeUInt32BE(r,0),i.writeUInt32BE(e,4),t&&t.copy(i,8),i.writeInt32BE(o.crc32(i.slice(4,i.length-4)),i.length-4),i},u.prototype.packGAMA=function(e){let t=n.alloc(4);return t.writeUInt32BE(Math.floor(e*i.GAMMA_DIVISION),0),this._packChunk(i.TYPE_gAMA,t)},u.prototype.packIHDR=function(e,t){let r=n.alloc(13);return r.writeUInt32BE(e,0),r.writeUInt32BE(t,4),r[8]=this._options.bitDepth,r[9]=this._options.colorType,r[10]=0,r[11]=0,r[12]=0,this._packChunk(i.TYPE_IHDR,r)},u.prototype.packIDAT=function(e){return this._packChunk(i.TYPE_IDAT,e)},u.prototype.packIEND=function(){return this._packChunk(i.TYPE_IEND,null)}},6744:e=>{"use strict";e.exports=function(e,t,r){let n=e+t-r,i=Math.abs(n-e),o=Math.abs(n-t),a=Math.abs(n-r);return i<=o&&i<=a?e:o<=a?t:r}},7900:(e,t,r)=>{"use strict";let n=r(9539),i=r(2635),o=r(8442),a=r(4603),s=r(8550),l=r(9983),u=r(8417),c=e.exports=function(e){o.call(this),this._parser=new s(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};n.inherits(c,o),c.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",(function(){}))),this.errord=!0},c.prototype._inflateData=function(e){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=i.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let e=(1+(this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3))*this._bitmapInfo.height,t=Math.max(e,i.Z_MIN_CHUNK);this._inflate=i.createInflate({chunkSize:t});let r=e,n=this.emit.bind(this,"error");this._inflate.on("error",(function(e){r&&n(e)})),this._filter.on("complete",this._complete.bind(this));let o=this._filter.write.bind(this._filter);this._inflate.on("data",(function(e){r&&(e.length>r&&(e=e.slice(0,r)),r-=e.length,o(e))})),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(e)},c.prototype._handleMetaData=function(e){this._metaData=e,this._bitmapInfo=Object.create(e),this._filter=new a(this._bitmapInfo)},c.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e},c.prototype._handlePalette=function(e){this._bitmapInfo.palette=e},c.prototype._simpleTransparency=function(){this._metaData.alpha=!0},c.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},c.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))},c.prototype._complete=function(e){if(this.errord)return;let t;try{let r=l.dataToBitMap(e,this._bitmapInfo);t=u(r,this._bitmapInfo,this._options.skipRescale),r=null}catch(e){return void this._handleError(e)}this.emit("parsed",t)}},2416:(e,t,r)=>{"use strict";var n=r(3085).lW;let i=!0,o=r(2635),a=r(9653);o.deflateSync||(i=!1);let s=r(33),l=r(8692),u=r(8550),c=r(9983),f=r(8417);e.exports=function(e,t){if(!i)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let r,h,d,p=[],g=new s(e),m=new u(t,{read:g.read.bind(g),error:function(e){r=e},metadata:function(e){h=e},gamma:function(e){d=e},palette:function(e){h.palette=e},transColor:function(e){h.transColor=e},inflateData:function(e){p.push(e)},simpleTransparency:function(){h.alpha=!0}});if(m.start(),g.process(),r)throw r;let y,_=n.concat(p);if(p.length=0,h.interlace)y=o.inflateSync(_);else{let e=(1+(h.width*h.bpp*h.depth+7>>3))*h.height;y=a(_,{chunkSize:e,maxLength:e})}if(_=null,!y||!y.length)throw new Error("bad png - invalid inflate data response");let b=l.process(y,h);_=null;let v=c.dataToBitMap(b,h);b=null;let x=f(v,h,t.skipRescale);return h.data=x,h.gamma=d||0,h}},8550:(e,t,r)=>{"use strict";var n=r(3085).lW;let i=r(3482),o=r(3500),a=e.exports=function(e,t){this._options=e,e.checkCRC=!1!==e.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[i.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[i.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[i.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[i.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[i.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[i.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.finished=t.finished,this.simpleTransparency=t.simpleTransparency,this.headersFinished=t.headersFinished||function(){}};a.prototype.start=function(){this.read(i.PNG_SIGNATURE.length,this._parseSignature.bind(this))},a.prototype._parseSignature=function(e){let t=i.PNG_SIGNATURE;for(let r=0;r<t.length;r++)if(e[r]!==t[r])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},a.prototype._parseChunkBegin=function(e){let t=e.readUInt32BE(0),r=e.readUInt32BE(4),a="";for(let t=4;t<8;t++)a+=String.fromCharCode(e[t]);let s=Boolean(32&e[4]);if(this._hasIHDR||r===i.TYPE_IHDR){if(this._crc=new o,this._crc.write(n.from(a)),this._chunks[r])return this._chunks[r](t);s?this.read(t+4,this._skipChunk.bind(this)):this.error(new Error("Unsupported critical chunk type "+a))}else this.error(new Error("Expected IHDR on beggining"))},a.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},a.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},a.prototype._parseChunkEnd=function(e){let t=e.readInt32BE(0),r=this._crc.crc32();this._options.checkCRC&&r!==t?this.error(new Error("Crc error - "+t+" - "+r)):this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},a.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))},a.prototype._parseIHDR=function(e){this._crc.write(e);let t=e.readUInt32BE(0),r=e.readUInt32BE(4),n=e[8],o=e[9],a=e[10],s=e[11],l=e[12];if(8!==n&&4!==n&&2!==n&&1!==n&&16!==n)return void this.error(new Error("Unsupported bit depth "+n));if(!(o in i.COLORTYPE_TO_BPP_MAP))return void this.error(new Error("Unsupported color type"));if(0!==a)return void this.error(new Error("Unsupported compression method"));if(0!==s)return void this.error(new Error("Unsupported filter method"));if(0!==l&&1!==l)return void this.error(new Error("Unsupported interlace method"));this._colorType=o;let u=i.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:r,depth:n,interlace:Boolean(l),palette:Boolean(o&i.COLORTYPE_PALETTE),color:Boolean(o&i.COLORTYPE_COLOR),alpha:Boolean(o&i.COLORTYPE_ALPHA),bpp:u,colorType:o}),this._handleChunkEnd()},a.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))},a.prototype._parsePLTE=function(e){this._crc.write(e);let t=Math.floor(e.length/3);for(let r=0;r<t;r++)this._palette.push([e[3*r],e[3*r+1],e[3*r+2],255]);this.palette(this._palette),this._handleChunkEnd()},a.prototype._handleTRNS=function(e){this.simpleTransparency(),this.read(e,this._parseTRNS.bind(this))},a.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===i.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length)return void this.error(new Error("Transparency chunk must be after palette"));if(e.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(let t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===i.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===i.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()},a.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))},a.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/i.GAMMA_DIVISION),this._handleChunkEnd()},a.prototype._handleIDAT=function(e){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-e,this._parseIDAT.bind(this,e))},a.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===i.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw new Error("Expected palette not found");this.inflateData(t);let r=e-t.length;r>0?this._handleIDAT(r):this._handleChunkEnd()},a.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))},a.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}},6117:(e,t,r)=>{"use strict";let n=r(2416),i=r(8360);t.read=function(e,t){return n(e,t||{})},t.write=function(e,t){return i(e,t)}},5477:(e,t,r)=>{"use strict";var n=r(3085).lW,i=r(4155);let o=r(9539),a=r(8338),s=r(7900),l=r(6838),u=r(6117),c=t.PNG=function(e){a.call(this),e=e||{},this.width=0|e.width,this.height=0|e.height,this.data=this.width>0&&this.height>0?n.alloc(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new s(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new l(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};o.inherits(c,a),c.sync=u,c.prototype.pack=function(){return this.data&&this.data.length?(i.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this):(this.emit("error","No data provided"),this)},c.prototype.parse=function(e,t){if(t){let e,r;e=function(e){this.removeListener("error",r),this.data=e,t(null,this)}.bind(this),r=function(r){this.removeListener("parsed",e),t(r,null)}.bind(this),this.once("parsed",e),this.once("error",r)}return this.end(e),this},c.prototype.write=function(e){return this._parser.write(e),!0},c.prototype.end=function(e){this._parser.end(e)},c.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)},c.prototype._gamma=function(e){this.gamma=e},c.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},c.bitblt=function(e,t,r,n,i,o,a,s){if(n|=0,i|=0,o|=0,a|=0,s|=0,(r|=0)>e.width||n>e.height||r+i>e.width||n+o>e.height)throw new Error("bitblt reading outside image");if(a>t.width||s>t.height||a+i>t.width||s+o>t.height)throw new Error("bitblt writing outside image");for(let l=0;l<o;l++)e.data.copy(t.data,(s+l)*t.width+a<<2,(n+l)*e.width+r<<2,(n+l)*e.width+r+i<<2)},c.prototype.bitblt=function(e,t,r,n,i,o,a){return c.bitblt(this,e,t,r,n,i,o,a),this},c.adjustGamma=function(e){if(e.gamma){for(let t=0;t<e.height;t++)for(let r=0;r<e.width;r++){let n=e.width*t+r<<2;for(let t=0;t<3;t++){let r=e.data[n+t]/255;r=Math.pow(r,1/2.2/e.gamma),e.data[n+t]=Math.round(255*r)}}e.gamma=0}},c.prototype.adjustGamma=function(){c.adjustGamma(this)}},9653:(e,t,r)=>{"use strict";var n=r(4155),i=r(3085).lW;let o=r(9282).ok,a=r(2635),s=r(9539),l=r(8764).kMaxLength;function u(e){if(!(this instanceof u))return new u(e);e&&e.chunkSize<a.Z_MIN_CHUNK&&(e.chunkSize=a.Z_MIN_CHUNK),a.Inflate.call(this,e),this._offset=void 0===this._offset?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,e&&null!=e.maxLength&&(this._maxLength=e.maxLength)}function c(e,t){t&&n.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function f(e,t){return function(e,t){if("string"==typeof t&&(t=i.from(t)),!(t instanceof i))throw new TypeError("Not a string or buffer");let r=e._finishFlushFlag;return null==r&&(r=a.Z_FINISH),e._processChunk(t,r)}(new u(t),e)}u.prototype._processChunk=function(e,t,r){if("function"==typeof r)return a.Inflate._processChunk.call(this,e,t,r);let n,s,u=this,f=e&&e.length,h=this._chunkSize-this._offset,d=this._maxLength,p=0,g=[],m=0;function y(e,t){if(u._hadError)return;let r=h-t;if(o(r>=0,"have should not go down"),r>0){let e=u._buffer.slice(u._offset,u._offset+r);if(u._offset+=r,e.length>d&&(e=e.slice(0,d)),g.push(e),m+=e.length,d-=e.length,0===d)return!1}return(0===t||u._offset>=u._chunkSize)&&(h=u._chunkSize,u._offset=0,u._buffer=i.allocUnsafe(u._chunkSize)),0===t&&(p+=f-e,f=e,!0)}this.on("error",(function(e){n=e})),o(this._handle,"zlib binding closed");do{s=this._handle.writeSync(t,e,p,f,this._buffer,this._offset,h),s=s||this._writeState}while(!this._hadError&&y(s[0],s[1]));if(this._hadError)throw n;if(m>=l)throw c(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes");let _=i.concat(g,m);return c(this),_},s.inherits(u,a.Inflate),e.exports=t=f,t.Inflate=u,t.createInflate=function(e){return new u(e)},t.inflateSync=f},33:e=>{"use strict";let t=e.exports=function(e){this._buffer=e,this._reads=[]};t.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})},t.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let e=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=e.length||e.allowLess))break;{this._reads.shift();let t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}}if(this._reads.length>0)throw new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)throw new Error("unrecognised content at end of stream")}},4155:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,l=[],u=!1,c=-1;function f(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length&&h())}function h(){if(!u){var e=a(f);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||u||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},9464:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nuniform sampler2D u_texture;\r\nuniform float u_atlasSize;\r\nuniform bool u_nightVision;\r\n\r\nvarying float v_lighting;\r\nvarying vec4 v_occlusion;\r\nvarying vec2 v_texcoord;\r\nvarying vec2 v_blockTexcoord;\r\nvarying float v_blockLighting;\r\n\r\nfloat dither8x8(vec2 position, float alpha) {\r\n  int x = int(mod(position.x, 8.0));\r\n  int y = int(mod(position.y, 8.0));\r\n  int index = x + y * 8;\r\n  float limit = 0.0;\r\n\r\n  if (x < 8) {\r\n    if (index == 0) limit = 0.015625;\r\n    if (index == 1) limit = 0.515625;\r\n    if (index == 2) limit = 0.140625;\r\n    if (index == 3) limit = 0.640625;\r\n    if (index == 4) limit = 0.046875;\r\n    if (index == 5) limit = 0.546875;\r\n    if (index == 6) limit = 0.171875;\r\n    if (index == 7) limit = 0.671875;\r\n    if (index == 8) limit = 0.765625;\r\n    if (index == 9) limit = 0.265625;\r\n    if (index == 10) limit = 0.890625;\r\n    if (index == 11) limit = 0.390625;\r\n    if (index == 12) limit = 0.796875;\r\n    if (index == 13) limit = 0.296875;\r\n    if (index == 14) limit = 0.921875;\r\n    if (index == 15) limit = 0.421875;\r\n    if (index == 16) limit = 0.203125;\r\n    if (index == 17) limit = 0.703125;\r\n    if (index == 18) limit = 0.078125;\r\n    if (index == 19) limit = 0.578125;\r\n    if (index == 20) limit = 0.234375;\r\n    if (index == 21) limit = 0.734375;\r\n    if (index == 22) limit = 0.109375;\r\n    if (index == 23) limit = 0.609375;\r\n    if (index == 24) limit = 0.953125;\r\n    if (index == 25) limit = 0.453125;\r\n    if (index == 26) limit = 0.828125;\r\n    if (index == 27) limit = 0.328125;\r\n    if (index == 28) limit = 0.984375;\r\n    if (index == 29) limit = 0.484375;\r\n    if (index == 30) limit = 0.859375;\r\n    if (index == 31) limit = 0.359375;\r\n    if (index == 32) limit = 0.0625;\r\n    if (index == 33) limit = 0.5625;\r\n    if (index == 34) limit = 0.1875;\r\n    if (index == 35) limit = 0.6875;\r\n    if (index == 36) limit = 0.03125;\r\n    if (index == 37) limit = 0.53125;\r\n    if (index == 38) limit = 0.15625;\r\n    if (index == 39) limit = 0.65625;\r\n    if (index == 40) limit = 0.8125;\r\n    if (index == 41) limit = 0.3125;\r\n    if (index == 42) limit = 0.9375;\r\n    if (index == 43) limit = 0.4375;\r\n    if (index == 44) limit = 0.78125;\r\n    if (index == 45) limit = 0.28125;\r\n    if (index == 46) limit = 0.90625;\r\n    if (index == 47) limit = 0.40625;\r\n    if (index == 48) limit = 0.25;\r\n    if (index == 49) limit = 0.75;\r\n    if (index == 50) limit = 0.125;\r\n    if (index == 51) limit = 0.625;\r\n    if (index == 52) limit = 0.21875;\r\n    if (index == 53) limit = 0.71875;\r\n    if (index == 54) limit = 0.09375;\r\n    if (index == 55) limit = 0.59375;\r\n    if (index == 56) limit = 0.9999;\r\n    if (index == 57) limit = 0.5;\r\n    if (index == 58) limit = 0.875;\r\n    if (index == 59) limit = 0.375;\r\n    if (index == 60) limit = 0.96875;\r\n    if (index == 61) limit = 0.46875;\r\n    if (index == 62) limit = 0.84375;\r\n    if (index == 63) limit = 0.34375;\r\n  }\r\n\r\n  return alpha < limit ? 0.0 : 1.0;\r\n}\r\n\r\nvoid main() {\r\n  float u = v_texcoord.x;\r\n  float v = v_texcoord.y;\r\n\r\n  float a = v_occlusion.x;\r\n  float b = v_occlusion.y;\r\n  float c = v_occlusion.z;\r\n  float d = v_occlusion.w;\r\n  float g = v*(u*b + (1.0-u)*d) + (1.0-v)*(u*a + (1.0-u)*c);\r\n\r\n  vec2 tex = v_blockTexcoord + (v_texcoord / (u_atlasSize * 3.0));\r\n  vec4 diffuse = texture2D(u_texture, tex).rgba;\r\n\r\n  float alpha = dither8x8(gl_FragCoord.xy, diffuse.a);\r\n  if (alpha < 0.5)\r\n  {\r\n    discard;\r\n  }\r\n\r\n  gl_FragColor = vec4(diffuse.rgb * v_lighting * g * (u_nightVision ? 1.0 : v_blockLighting), 1.0);\r\n}\r\n"},5697:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nuniform mat4 u_worldViewProjection;\r\nuniform sampler2D u_texture;\r\nuniform float u_voxelSize;\r\nuniform vec3 u_gridOffset;\r\nuniform bool u_nightVision;\r\n\r\nattribute vec3 position;\r\nattribute vec3 normal;\r\nattribute vec4 occlusion;\r\nattribute vec2 texcoord;\r\nattribute vec2 blockTexcoord;\r\nattribute float lighting;\r\n\r\nvarying float v_lighting;\r\nvarying vec4 v_occlusion;\r\nvarying vec2 v_texcoord;\r\nvarying vec2 v_blockTexcoord;\r\nvarying float v_blockLighting;\r\n\r\nvec3 light = vec3(0.78, 0.98, 0.59);\r\n\r\nvoid main() {\r\n    v_texcoord = texcoord;\r\n    v_occlusion = occlusion;\r\n    v_blockTexcoord = blockTexcoord;\r\n    v_lighting = dot(light, abs(normal));\r\n    v_blockLighting = lighting;\r\n\r\n    gl_Position = u_worldViewProjection * vec4((position.xyz + u_gridOffset) * u_voxelSize, 1.0);\r\n}\r\n"},3112:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nvarying vec4 v_colour;\r\n\r\nvoid main() {\r\n  gl_FragColor = v_colour;\r\n}\r\n"},3016:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nuniform mat4 u_worldViewProjection;\r\n\r\nattribute vec3 position;\r\nattribute vec4 colour;\r\n\r\nvarying vec4 v_colour;\r\n\r\nvoid main() { \r\n  v_colour = colour;\r\n  gl_Position = u_worldViewProjection * vec4(position, 1.0);\r\n}\r\n"},8510:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nuniform vec3 u_lightWorldPos;\r\nuniform vec4 u_fillColour;\r\nuniform vec3 u_cameraDir;\r\nuniform float u_fresnelExponent;\r\nuniform float u_fresnelMix;\r\n\r\nvarying vec3 v_lighting;\r\nvarying vec3 v_normal;\r\n\r\nfloat dither8x8(vec2 position, float alpha) {\r\n  int x = int(mod(position.x, 8.0));\r\n  int y = int(mod(position.y, 8.0));\r\n  int index = x + y * 8;\r\n  float limit = 0.0;\r\n\r\n  if (x < 8) {\r\n    if (index == 0) limit = 0.015625;\r\n    if (index == 1) limit = 0.515625;\r\n    if (index == 2) limit = 0.140625;\r\n    if (index == 3) limit = 0.640625;\r\n    if (index == 4) limit = 0.046875;\r\n    if (index == 5) limit = 0.546875;\r\n    if (index == 6) limit = 0.171875;\r\n    if (index == 7) limit = 0.671875;\r\n    if (index == 8) limit = 0.765625;\r\n    if (index == 9) limit = 0.265625;\r\n    if (index == 10) limit = 0.890625;\r\n    if (index == 11) limit = 0.390625;\r\n    if (index == 12) limit = 0.796875;\r\n    if (index == 13) limit = 0.296875;\r\n    if (index == 14) limit = 0.921875;\r\n    if (index == 15) limit = 0.421875;\r\n    if (index == 16) limit = 0.203125;\r\n    if (index == 17) limit = 0.703125;\r\n    if (index == 18) limit = 0.078125;\r\n    if (index == 19) limit = 0.578125;\r\n    if (index == 20) limit = 0.234375;\r\n    if (index == 21) limit = 0.734375;\r\n    if (index == 22) limit = 0.109375;\r\n    if (index == 23) limit = 0.609375;\r\n    if (index == 24) limit = 0.953125;\r\n    if (index == 25) limit = 0.453125;\r\n    if (index == 26) limit = 0.828125;\r\n    if (index == 27) limit = 0.328125;\r\n    if (index == 28) limit = 0.984375;\r\n    if (index == 29) limit = 0.484375;\r\n    if (index == 30) limit = 0.859375;\r\n    if (index == 31) limit = 0.359375;\r\n    if (index == 32) limit = 0.0625;\r\n    if (index == 33) limit = 0.5625;\r\n    if (index == 34) limit = 0.1875;\r\n    if (index == 35) limit = 0.6875;\r\n    if (index == 36) limit = 0.03125;\r\n    if (index == 37) limit = 0.53125;\r\n    if (index == 38) limit = 0.15625;\r\n    if (index == 39) limit = 0.65625;\r\n    if (index == 40) limit = 0.8125;\r\n    if (index == 41) limit = 0.3125;\r\n    if (index == 42) limit = 0.9375;\r\n    if (index == 43) limit = 0.4375;\r\n    if (index == 44) limit = 0.78125;\r\n    if (index == 45) limit = 0.28125;\r\n    if (index == 46) limit = 0.90625;\r\n    if (index == 47) limit = 0.40625;\r\n    if (index == 48) limit = 0.25;\r\n    if (index == 49) limit = 0.75;\r\n    if (index == 50) limit = 0.125;\r\n    if (index == 51) limit = 0.625;\r\n    if (index == 52) limit = 0.21875;\r\n    if (index == 53) limit = 0.71875;\r\n    if (index == 54) limit = 0.09375;\r\n    if (index == 55) limit = 0.59375;\r\n    if (index == 56) limit = 1.0;\r\n    if (index == 57) limit = 0.5;\r\n    if (index == 58) limit = 0.875;\r\n    if (index == 59) limit = 0.375;\r\n    if (index == 60) limit = 0.96875;\r\n    if (index == 61) limit = 0.46875;\r\n    if (index == 62) limit = 0.84375;\r\n    if (index == 63) limit = 0.34375;\r\n  }\r\n\r\n  return alpha < limit ? 0.0 : 1.0;\r\n}\r\n\r\nvoid main() {\r\n  float alpha = dither8x8(gl_FragCoord.xy, u_fillColour.a);\r\n  if (alpha < 0.5)\r\n  {\r\n    discard;\r\n  }\r\n\r\n  float lighting = abs(dot(v_normal, normalize(u_lightWorldPos)));\r\n  lighting = (clamp(lighting, 0.0, 1.0) * 0.66) + 0.33;\r\n\r\n  vec3 preFresnelColour = u_fillColour.rgb * lighting;\r\n  float fresnel = 1.0 - abs(dot(u_cameraDir, v_normal));\r\n  float fresnelFactor = pow(fresnel, u_fresnelExponent) * u_fresnelMix;\r\n\r\n  vec3 postFresnelColour = mix(preFresnelColour, vec3(1.0, 1.0, 1.0), fresnelFactor);\r\n\r\n  gl_FragColor = vec4(postFresnelColour, 1.0);\r\n}\r\n"},6203:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nuniform vec3 u_lightWorldPos;\r\nuniform mat4 u_worldViewProjection;\r\nuniform mat4 u_worldInverseTranspose;\r\nuniform vec4 u_fillColour;\r\nuniform vec3 u_cameraDir;\r\n\r\nattribute vec3 position;\r\nattribute vec2 texcoord;\r\nattribute vec3 normal;\r\n\r\nvarying vec3 v_normal;\r\n\r\nvoid main() {\r\n  v_normal = normal;\r\n\r\n  gl_Position = u_worldViewProjection * vec4(position, 1.0);\r\n}\r\n"},5279:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nuniform vec3 u_lightWorldPos;\r\nuniform vec3 u_cameraDir;\r\n\r\nuniform sampler2D u_texture;\r\nuniform sampler2D u_alpha;\r\nuniform int u_alphaChannel;\r\nuniform float u_alphaFactor;\r\nuniform float u_fresnelExponent;\r\nuniform float u_fresnelMix;\r\n\r\nvarying vec2 v_texcoord;\r\nvarying vec3 v_normal;\r\n\r\nfloat dither8x8(vec2 position, float alpha) {\r\n  int x = int(mod(position.x, 8.0));\r\n  int y = int(mod(position.y, 8.0));\r\n  int index = x + y * 8;\r\n  float limit = 0.0;\r\n\r\n  if (x < 8) {\r\n    if (index == 0) limit = 0.015625;\r\n    if (index == 1) limit = 0.515625;\r\n    if (index == 2) limit = 0.140625;\r\n    if (index == 3) limit = 0.640625;\r\n    if (index == 4) limit = 0.046875;\r\n    if (index == 5) limit = 0.546875;\r\n    if (index == 6) limit = 0.171875;\r\n    if (index == 7) limit = 0.671875;\r\n    if (index == 8) limit = 0.765625;\r\n    if (index == 9) limit = 0.265625;\r\n    if (index == 10) limit = 0.890625;\r\n    if (index == 11) limit = 0.390625;\r\n    if (index == 12) limit = 0.796875;\r\n    if (index == 13) limit = 0.296875;\r\n    if (index == 14) limit = 0.921875;\r\n    if (index == 15) limit = 0.421875;\r\n    if (index == 16) limit = 0.203125;\r\n    if (index == 17) limit = 0.703125;\r\n    if (index == 18) limit = 0.078125;\r\n    if (index == 19) limit = 0.578125;\r\n    if (index == 20) limit = 0.234375;\r\n    if (index == 21) limit = 0.734375;\r\n    if (index == 22) limit = 0.109375;\r\n    if (index == 23) limit = 0.609375;\r\n    if (index == 24) limit = 0.953125;\r\n    if (index == 25) limit = 0.453125;\r\n    if (index == 26) limit = 0.828125;\r\n    if (index == 27) limit = 0.328125;\r\n    if (index == 28) limit = 0.984375;\r\n    if (index == 29) limit = 0.484375;\r\n    if (index == 30) limit = 0.859375;\r\n    if (index == 31) limit = 0.359375;\r\n    if (index == 32) limit = 0.0625;\r\n    if (index == 33) limit = 0.5625;\r\n    if (index == 34) limit = 0.1875;\r\n    if (index == 35) limit = 0.6875;\r\n    if (index == 36) limit = 0.03125;\r\n    if (index == 37) limit = 0.53125;\r\n    if (index == 38) limit = 0.15625;\r\n    if (index == 39) limit = 0.65625;\r\n    if (index == 40) limit = 0.8125;\r\n    if (index == 41) limit = 0.3125;\r\n    if (index == 42) limit = 0.9375;\r\n    if (index == 43) limit = 0.4375;\r\n    if (index == 44) limit = 0.78125;\r\n    if (index == 45) limit = 0.28125;\r\n    if (index == 46) limit = 0.90625;\r\n    if (index == 47) limit = 0.40625;\r\n    if (index == 48) limit = 0.25;\r\n    if (index == 49) limit = 0.75;\r\n    if (index == 50) limit = 0.125;\r\n    if (index == 51) limit = 0.625;\r\n    if (index == 52) limit = 0.21875;\r\n    if (index == 53) limit = 0.71875;\r\n    if (index == 54) limit = 0.09375;\r\n    if (index == 55) limit = 0.59375;\r\n    if (index == 56) limit = 1.0;\r\n    if (index == 57) limit = 0.5;\r\n    if (index == 58) limit = 0.875;\r\n    if (index == 59) limit = 0.375;\r\n    if (index == 60) limit = 0.96875;\r\n    if (index == 61) limit = 0.46875;\r\n    if (index == 62) limit = 0.84375;\r\n    if (index == 63) limit = 0.34375;\r\n  }\r\n\r\n  return alpha < limit ? 0.0 : 1.0;\r\n}\r\n\r\n/*\r\nconst float ditherThreshold[64] = float[64](\r\n  0.015625, 0.51562, 0.14062, 0.64062, 0.04687, 0.54687, 0.17187, 0.67187,\r\n  0.76562, 0.26562, 0.89062, 0.39062, 0.79687, 0.29687, 0.92187, 0.42187,\r\n  0.20312, 0.70312, 0.07812, 0.57812, 0.23437,  0.73437, 0.10937, 0.60937,\r\n  0.95312, 0.45312, 0.82812, 0.32812, 0.98437, 0.48437, 0.85937, 0.35937,\r\n  0.0625, 0.5625, 0.1875, 0.6875, 0.03125, 0.53125, 0.15625, 0.65625,\r\n  0.8125, 0.3125, 0.9375, 0.4375, 0.78125, 0.28125, 0.90625, 0.40625,\r\n  0.25, 0.75, 0.125, 0.625, 0.21875, 0.71875, 0.09375, 0.59375,\r\n  1.0, 0.5, 0.875, 0.375, 0.96875, 0.46875, 0.84375, 0.34375\r\n);\r\n*/\r\n\r\nvoid main() {\r\n  vec2 tex = vec2(v_texcoord.x, 1.0 - v_texcoord.y);\r\n  vec4 diffuse = texture2D(u_texture, tex).rgba;\r\n  vec4 alphaSample = texture2D(u_alpha, tex);\r\n\r\n  float alpha = 1.0;\r\n  if (u_alphaChannel == 0) {\r\n    alpha = alphaSample.r;\r\n  } else if (u_alphaChannel == 1) {\r\n    alpha = alphaSample.g;\r\n  } else if (u_alphaChannel == 2) {\r\n    alpha = alphaSample.b;\r\n  } else if (u_alphaChannel == 3) {\r\n    alpha = alphaSample.a;\r\n  }\r\n\r\n  alpha *= u_alphaFactor;\r\n\r\n  alpha = dither8x8(gl_FragCoord.xy, alpha);\r\n  if (alpha < 0.5)\r\n  {\r\n    discard;\r\n  }\r\n\r\n  float lighting = abs(dot(v_normal, normalize(u_lightWorldPos)));\r\n  lighting = (clamp(lighting, 0.0, 1.0) * 0.66) + 0.33;\r\n\r\n  vec3 preFresnelColour = diffuse.rgb * lighting;\r\n  float fresnel = 1.0 - abs(dot(u_cameraDir, v_normal));\r\n  float fresnelFactor = pow(fresnel, u_fresnelExponent) * u_fresnelMix;\r\n\r\n  vec3 postFresnelColour = mix(preFresnelColour, vec3(1.0, 1.0, 1.0), fresnelFactor);\r\n\r\n  gl_FragColor = vec4(postFresnelColour, 1.0);\r\n}\r\n"},225:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nuniform vec3 u_lightWorldPos;\r\nuniform mat4 u_worldViewProjection;\r\nuniform mat4 u_worldInverseTranspose;\r\nuniform vec3 u_cameraDir;\r\n\r\nattribute vec3 position;\r\nattribute vec2 texcoord;\r\nattribute vec3 normal;\r\n\r\nvarying vec2 v_texcoord;\r\nvarying vec3 v_normal;\r\n\r\nvoid main() {\r\n  v_texcoord = texcoord;\r\n  v_normal = normal;\r\n\r\n  gl_Position = u_worldViewProjection * vec4(position, 1.0);\r\n}\r\n"},4706:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nuniform bool u_ambientOcclusion;\r\nuniform float u_globalAlpha;\r\n\r\nvarying float v_lighting;\r\nvarying vec4 v_occlusion;\r\nvarying vec2 v_texcoord;\r\nvarying vec4 v_colour;\r\n\r\nfloat dither8x8(vec2 position, float alpha) {\r\n  int x = int(mod(position.x, 8.0));\r\n  int y = int(mod(position.y, 8.0));\r\n  int index = x + y * 8;\r\n  float limit = 0.0;\r\n\r\n  if (x < 8) {\r\n    if (index == 0) limit = 0.015625;\r\n    if (index == 1) limit = 0.515625;\r\n    if (index == 2) limit = 0.140625;\r\n    if (index == 3) limit = 0.640625;\r\n    if (index == 4) limit = 0.046875;\r\n    if (index == 5) limit = 0.546875;\r\n    if (index == 6) limit = 0.171875;\r\n    if (index == 7) limit = 0.671875;\r\n    if (index == 8) limit = 0.765625;\r\n    if (index == 9) limit = 0.265625;\r\n    if (index == 10) limit = 0.890625;\r\n    if (index == 11) limit = 0.390625;\r\n    if (index == 12) limit = 0.796875;\r\n    if (index == 13) limit = 0.296875;\r\n    if (index == 14) limit = 0.921875;\r\n    if (index == 15) limit = 0.421875;\r\n    if (index == 16) limit = 0.203125;\r\n    if (index == 17) limit = 0.703125;\r\n    if (index == 18) limit = 0.078125;\r\n    if (index == 19) limit = 0.578125;\r\n    if (index == 20) limit = 0.234375;\r\n    if (index == 21) limit = 0.734375;\r\n    if (index == 22) limit = 0.109375;\r\n    if (index == 23) limit = 0.609375;\r\n    if (index == 24) limit = 0.953125;\r\n    if (index == 25) limit = 0.453125;\r\n    if (index == 26) limit = 0.828125;\r\n    if (index == 27) limit = 0.328125;\r\n    if (index == 28) limit = 0.984375;\r\n    if (index == 29) limit = 0.484375;\r\n    if (index == 30) limit = 0.859375;\r\n    if (index == 31) limit = 0.359375;\r\n    if (index == 32) limit = 0.0625;\r\n    if (index == 33) limit = 0.5625;\r\n    if (index == 34) limit = 0.1875;\r\n    if (index == 35) limit = 0.6875;\r\n    if (index == 36) limit = 0.03125;\r\n    if (index == 37) limit = 0.53125;\r\n    if (index == 38) limit = 0.15625;\r\n    if (index == 39) limit = 0.65625;\r\n    if (index == 40) limit = 0.8125;\r\n    if (index == 41) limit = 0.3125;\r\n    if (index == 42) limit = 0.9375;\r\n    if (index == 43) limit = 0.4375;\r\n    if (index == 44) limit = 0.78125;\r\n    if (index == 45) limit = 0.28125;\r\n    if (index == 46) limit = 0.90625;\r\n    if (index == 47) limit = 0.40625;\r\n    if (index == 48) limit = 0.25;\r\n    if (index == 49) limit = 0.75;\r\n    if (index == 50) limit = 0.125;\r\n    if (index == 51) limit = 0.625;\r\n    if (index == 52) limit = 0.21875;\r\n    if (index == 53) limit = 0.71875;\r\n    if (index == 54) limit = 0.09375;\r\n    if (index == 55) limit = 0.59375;\r\n    if (index == 56) limit = 0.9999;\r\n    if (index == 57) limit = 0.5;\r\n    if (index == 58) limit = 0.875;\r\n    if (index == 59) limit = 0.375;\r\n    if (index == 60) limit = 0.96875;\r\n    if (index == 61) limit = 0.46875;\r\n    if (index == 62) limit = 0.84375;\r\n    if (index == 63) limit = 0.34375;\r\n  }\r\n\r\n  return alpha < limit ? 0.0 : 1.0;\r\n}\r\n\r\nvoid main() {\r\n  float u = v_texcoord.x;\r\n  float v = v_texcoord.y;\r\n  \r\n  float g = 1.0;\r\n  if (u_ambientOcclusion)\r\n  {\r\n    float a = v_occlusion.x;\r\n    float b = v_occlusion.y;\r\n    float c = v_occlusion.z;\r\n    float d = v_occlusion.w;\r\n    g = v*(u*b + (1.0-u)*d) + (1.0-v)*(u*a + (1.0-u)*c);\r\n  }\r\n\r\n  float alpha = dither8x8(gl_FragCoord.xy, v_colour.a);\r\n  if (alpha < 0.5)\r\n  {\r\n    discard;\r\n  }\r\n\r\n  gl_FragColor = vec4(v_colour.rgb * (v_lighting * g), 1.0);\r\n}\r\n"},8133:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nuniform mat4 u_worldViewProjection;\r\nuniform float u_voxelSize;\r\nuniform vec3 u_gridOffset;\r\nuniform bool u_ambientOcclusion;\r\n\r\nattribute vec3 position;\r\nattribute vec3 normal;\r\nattribute vec4 colour;\r\nattribute vec4 occlusion;\r\nattribute vec2 texcoord;\r\n\r\nvarying float v_lighting;\r\nvarying vec4 v_occlusion;\r\nvarying vec2 v_texcoord;\r\nvarying vec4 v_colour;\r\n\r\nvec3 light = vec3(0.78, 0.98, 0.59);\r\n\r\nvoid main() {\r\n    v_lighting = dot(light, abs(normal));\r\n    v_occlusion = occlusion;\r\n    v_texcoord = texcoord;\r\n    v_colour = colour;\r\n\r\n    gl_Position = u_worldViewProjection * vec4((position.xyz + u_gridOffset) * u_voxelSize, 1.0);\r\n}\r\n"},9509:(e,t,r)=>{var n=r(8764),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},8338:(e,t,r)=>{e.exports=i;var n=r(7187).EventEmitter;function i(){n.call(this)}r(5717)(i,n),i.Readable=r(6577),i.Writable=r(323),i.Duplex=r(8656),i.Transform=r(4473),i.PassThrough=r(2366),i.finished=r(1086),i.pipeline=r(6472),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",l));var a=!1;function s(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",l),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}},8106:e=>{"use strict";var t={};function r(e,r,n){n||(n=Error);var i=function(e){var t,n;function i(t,n,i){return e.call(this,function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(t,n,i))||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(n);i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){var i,o,a,s,l;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(i," ").concat(n(t,"type"));else{var u=("number"!=typeof l&&(l=0),l+".".length>(s=e).length||-1===s.indexOf(".",l)?"argument":"property");a='The "'.concat(e,'" ').concat(u," ").concat(i," ").concat(n(t,"type"))}return a+". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},8656:(e,t,r)=>{"use strict";var n=r(4155),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c;var o=r(6577),a=r(323);r(5717)(c,o);for(var s=i(a.prototype),l=0;l<s.length;l++){var u=s[l];c.prototype[u]||(c.prototype[u]=a.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},2366:(e,t,r)=>{"use strict";e.exports=i;var n=r(4473);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(5717)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},6577:(e,t,r)=>{"use strict";var n,i=r(4155);e.exports=T,T.ReadableState=A,r(7187).EventEmitter;var o,a=function(e,t){return e.listeners(t).length},s=r(3630),l=r(8764).Buffer,u=r.g.Uint8Array||function(){},c=r(964);o=c&&c.debuglog?c.debuglog("stream"):function(){};var f,h,d,p=r(9686),g=r(1029),m=r(94).getHighWaterMark,y=r(8106).q,_=y.ERR_INVALID_ARG_TYPE,b=y.ERR_STREAM_PUSH_AFTER_EOF,v=y.ERR_METHOD_NOT_IMPLEMENTED,x=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(5717)(T,s);var w=g.errorOrDestroy,E=["error","close","destroy","pause","resume"];function A(e,t,i){n=n||r(8656),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r(2553).s),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function T(e){if(n=n||r(8656),!(this instanceof T))return new T(e);var t=this instanceof n;this._readableState=new A(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function S(e,t,r,n,i){o("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?I(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}}(e,s);else if(i||(a=function(e,t){var r,n;return n=t,l.isBuffer(n)||n instanceof u||"string"==typeof t||void 0===t||e.objectMode||(r=new _("chunk",["string","Buffer","Uint8Array"],t)),r}(s,t)),a)w(e,a);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),n)s.endEmitted?w(e,new x):M(e,s,t,!0);else if(s.ended)w(e,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?M(e,s,t,!1):C(e,s)):M(e,s,t,!1)}else n||(s.reading=!1,C(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function M(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&I(e)),C(e,t)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=g.destroy,T.prototype._undestroy=g.undestroy,T.prototype._destroy=function(e,t){t(e)},T.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=l.from(e,t),t=""),r=!0),S(this,e,t,!1,r)},T.prototype.unshift=function(e){return S(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){f||(f=r(2553).s);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var k=1073741824;function O(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=k?e=k:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function I(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(R,e))}function R(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,U(e)}function C(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(L,e,t))}function L(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function B(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function V(e){o("readable nexttick read 0"),e.read(0)}function P(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),U(e),t.flowing&&!t.reading&&e.read(0)}function U(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function F(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(j,t,e))}function j(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function z(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}T.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):I(this),null;if(0===(e=O(e,t))&&t.ended)return 0===t.length&&F(this),null;var n,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=O(r,t))),null===(n=e>0?N(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&F(this)),null!==n&&this.emit("data",n),n},T.prototype._read=function(e){w(this,new v("_read()"))},T.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,o("pipe count=%d opts=%j",n.pipesCount,t);var s=t&&!1===t.end||e===i.stdout||e===i.stderr?g:l;function l(){o("onend"),e.end()}n.endEmitted?i.nextTick(s):r.once("end",s),e.on("unpipe",(function t(i,a){o("onunpipe"),i===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,o("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",u),e.removeListener("error",h),e.removeListener("unpipe",t),r.removeListener("end",l),r.removeListener("end",g),r.removeListener("data",f),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,U(e))}}(r);e.on("drain",u);var c=!1;function f(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==z(n.pipes,e))&&!c&&(o("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function h(t){o("onerror",t),g(),e.removeListener("error",h),0===a(e,"error")&&w(e,t)}function d(){e.removeListener("finish",p),g()}function p(){o("onfinish"),e.removeListener("close",d),g()}function g(){o("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",d),e.once("finish",p),e.emit("pipe",r),n.flowing||(o("pipe resume"),r.resume()),e},T.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=z(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},T.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,o("on readable",n.length,n.reading),n.length?I(this):n.reading||i.nextTick(V,this))),r},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(B,this),r},T.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(B,this),t},T.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(P,e,t))}(this,e)),e.paused=!1,this},T.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<E.length;a++)e.on(E[a],this.emit.bind(this,E[a]));return this._read=function(t){o("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=r(828)),h(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),T._fromList=N,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(e,t){return void 0===d&&(d=r(1265)),d(T,e,t)})},4473:(e,t,r)=>{"use strict";e.exports=c;var n=r(8106).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,l=r(8656);function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);l.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}r(5717)(c,l),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,r){r(new i("_transform()"))},c.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},323:(e,t,r)=>{"use strict";var n,i=r(4155);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=T,T.WritableState=A;var a,s={deprecate:r(4927)},l=r(3630),u=r(8764).Buffer,c=r.g.Uint8Array||function(){},f=r(1029),h=r(94).getHighWaterMark,d=r(8106).q,p=d.ERR_INVALID_ARG_TYPE,g=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,_=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,v=d.ERR_STREAM_WRITE_AFTER_END,x=d.ERR_UNKNOWN_ENCODING,w=f.errorOrDestroy;function E(){}function A(e,t,a){n=n||r(8656),e=e||{},"boolean"!=typeof a&&(a=t instanceof n),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(i.nextTick(o,n),i.nextTick(R,e,t),e._writableState.errorEmitted=!0,w(e,n)):(o(n),e._writableState.errorEmitted=!0,w(e,n),R(e,t))}(e,r,n,t,o);else{var a=O(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||k(e,r),n?i.nextTick(M,e,r,a,o):M(e,r,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function T(e){var t=this instanceof(n=n||r(8656));if(!t&&!a.call(T,this))return new T(e);this._writableState=new A(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function S(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new _("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function M(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),R(e,t)}function k(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,l=!0;r;)i[s]=r,r.isBuf||(l=!1),r=r.next,s+=1;i.allBuffers=l,S(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,f=r.callback;if(S(e,t,!1,t.objectMode?1:u.length,u,c,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function O(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function I(e,t){e._final((function(r){t.pendingcb--,r&&w(e,r),t.prefinished=!0,e.emit("prefinish"),R(e,t)}))}function R(e,t){var r=O(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(I,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(5717)(T,l),A.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(A.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===T&&e&&e._writableState instanceof A}})):a=function(e){return e instanceof this},T.prototype.pipe=function(){w(this,new y)},T.prototype.write=function(e,t,r){var n,o=this._writableState,a=!1,s=!o.objectMode&&(n=e,u.isBuffer(n)||n instanceof c);return s&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=E),o.ending?function(e,t){var r=new v;w(e,r),i.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var o;return null===r?o=new b:"string"==typeof r||t.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(w(e,o),i.nextTick(n,o),!1)}(this,o,e,r))&&(o.pendingcb++,a=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,r)),t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else S(e,t,!1,s,n,i,o);return l}(this,o,s,e,t,r)),a},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||k(this,e))},T.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new x(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(e,t,r){r(new g("_write()"))},T.prototype._writev=null,T.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,R(e,t),r&&(t.finished?i.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),T.prototype.destroy=f.destroy,T.prototype._undestroy=f.undestroy,T.prototype._destroy=function(e,t){t(e)}},828:(e,t,r)=>{"use strict";var n,i=r(4155);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(1086),s=Symbol("lastResolve"),l=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),f=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function p(e,t){return{value:e,done:t}}function g(e){var t=e[s];if(null!==t){var r=e[d].read();null!==r&&(e[f]=null,e[s]=null,e[l]=null,t(p(r,!1)))}}function m(e){i.nextTick(g,e)}var y=Object.getPrototypeOf((function(){})),_=Object.setPrototypeOf((o(n={get stream(){return this[d]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(t,r){i.nextTick((function(){e[u]?r(e[u]):t(p(void 0,!0))}))}));var r,n=this[f];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(p(void 0,!0)):t[h](r,n)}),n)}}(n,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(p(o,!1));r=new Promise(this[h])}return this[f]=r,r}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[d].destroy(null,(function(e){e?r(e):t(p(void 0,!0))}))}))})),n),y);e.exports=function(e){var t,r=Object.create(_,(o(t={},d,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,l,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,c,{value:e._readableState.endEmitted,writable:!0}),o(t,h,{value:function(e,t){var n=r[d].read();n?(r[f]=null,r[s]=null,r[l]=null,e(p(n,!1))):(r[s]=e,r[l]=t)},writable:!0}),t));return r[f]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[l];return null!==t&&(r[f]=null,r[s]=null,r[l]=null,t(e)),void(r[u]=e)}var n=r[s];null!==n&&(r[f]=null,r[s]=null,r[l]=null,n(p(void 0,!0))),r[c]=!0})),e.on("readable",m.bind(null,r)),r}},9686:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(8764).Buffer,s=r(9862).inspect,l=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,n,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=i,n=s,a.prototype.copy.call(t,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:l,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&o(t.prototype,r),e}()},1029:(e,t,r)=>{"use strict";var n=r(4155);function i(e,t){a(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(a,this,e)):n.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?n.nextTick(o,r):(r._writableState.errorEmitted=!0,n.nextTick(i,r,e)):n.nextTick(i,r,e):t?(n.nextTick(o,r),t(e)):n.nextTick(o,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},1086:(e,t,r)=>{"use strict";var n=r(8106).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||c()},u=t._writableState&&t._writableState.finished,c=function(){s=!1,u=!0,a||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,f=!0,s||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):s&&!u?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},g=function(){t.req.on("finish",c)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",c),t.on("abort",p),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",h),t.on("finish",c),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",c),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",c),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}},1265:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},6472:(e,t,r)=>{"use strict";var n,i=r(8106).q,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function l(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var c,f=function(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var h=t.map((function(e,i){var o=i<t.length-1;return function(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===n&&(n=r(1086)),n(e,{readable:t,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var l=!1;return function(t){if(!s&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}(e,o,i>0,(function(e){c||(c=e),e&&h.forEach(l),o||(h.forEach(l),f(c))}))}));return t.reduce(u)}},94:(e,t,r)=>{"use strict";var n=r(8106).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},3630:(e,t,r)=>{e.exports=r(7187).EventEmitter},2553:(e,t,r)=>{"use strict";var n=r(9509).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=f,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function c(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=a(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=a(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},2323:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var n=r(3379),i=r.n(n),o=r(7795),a=r.n(o),s=r(569),l=r.n(s),u=r(3565),c=r.n(u),f=r(9216),h=r.n(f),d=r(4589),p=r.n(d),g=r(2918),m={};m.styleTagTransform=p(),m.setAttributes=c(),m.insert=l().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=h(),i()(g.Z,m);const y=g.Z&&g.Z.locals?g.Z.locals:void 0},3379:e=>{"use strict";var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var o={},a=[],s=0;s<e.length;s++){var l=e[s],u=n.base?l[0]+n.base:l[0],c=o[u]||0,f="".concat(u," ").concat(c);o[u]=c+1;var h=r(f),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(d);else{var p=i(d,n);n.byIndex=s,t.splice(s,0,{identifier:f,updater:p,references:1})}a.push(f)}return a}function i(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,i){var o=n(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=r(o[a]);t[s].references--}for(var l=n(e,i),u=0;u<o.length;u++){var c=r(o[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},9808:function(e,t,r){"use strict";var n="/",i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AppContext=void 0,r(2323);var s=a(r(6470)),l=r(2830),u=r(8913),c=r(9712),f=r(2758),h=r(6189),d=r(4790),p=r(3419),g=r(1535),m=r(1333),y=r(413),_=r(5429),b=r(3769),v=r(9882),x=r(2989),w=r(3243),E=r(7464),A=r(2649),T=function(){function e(){var e=this;if(this._materialManager=new h.MaterialMapManager(new Map),w.Logger.Get.enableLOG(),w.Logger.Get.enableLOGMAJOR(),w.Logger.Get.enableLOGWARN(),u.AppConfig.Get.dumpConfig(),!document.getElementById("canvas").getContext("webgl"))throw Error("Could not load WebGL context");this._ui=new _.UI(this),this._ui.build(),this._ui.registerEvents(),this._ui.disable(v.EAction.Materials),this._workerController=new A.WorkerController(s.default.resolve(n,"worker_interface.js")),this._workerController.addJob({id:"init",payload:{action:"Init",params:{}}}),p.Renderer.Get.toggleIsAxesEnabled(),l.ArcballCamera.Get.setCameraMode("perspective"),l.ArcballCamera.Get.toggleAngleSnap(),c.EventManager.Get.add(c.EAppEvent.onTaskStart,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._lastAction&&e._ui.getActionButton(e._lastAction).startLoading().setProgress(0)})),c.EventManager.Get.add(c.EAppEvent.onTaskProgress,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._lastAction&&e._ui.getActionButton(e._lastAction).setProgress(t[0][1])})),c.EventManager.Get.add(c.EAppEvent.onTaskEnd,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._lastAction&&e._ui.getActionButton(e._lastAction).stopLoading().setProgress(0)}))}return e.prototype.do=function(e){return i(this,void 0,void 0,(function(){var t,r,n,i=this;return o(this,(function(o){switch(o.label){case 0:return this._ui.cacheValues(e),this._ui.disable(e),this._ui.disableAll(),[4,this._getWorkerJob(e)];case 1:return void 0===(t=o.sent())?(this._ui.enableTo(e),[2]):(r=this._ui.getActionOutput(e),n=function(n){switch(n.action){case"KnownError":case"UnknownError":r.setTaskComplete("action",g.StatusHandler.Get.getDefaultFailureMessage(e),["KnownError"===n.action?n.error.message:"Something unexpectedly went wrong"],"error"),(0,w.LOG_ERROR)(n.error),i._ui.getActionButton(e).stopLoading().setProgress(0),i._ui.enableTo(e);break;default:(0,x.ASSERT)("Progress"!==n.action);var o=i._getActionMessageBuilder(e,n.statusMessages),a=o.builder,s=o.style;r.setMessage(a,s),t.callback&&t.callback(n)}},this._lastAction=e,this._workerController.addJob({id:t.id,payload:t.payload,callback:n}),[2])}}))}))},e.prototype._getActionMessageBuilder=function(e,t){var r=t.filter((function(e){return"info"===e.status})).map((function(e){return e.message})),n=r.length>0,i=t.filter((function(e){return"warning"===e.status})).map((function(e){return e.message})),o=i.length>0,a=new b.UIMessageBuilder;return a.addBold("action",[g.StatusHandler.Get.getDefaultSuccessMessage(e)+(n?":":"")],"success"),a.addItem("action",r,"none"),a.addItem("action",i,"warning"),{builder:a,style:o?"warning":"success"}},e.prototype._getWorkerJob=function(e){switch(e){case v.EAction.Import:return this._import();case v.EAction.Materials:return Promise.resolve(this._materials());case v.EAction.Voxelise:return Promise.resolve(this._voxelise());case v.EAction.Assign:return Promise.resolve(this._assign());case v.EAction.Export:return Promise.resolve(this._export())}(0,x.ASSERT)(!1)},e.prototype._import=function(){return i(this,void 0,void 0,(function(){var e,t,r,n,i,a=this;return o(this,(function(o){switch(o.label){case 0:return e=this._ui.layout.import.elements,this._ui.getActionOutput(v.EAction.Import).setTaskInProgress("action","[Importer]: Loading..."),n={action:"Import"},i={importer:"obj"},[4,e.input.getValue()];case 1:return n.params=(i.fileSource=o.sent(),i.rotation=e.rotation.getValue(),i),t=n,r=function(e){(0,x.ASSERT)("Import"===e.action);var t=a._ui.getActionOutput(v.EAction.Import),r=new E.Vector3(e.result.dimensions.x,e.result.dimensions.y,e.result.dimensions.z);if(r.mulScalar(u.AppConfig.Get.CONSTRAINT_MAXIMUM_HEIGHT/8).floor(),a.maxConstraint=r,a._materialManager=new h.MaterialMapManager(e.result.materials),e.result.triangleCount<u.AppConfig.Get.RENDER_TRIANGLE_THRESHOLD)t.setTaskInProgress("render","[Renderer]: Processing..."),a._workerController.addJob(a._renderMesh());else{var n="Will not render mesh as its over ".concat(u.AppConfig.Get.RENDER_TRIANGLE_THRESHOLD.toLocaleString()," triangles.");t.setTaskComplete("render","[Renderer]: Stopped",[n],"warning")}a._updateMaterialsAction()},r.bind(this),[2,{id:"Import",payload:t,callback:r}]}}))}))},e.prototype._materials=function(){var e=this;return this._ui.getActionOutput(v.EAction.Materials).setTaskInProgress("action","[Materials]: Loading..."),{id:"Import",payload:{action:"SetMaterials",params:{materials:this._materialManager.materials}},callback:function(t){(0,x.ASSERT)("SetMaterials"===t.action),e._ui.getActionOutput(v.EAction.Materials).setTaskComplete("action","[Materials]: Updated",[],"success"),t.result.materialsChanged.forEach((function(t){var r=e._materialManager.materials.get(t);(0,x.ASSERT)(void 0!==r),p.Renderer.Get.recreateMaterialBuffer(t,r),p.Renderer.Get.setModelToUse(p.MeshType.TriangleMesh)})),e._ui.enableTo(v.EAction.Voxelise)}}},e.prototype._updateMaterialsAction=function(){var e=this;this._ui.layoutDull.materials.elements={},this._ui.layoutDull.materials.elementsOrder=[],this._materialManager.materials.forEach((function(t,r){t.type===d.MaterialType.solid?e._ui.layoutDull.materials.elements["mat_".concat(r)]=new m.SolidMaterialElement(r,t).setLabel(r).onChangeTypeDelegate((function(){e._materialManager.changeMaterialType(r,d.MaterialType.textured),e._updateMaterialsAction()})):e._ui.layoutDull.materials.elements["mat_".concat(r)]=new y.TexturedMaterialElement(r,t).setLabel(r).onChangeTypeDelegate((function(){e._materialManager.changeMaterialType(r,d.MaterialType.solid),e._updateMaterialsAction()})).onChangeTransparencyTypeDelegate((function(t){e._materialManager.changeTransparencyType(r,t),e._updateMaterialsAction()})),e._ui.layoutDull.materials.elementsOrder.push("mat_".concat(r))})),this._ui.refreshSubcomponents(this._ui.layoutDull.materials)},e.prototype._renderMesh=function(){var e=this;return{id:"RenderMesh",payload:{action:"RenderMesh",params:{}},callback:function(t){switch(e._ui.enableTo(v.EAction.Voxelise),t.action){case"KnownError":case"UnknownError":e._ui.getActionOutput(v.EAction.Import).setTaskComplete("render","[Renderer]: Failed",["KnownError"===t.action?t.error.message:"Something unexpectedly went wrong"],"error"),(0,w.LOG_ERROR)(t.error);break;default:(0,x.ASSERT)("RenderMesh"===t.action),p.Renderer.Get.useMesh(t.result),e._ui.getActionOutput(v.EAction.Import).setTaskComplete("render","[Renderer]: Succeeded",[],"success")}}}},e.prototype._voxelise=function(){var e=this,t=this._ui.layout.voxelise.elements;return this._ui.getActionOutput(v.EAction.Voxelise).setTaskInProgress("action","[Voxel Mesh]: Loading..."),{id:"Voxelise",payload:{action:"Voxelise",params:{constraintAxis:t.constraintAxis.getValue(),voxeliser:t.voxeliser.getValue(),size:t.size.getValue(),useMultisampleColouring:t.multisampleColouring.getValue(),enableAmbientOcclusion:t.ambientOcclusion.getValue(),voxelOverlapRule:t.voxelOverlapRule.getValue()}},callback:function(t){(0,x.ASSERT)("Voxelise"===t.action),e._ui.getActionOutput(v.EAction.Voxelise).setTaskInProgress("render","[Renderer]: Processing..."),e._workerController.addJob(e._renderVoxelMesh())}}},e.prototype._renderVoxelMesh=function(){var e=this,t=this._ui.layout.voxelise.elements;return{id:"RenderNextVoxelMeshChunk",payload:{action:"RenderNextVoxelMeshChunk",params:{enableAmbientOcclusion:t.ambientOcclusion.getValue(),desiredHeight:t.size.getValue()}},callback:function(t){switch(t.action){case"KnownError":case"UnknownError":e._ui.getActionOutput(v.EAction.Voxelise).setTaskComplete("render","[Renderer]: Failed",["KnownError"===t.action?t.error.message:"Something unexpectedly went wrong"],"error"),(0,w.LOG_ERROR)(t.error),e._ui.enableTo(v.EAction.Assign);break;default:(0,x.ASSERT)("RenderNextVoxelMeshChunk"===t.action),p.Renderer.Get.useVoxelMeshChunk(t.result),t.result.moreVoxelsToBuffer?e._workerController.addJob(e._renderVoxelMesh()):(e._ui.getActionOutput(v.EAction.Voxelise).setTaskComplete("render","[Renderer]: Succeeded",[],"success"),e._ui.enableTo(v.EAction.Assign))}}}},e.prototype._assign=function(){var e=this,t=this._ui.layout.assign.elements;return this._ui.getActionOutput(v.EAction.Assign).setTaskInProgress("action","[Block Mesh]: Loading..."),p.Renderer.Get.setLightingAvailable(t.calculateLighting.getValue()),{id:"Assign",payload:{action:"Assign",params:{textureAtlas:t.textureAtlas.getValue(),blockPalette:t.blockPalette.getValue(),dithering:t.dithering.getValue(),colourSpace:v.ColourSpace.RGB,fallable:t.fallable.getValue(),resolution:Math.pow(2,t.colourAccuracy.getValue()),calculateLighting:t.calculateLighting.getValue(),lightThreshold:t.lightThreshold.getValue(),contextualAveraging:t.contextualAveraging.getValue(),errorWeight:t.errorWeight.getValue()/10}},callback:function(t){(0,x.ASSERT)("Assign"===t.action),e._ui.getActionOutput(v.EAction.Assign).setTaskInProgress("render","[Renderer]: Processing..."),e._workerController.addJob(e._renderBlockMesh())}}},e.prototype._renderBlockMesh=function(){var e=this;return{id:"RenderNextBlockMeshChunk",payload:{action:"RenderNextBlockMeshChunk",params:{textureAtlas:this._ui.layout.assign.elements.textureAtlas.getValue()}},callback:function(t){switch(t.action){case"KnownError":case"UnknownError":e._ui.getActionOutput(v.EAction.Assign).setTaskComplete("render","[Renderer]: Failed",["KnownError"===t.action?t.error.message:"Something unexpectedly went wrong"],"error"),(0,w.LOG_ERROR)(t.error),e._ui.enableTo(v.EAction.Export);break;default:(0,x.ASSERT)("RenderNextBlockMeshChunk"===t.action),p.Renderer.Get.useBlockMeshChunk(t.result),t.result.moreBlocksToBuffer?e._workerController.addJob(e._renderBlockMesh()):(e._ui.getActionOutput(v.EAction.Assign).setTaskComplete("render","[Renderer]: Succeeded",[],"success"),e._ui.enableTo(v.EAction.Export))}}}},e.prototype._export=function(){var e=this,t=this._ui.layout.export.elements.export.getValue();return f.ExporterFactory.GetExporter(t),{id:"Export",payload:{action:"Export",params:{filepath:"",exporter:t}},callback:function(t){e._ui.enableTo(v.EAction.Export)}}},e.prototype.draw=function(){p.Renderer.Get.update(),this._ui.tick(this._workerController.isBusy()),p.Renderer.Get.draw()},e}();t.AppContext=T},3485:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Atlas=void 0;var i=n(r(6470)),o=r(6841),a=function(){function e(e){this._blocks=new Map,this._atlasSize=0,this._atlasName=e}return e.prototype.getBlocks=function(){return this._blocks},e.load=function(e){},e.prototype.getAtlasSize=function(){return this._atlasSize},e.prototype.getAtlasTexturePath=function(){return i.default.join(o.AppPaths.Get.atlases,"./".concat(this._atlasName,".png"))},e.prototype.hasBlock=function(e){return this._blocks.has(e)},e.getVanillaAtlas=function(){return e.load("vanilla")},e._isValidAtlasName=function(t){return t.length>0&&e.ATLAS_NAME_REGEX.test(t)},e._getAtlasPath=function(e){return i.default.join(o.AppPaths.Get.atlases,"./".concat(e,".atlas"))},e.ATLAS_NAME_REGEX=/^[a-zA-Z\-]+$/,e}();t.Atlas=a},2509:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtlasPalette=t.EFaceVisibility=void 0;var n,i=r(4405),o=r(6490),a=r(2989);!function(e){e[e.None=0]="None",e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.North=4]="North",e[e.East=8]="East",e[e.South=16]="South",e[e.West=32]="West"}(n=t.EFaceVisibility||(t.EFaceVisibility={}));var s=function(){function e(e,t){this._atlas=e,this._palette=t,this._palette.removeMissingAtlasBlocks(this._atlas)}return e.prototype.createBlockCollection=function(e){for(var t=this._palette.getBlocks(),r=0,n=e;r<n.length;r++){var i=n[r],o=t.indexOf(i);-1!=o&&t.splice(o,1)}var s={blocks:new Map,cache:new Map};return this._atlas.getBlocks().forEach((function(e,r){t.includes(r)&&s.blocks.set(r,e)})),(0,a.ASSERT)(s.blocks.size>=1,"Must have at least one block cached"),s},e.prototype.getBlock=function(t,r,s,l){var u=i.RGBAUtil.hash255(t),c=(BigInt(u)<<BigInt(6))+BigInt(s),f=r.cache.get(c);if(void 0!==f)return f;var h,d=1/0;if(r.blocks.forEach((function(r){var a=e.getContextualFaceAverage(r,s),u=s!==n.None?a.colour:r.colour,c=s!==n.None?a.std:0,f=i.RGBAUtil.fromRGBA255(t),p=i.RGBAUtil.squaredDistance(f,u),g=c,m=o.AppMath.lerp(l,p,g);m<d&&(d=m,h=r)})),void 0!==h)return r.cache.set(c,h),h;(0,a.ASSERT)(!1,"Unreachable, always at least one possible block")},e.getContextualFaceAverage=function(e,t){var r={r:0,g:0,b:0,a:0},o=0,a=0;return t&n.Up&&(i.RGBAUtil.add(r,e.faces.up.colour),o+=e.faces.up.std,++a),t&n.Down&&(i.RGBAUtil.add(r,e.faces.down.colour),o+=e.faces.down.std,++a),t&n.North&&(i.RGBAUtil.add(r,e.faces.north.colour),o+=e.faces.north.std,++a),t&n.East&&(i.RGBAUtil.add(r,e.faces.east.colour),o+=e.faces.east.std,++a),t&n.South&&(i.RGBAUtil.add(r,e.faces.south.colour),o+=e.faces.south.std,++a),t&n.West&&(i.RGBAUtil.add(r,e.faces.west.colour),o+=e.faces.west.std,++a),r.r/=a,r.g/=a,r.b/=a,r.a/=a,{colour:r,std:o/a}},e}();t.AtlasPalette=s},7594:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockMesh=void 0;var n=r(3485),i=r(2509),o=r(4917),a=r(4405),s=r(5601),l=r(4777),u=r(3509),c=r(2126),f=r(4374),h=r(1535),d=r(2989),p=r(3243),g=r(7464),m=r(8493),y=function(){function e(e){this._bufferChunks=[],this._blocksUsed=new Set,this._blocks=[],this._voxelMesh=e,this._atlas=n.Atlas.getVanillaAtlas(),this._lighting=new u.BlockMeshLighting(this)}return e.createFromVoxelMesh=function(t,r){var n=new e(t);return n._assignBlocks(r),r.calculateLighting&&(n._lighting.init(),n._lighting.addSunLightValues(),n._lighting.addEmissiveBlocks(),n._lighting.addLightToDarkness(r.lightThreshold),n._lighting.dumpInfo()),n},e.prototype._getFinalVoxelColour=function(e,t){var r=a.RGBAUtil.copy(e.colour),n=a.RGBAUtil.bin(r,t.resolution),i=a.RGBAUtil.copy255(n);switch(t.dithering){case"off":break;case"random":l.Ditherer.ditherRandom(i);break;case"ordered":l.Ditherer.ditherOrdered(i,e.position)}return i},e.prototype._assignBlocks=function(e){var t=n.Atlas.load(e.textureAtlas);(0,d.ASSERT)(void 0!==t,"Could not load atlas"),this._atlas=t;var r=c.Palette.load(e.blockPalette);(0,d.ASSERT)(void 0!==r,"Could not load palette");for(var o=new i.AtlasPalette(t,r),a=o.createBlockCollection([]),l=o.createBlockCollection(s.AppRuntimeConstants.Get.FALLABLE_BLOCKS),u=[],p=0,y=f.ProgressManager.Get.start("Assigning"),_=this._voxelMesh.getVoxels(),b=0;b<_.length;++b){f.ProgressManager.Get.progress(y,b/_.length);var v=_[b],x=this._getFinalVoxelColour(v,e),w=e.contextualAveraging?this._voxelMesh.getFaceVisibility(v.position):m.VoxelMesh.getFullFaceVisibility(),E=o.getBlock(x,a,w,e.errorWeight),A=s.AppRuntimeConstants.Get.FALLABLE_BLOCKS.includes(E.name),T=this._voxelMesh.isVoxelAt(g.Vector3.add(v.position,new g.Vector3(0,-1,0)));A&&!T&&++p,("replace-fallable"===e.fallable&&A||"replace-falling"===e.fallable&&A&&!T)&&(E=o.getBlock(x,l,w,e.errorWeight)),s.AppRuntimeConstants.Get.GRASS_LIKE_BLOCKS.includes(E.name)&&u.push({id:this._blocks.length,voxelColour:x,errWeight:e.errorWeight,faceVisibility:w}),this._blocks.push({voxel:v,blockInfo:E}),this._blocksUsed.add(E.name)}if(u.length>0)for(var S=o.createBlockCollection(s.AppRuntimeConstants.Get.GRASS_LIKE_BLOCKS),M=0;M<u.length;M++){f.ProgressManager.Get.progress(y,M/u.length);var k=u[M],O=this._blocks[k.id],I=g.Vector3.add(O.voxel.position,new g.Vector3(0,1,0)),R=this._voxelMesh.getVoxelIndex(I);void 0===R||s.AppRuntimeConstants.Get.TRANSPARENT_BLOCKS.includes(this._blocks[R].blockInfo.name)||(E=o.getBlock(k.voxelColour,S,k.faceVisibility,k.errWeight),O.blockInfo=E,this._blocks[k.id]=O,this._blocksUsed.add(E.name))}f.ProgressManager.Get.end(y),"do-nothing"===e.fallable&&p>0&&h.StatusHandler.Get.add("warning","".concat(p.toLocaleString()," blocks will fall under gravity when this structure is placed"))},e.prototype.getBlockLighting=function(e){return[this._lighting.getMaxLightLevel(new g.Vector3(1,0,0).add(e)),this._lighting.getMaxLightLevel(new g.Vector3(-1,0,0).add(e)),this._lighting.getMaxLightLevel(new g.Vector3(0,1,0).add(e)),this._lighting.getMaxLightLevel(new g.Vector3(0,-1,0).add(e)),this._lighting.getMaxLightLevel(new g.Vector3(0,0,1).add(e)),this._lighting.getMaxLightLevel(new g.Vector3(0,0,-1).add(e))]},e.prototype.setEmissiveBlock=function(e){var t,r=this,n=this._voxelMesh.getVoxelAt(e);if((0,d.ASSERT)(void 0!==n,"Missing voxel"),s.AppRuntimeConstants.Get.EMISSIVE_BLOCKS.forEach((function(e){var i=r._atlas.getBlocks().get(e);i&&a.RGBAUtil.squaredDistance(i.colour,n.colour)<1/0&&(t=i)})),void 0!==t){var i=this._voxelMesh.getVoxelIndex(e);return(0,d.ASSERT)(void 0!==i,"Setting emissive block of block that doesn't exist"),this._blocks[i].blockInfo=t,!0}throw new d.AppError("Block palette contains no light blocks to place")},e.prototype.getBlockAt=function(e){var t=this._voxelMesh.getVoxelIndex(e);if(void 0!==t)return this._blocks[t]},e.prototype.getBlocks=function(){return this._blocks},e.prototype.getBlockPalette=function(){return Array.from(this._blocksUsed)},e.prototype.getVoxelMesh=function(){if(!this._voxelMesh)throw new d.AppError("Could not get voxel mesh");return this._voxelMesh},e.prototype.getAtlas=function(){return this._atlas},e.prototype.isEmissiveBlock=function(e){return s.AppRuntimeConstants.Get.EMISSIVE_BLOCKS.includes(e.blockInfo.name)},e.prototype.isTransparentBlock=function(e){return s.AppRuntimeConstants.Get.TRANSPARENT_BLOCKS.includes(e.blockInfo.name)},e.prototype.getChunkedBuffer=function(e){return void 0===this._bufferChunks[e]?((0,p.LOGF)("[BlockMesh]: getChunkedBuffer: ci: ".concat(e," not cached")),this._bufferChunks[e]=o.ChunkedBufferGenerator.fromBlockMesh(this,e)):(0,p.LOGF)("[BlockMesh]: getChunkedBuffer: ci: ".concat(e," not cached")),this._bufferChunks[e]},e.prototype.getAllChunkedBuffers=function(){return this._bufferChunks},e}();t.BlockMesh=y},7168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bounds=void 0;var n=r(7464),i=function(){function e(e,t){this._min=e,this._max=t}return e.prototype.extendByPoint=function(e){this._min=n.Vector3.min(this._min,e),this._max=n.Vector3.max(this._max,e)},e.prototype.extendByVolume=function(e){this._min=n.Vector3.min(this._min,e._min),this._max=n.Vector3.max(this._max,e._max)},e.getInfiniteBounds=function(){return new e(new n.Vector3(1/0,1/0,1/0),new n.Vector3(-1/0,-1/0,-1/0))},Object.defineProperty(e.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),e.prototype.getCentre=function(){var e=n.Vector3.sub(this._max,this._min).divScalar(2);return n.Vector3.add(this.min,e)},e.prototype.getDimensions=function(){return n.Vector3.sub(this._max,this._min)},e}();t.Bounds=i},4917:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferGenerator=t.ChunkedBufferGenerator=void 0;var n=r(8913),i=r(5601),o=r(2695),a=r(6631),s=r(4374),l=r(2989),u=r(7464),c=function(){function e(){}return e.fromVoxelMesh=function(e,t,r){var s=e.getVoxelCount(),c=r*n.AppConfig.Get.VOXEL_BUFFER_CHUNK_SIZE,h=Math.min((r+1)*n.AppConfig.Get.VOXEL_BUFFER_CHUNK_SIZE,s);(0,l.ASSERT)(c<s,"Invalid voxel start index");for(var d=h-c,p=f.createVoxelMeshBuffer(d),g=o.GeometryTemplates.getBoxBufferData(new u.Vector3(0,0,0)),m=e.getVoxels(),y=0;y<d;++y){for(var _=m[y+c],b=[_.colour.r,_.colour.g,_.colour.b,_.colour.a],v=_.position.toArray(),x=0;x<i.AppConstants.VoxelMeshBufferComponentOffsets.POSITION;++x)p.position.data[y*i.AppConstants.VoxelMeshBufferComponentOffsets.POSITION+x]=g.custom.position[x]+v[x%3];for(x=0;x<i.AppConstants.VoxelMeshBufferComponentOffsets.COLOUR;++x)p.colour.data[y*i.AppConstants.VoxelMeshBufferComponentOffsets.COLOUR+x]=b[x%4];for(x=0;x<i.AppConstants.VoxelMeshBufferComponentOffsets.NORMAL;++x)p.normal.data[y*i.AppConstants.VoxelMeshBufferComponentOffsets.NORMAL+x]=g.custom.normal[x];for(x=0;x<i.AppConstants.VoxelMeshBufferComponentOffsets.TEXCOORD;++x)p.texcoord.data[y*i.AppConstants.VoxelMeshBufferComponentOffsets.TEXCOORD+x]=g.custom.texcoord[x];for(x=0;x<i.AppConstants.VoxelMeshBufferComponentOffsets.INDICES;++x)p.indices.data[y*i.AppConstants.VoxelMeshBufferComponentOffsets.INDICES+x]=g.indices[x]+y*i.AppConstants.INDICES_PER_VOXEL;if(t.enableAmbientOcclusion){var w=a.OcclusionManager.Get.getOcclusions(_.position,e);for(x=0;x<i.AppConstants.VoxelMeshBufferComponentOffsets.OCCLUSION;++x)p.occlusion.data[y*i.AppConstants.VoxelMeshBufferComponentOffsets.OCCLUSION+x]=w[x]}}return{buffer:p,numElements:p.indices.data.length,moreVoxelsToBuffer:h!==s,progress:c/s}},e.fromBlockMesh=function(e,t){var r,o,a=e.getBlocks(),s=new Map;s.set(15,1),s.set(14,1),s.set(13,.975),s.set(12,.925),s.set(11,.875),s.set(10,.8),s.set(9,.725),s.set(8,.65),s.set(7,.575),s.set(6,.5),s.set(5,.425),s.set(4,.35),s.set(3,.3),s.set(2,9/40),s.set(1,7/40),s.set(0,5/40);var u=a.length,c=t*n.AppConfig.Get.VOXEL_BUFFER_CHUNK_SIZE,h=Math.min((t+1)*n.AppConfig.Get.VOXEL_BUFFER_CHUNK_SIZE,u);(0,l.ASSERT)(c<u,"Invalid block start index");for(var d=h-c,p=e.getVoxelMesh().getChunkedBuffer(t),g=f.createBlockMeshBuffer(d,p.buffer),m=["north","south","up","down","east","west"],y=0,_=0,b=0;b<d;++b)for(var v=b+c,x=e.getBlockLighting(a[v].voxel.position),w=0;w<i.AppConstants.FACES_PER_VOXEL;++w)for(var E=m[w],A=null!==(o=s.get(null!==(r=x[w])&&void 0!==r?r:15))&&void 0!==o?o:1,T=a[v].blockInfo.faces[E].texcoord,S=0;S<i.AppConstants.VERTICES_PER_FACE;++S)g.blockTexcoord.data[y++]=T.u,g.blockTexcoord.data[y++]=T.v,g.lighting.data[_++]=A;return{buffer:g,numElements:g.indices.data.length,moreBlocksToBuffer:p.moreVoxelsToBuffer,progress:p.progress}},e}();t.ChunkedBufferGenerator=c;var f=function(){function e(){}return e.fromMesh=function(t){for(var r,n=t.getTriangleCount(),i=new Map,o=0;o<n;++o){var a=t.getMaterialByTriangle(o),u=null!==(r=i.get(a))&&void 0!==r?r:0;i.set(a,u+1)}var c=[],f=0,h=s.ProgressManager.Get.start("MeshBuffer");return i.forEach((function(r,i){for(var o=e.createMaterialBuffer(r),a=0,u=0;u<n;++u)if(s.ProgressManager.Get.progress(h,f/n),t.getMaterialByTriangle(u)===i){++f;var d=t.getUVTriangle(u);o.position.data.set(d.v0.toArray(),9*a+0),o.position.data.set(d.v1.toArray(),9*a+3),o.position.data.set(d.v2.toArray(),9*a+6),o.texcoord.data.set([d.uv0.u,d.uv0.v],6*a+0),o.texcoord.data.set([d.uv1.u,d.uv1.v],6*a+2),o.texcoord.data.set([d.uv2.u,d.uv2.v],6*a+4),o.normal.data.set(d.n0.toArray(),9*a+0),o.normal.data.set(d.n1.toArray(),9*a+3),o.normal.data.set(d.n2.toArray(),9*a+6),o.indices.data.set([3*a+0,3*a+1,3*a+2],3*a),++a}var p=t.getMaterialByName(i);(0,l.ASSERT)(void 0!==p),c.push({buffer:o,material:p,numElements:o.indices.data.length,materialName:i})})),s.ProgressManager.Get.end(h),c},e.createMaterialBuffer=function(e){return{position:{numComponents:3,data:new Float32Array(3*e*3)},texcoord:{numComponents:2,data:new Float32Array(3*e*2)},normal:{numComponents:3,data:new Float32Array(3*e*3)},indices:{numComponents:3,data:new Uint32Array(3*e)}}},e.createVoxelMeshBuffer=function(e){return{position:{numComponents:3,data:new Float32Array(e*i.AppConstants.VoxelMeshBufferComponentOffsets.POSITION)},colour:{numComponents:4,data:new Float32Array(e*i.AppConstants.VoxelMeshBufferComponentOffsets.COLOUR)},occlusion:{numComponents:4,data:new Float32Array(e*i.AppConstants.VoxelMeshBufferComponentOffsets.OCCLUSION).fill(1)},texcoord:{numComponents:2,data:new Float32Array(e*i.AppConstants.VoxelMeshBufferComponentOffsets.TEXCOORD)},normal:{numComponents:3,data:new Float32Array(e*i.AppConstants.VoxelMeshBufferComponentOffsets.NORMAL)},indices:{numComponents:3,data:new Uint32Array(e*i.AppConstants.VoxelMeshBufferComponentOffsets.INDICES)}}},e.createBlockMeshBuffer=function(e,t){return{position:{numComponents:i.AppConstants.ComponentSize.POSITION,data:t.position.data},colour:{numComponents:i.AppConstants.ComponentSize.COLOUR,data:t.colour.data},occlusion:{numComponents:i.AppConstants.ComponentSize.OCCLUSION,data:t.occlusion.data},texcoord:{numComponents:i.AppConstants.ComponentSize.TEXCOORD,data:t.texcoord.data},normal:{numComponents:i.AppConstants.ComponentSize.NORMAL,data:t.normal.data},indices:{numComponents:i.AppConstants.ComponentSize.INDICES,data:t.indices.data},blockTexcoord:{numComponents:i.AppConstants.ComponentSize.TEXCOORD,data:new Float32Array(e*i.AppConstants.VoxelMeshBufferComponentOffsets.TEXCOORD)},lighting:{numComponents:i.AppConstants.ComponentSize.LIGHTING,data:new Float32Array(e*i.AppConstants.VoxelMeshBufferComponentOffsets.LIGHTING)}}},e}();t.BufferGenerator=f},2830:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArcballCamera=void 0;var n=r(3141),i=r(8913),o=r(6490),a=r(9775),s=r(3419),l=r(7464),u=function(){function e(){this.isUserRotating=!1,this.isUserTranslating=!1,this.up=[0,1,0],this.eye=[0,0,0],this._azimuthRelief=0,this._elevationRelief=0,this._isAngleSnapped=!1,this._angleSnap=!1,this._gl=s.Renderer.Get._gl,this._isPerspective=!0,this._fov=i.AppConfig.Get.CAMERA_FOV_DEGREES*o.degreesToRadians,this._zNear=.5,this._zFar=100,this._aspect=this._gl.canvas.width/this._gl.canvas.height,this._distance=new o.SmoothVariable(i.AppConfig.Get.CAMERA_DEFAULT_DISTANCE_UNITS,i.AppConfig.Get.CAMERA_SMOOTHING),this._azimuth=new o.SmoothVariable(i.AppConfig.Get.CAMERA_DEFAULT_AZIMUTH_RADIANS,i.AppConfig.Get.CAMERA_SMOOTHING),this._elevation=new o.SmoothVariable(i.AppConfig.Get.CAMERA_DEFAULT_ELEVATION_RADIANS,i.AppConfig.Get.CAMERA_SMOOTHING),this._target=new o.SmoothVectorVariable(new l.Vector3(0,0,0),i.AppConfig.Get.CAMERA_SMOOTHING),this._elevation.setClamp(.001,Math.PI-.001),this._distance.setClamp(1,100),this.setCameraMode(this._isPerspective?"perspective":"orthographic")}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.isPerspective=function(){return this._isPerspective},e.prototype.isOrthographic=function(){return!this._isPerspective},e.prototype.isAlignedWithAxis=function(e){var t=Math.abs(this._azimuth.getTarget()%(2*Math.PI)),r=this._elevation.getTarget();switch(e){case"x":return o.AppMath.nearlyEqual(t,o.AppMath.RADIANS_0)||o.AppMath.nearlyEqual(t,o.AppMath.RADIANS_180);case"y":return o.AppMath.nearlyEqual(r,o.AppMath.RADIANS_0,.002)||o.AppMath.nearlyEqual(r,o.AppMath.RADIANS_180,.002);case"z":return o.AppMath.nearlyEqual(t,o.AppMath.RADIANS_90)||o.AppMath.nearlyEqual(t,o.AppMath.RADIANS_270)}},e.prototype.setCameraMode=function(e){this._isPerspective="perspective"===e},e.prototype.toggleAngleSnap=function(){this._angleSnap=!this._angleSnap,this._angleSnap||(this._isAngleSnapped=!1,this._azimuthRelief=0,this._elevationRelief=0)},e.prototype.isAngleSnapEnabled=function(){return this._angleSnap},e.prototype.updateCamera=function(){this._aspect=this._gl.canvas.width/this._gl.canvas.height;var e=a.MouseManager.Get.getMouseDelta();if(e.dx*=i.AppConfig.Get.CAMERA_SENSITIVITY_ROTATION,e.dy*=i.AppConfig.Get.CAMERA_SENSITIVITY_ROTATION,this.isUserRotating&&(this._azimuth.addToTarget(e.dx),this._elevation.addToTarget(e.dy)),this.isUserTranslating){var t=e.dy,r=e.dx,n=-Math.cos(this._elevation.getTarget()-Math.PI/2),s=Math.sin(this._elevation.getTarget()-Math.PI/2);this._target.addToTarget(new l.Vector3(-Math.sin(this._azimuth.getTarget()-Math.PI/2)*t*s,n*t,Math.cos(this._azimuth.getTarget()-Math.PI/2)*t*s));var u=Math.sin(this._azimuth.getTarget()),c=-Math.cos(this._azimuth.getTarget());this._target.addToTarget(new l.Vector3(u*r,0,c*r))}var f=(0,o.clamp)(i.AppConfig.Get.ANGLE_SNAP_RADIUS_DEGREES,0,90)*o.degreesToRadians;if(this._shouldSnapCameraAngle()){var h=!1,d=!1,p=0,g=0,m=this._azimuth.getTarget(),y=this._elevation.getTarget(),_=Math.abs(m%(90*o.degreesToRadians));(_<f||_>90*o.degreesToRadians-f)&&(h=!0,p=(0,o.roundToNearest)(m,90*o.degreesToRadians));for(var b=0,v=[0,90,180].map((function(e){return e*o.degreesToRadians}));b<v.length;b++){var x=v[b];if(x-f<=y&&y<=x+f){d=!0,g=x;break}}h&&d&&(this._azimuth.setTarget(p),this._elevation.setTarget(g),this._isAngleSnapped=!0)}this._isAngleSnapped&&this.isUserRotating&&(this._azimuthRelief+=e.dx,this._elevationRelief+=e.dy,(0,o.between)(this._azimuthRelief,-f,f)&&(0,o.between)(this._elevationRelief,-f,f)||(this._azimuth.setTarget(this._azimuth.getTarget()+2*this._azimuthRelief),this._elevation.setTarget(this._elevation.getTarget()+2*this._elevationRelief),this._isAngleSnapped=!1)),this._isAngleSnapped||(this._azimuthRelief=0,this._elevationRelief=0),this._distance.tick(),this._azimuth.tick(),this._elevation.tick(),this._target.tick();var w=this._target.getActual().toArray();this.eye=[this._distance.getActual()*Math.cos(this._azimuth.getActual())*-Math.sin(this._elevation.getActual())+w[0],this._distance.getActual()*Math.cos(this._elevation.getActual())+w[1],this._distance.getActual()*Math.sin(this._azimuth.getActual())*-Math.sin(this._elevation.getActual())+w[2]]},e.prototype._shouldSnapCameraAngle=function(){return this.isOrthographic()&&this._angleSnap},e.prototype.getCameraPosition=function(e,t){var r=this._azimuth.getActual()+e,n=this._elevation.getActual()+t;return new l.Vector3(this._distance.getActual()*Math.cos(r)*-Math.sin(n),this._distance.getActual()*Math.cos(n),this._distance.getActual()*Math.sin(r)*-Math.sin(n))},e.prototype.getCameraDirection=function(){return this.getCameraPosition(0,0).sub(this._target.getActual()).normalise()},e.prototype.onMouseDown=function(e){1===e.buttons?this.isUserRotating=!0:2===e.buttons&&(this.isUserTranslating=!0)},e.prototype.onMouseUp=function(e){this.isUserRotating=!1,this.isUserTranslating=!1},e.prototype.onWheelScroll=function(e){this._distance.addToTarget(e.deltaY*i.AppConfig.Get.CAMERA_SENSITIVITY_ZOOM)},e.prototype.getProjectionMatrix=function(){if(this._isPerspective)return n.m4.perspective(this._fov,this._aspect,this._zNear,this._zFar);var e=this._distance.getActual()/3.6;return n.m4.ortho(-e*this._aspect,e*this._aspect,-e,e,-1e3,1e3)},e.prototype.getCameraMatrix=function(){return n.m4.lookAt(this.eye,this._target.getActual().toArray(),this.up)},e.prototype.getViewMatrix=function(){return n.m4.inverse(this.getCameraMatrix())},e.prototype.getViewProjection=function(){return n.m4.multiply(this.getProjectionMatrix(),this.getViewMatrix())},e.prototype.getWorldMatrix=function(){return n.m4.identity()},e.prototype.getWorldViewProjection=function(){return n.m4.multiply(this.getViewProjection(),this.getWorldMatrix())},e.prototype.getWorldInverseTranspose=function(){return n.m4.transpose(n.m4.inverse(this.getWorldMatrix()))},e.prototype.getInverseWorldViewProjection=function(){return n.m4.inverse(this.getWorldViewProjection())},e.prototype.onZoomOut=function(){this._distance.addToTarget(1)},e.prototype.onZoomIn=function(){this._distance.addToTarget(-1)},e.prototype.reset=function(){for(this._target.setTarget(new l.Vector3(0,0,0)),this._distance.setTarget(i.AppConfig.Get.CAMERA_DEFAULT_DISTANCE_UNITS),this._azimuth.setTarget(i.AppConfig.Get.CAMERA_DEFAULT_AZIMUTH_RADIANS),this._elevation.setTarget(i.AppConfig.Get.CAMERA_DEFAULT_ELEVATION_RADIANS);this._azimuth.getActual()<i.AppConfig.Get.CAMERA_DEFAULT_AZIMUTH_RADIANS-Math.PI;)this._azimuth.setActual(this._azimuth.getActual()+2*Math.PI);for(;this._azimuth.getActual()>i.AppConfig.Get.CAMERA_DEFAULT_ELEVATION_RADIANS+Math.PI;)this._azimuth.setActual(this._azimuth.getActual()-2*Math.PI)},e.prototype.getAspect=function(){return this._aspect},e.prototype.setAspect=function(e){this._aspect=e},e}();t.ArcballCamera=u,e.exports.ArcballCamera=u},4405:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RGBAColours=t.RGBAUtil=void 0;var n,i,o=r(8913);(i=t.RGBAUtil||(t.RGBAUtil={})).toString=function(e){return"(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},i.random=function(){return{r:Math.random(),g:Math.random(),b:Math.random(),a:1}},i.toHexString=function(e){var t=Math.floor(255*e.r).toString(16).padStart(2,"0"),r=Math.floor(255*e.g).toString(16).padStart(2,"0"),n=Math.floor(255*e.b).toString(16).padStart(2,"0");return"#".concat(t).concat(r).concat(n)},i.fromHexString=function(e){return{r:parseInt(e.substring(1,3),16)/255,g:parseInt(e.substring(3,5),16)/255,b:parseInt(e.substring(5,7),16)/255,a:1}},i.toUint8String=function(e){return"(".concat(Math.floor(255*e.r),", ").concat(Math.floor(255*e.g),", ").concat(Math.floor(255*e.b),", ").concat(Math.floor(255*e.a),")")},i.toRGBA255=function(e){return{r:255*e.r,g:255*e.r,b:255*e.r,a:255*e.r}},i.fromRGBA255=function(e){return{r:e.r/255,g:e.g/255,b:e.b/255,a:e.a/255}},i.add=function(e,t){e.r+=t.r,e.g+=t.g,e.b+=t.b,e.a+=t.a},i.lerp=function(e,t,r){return{r:e.r*(1-r)+t.r*r,g:e.g*(1-r)+t.g*r,b:e.b*(1-r)+t.b*r,a:e.a*(1-r)+t.a*r}},i.average=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r={r:0,g:0,b:0,a:0},n=0;n<e.length;++n)r.r+=e[n].r,r.g+=e[n].g,r.b+=e[n].b,r.a+=e[n].a;return r.r/=e.length,r.g/=e.length,r.b/=e.length,r.a/=e.length,r},i.squaredDistance=function(e,t){var r=0;return r+=(e.r-t.r)*(e.r-t.r),r+=(e.g-t.g)*(e.g-t.g),(r+=(e.b-t.b)*(e.b-t.b))+(e.a-t.a)*(e.a-t.a)*o.AppConfig.Get.ALPHA_BIAS},i.copy=function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}},i.copy255=function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}},i.toArray=function(e){return[e.r,e.g,e.b,e.a]},i.bin=function(e,t){return{r:Math.floor(Math.floor(e.r*t)*(255/t)),g:Math.floor(Math.floor(e.g*t)*(255/t)),b:Math.floor(Math.floor(e.b*t)*(255/t)),a:Math.floor(Math.ceil(e.a*t)*(255/t))}},i.hash=function(e,t){var r=Math.floor(e.r*t);return((r=((r=(r<<8)+Math.floor(e.g*t))<<8)+Math.floor(e.b*t))<<8)+Math.floor(e.a*t)},i.hash255=function(e){var t=e.r;return((t=((t=(t<<8)+e.g)<<8)+e.b)<<8)+e.a},(n=t.RGBAColours||(t.RGBAColours={})).RED={r:1,g:0,b:0,a:1},n.GREEN={r:0,g:1,b:0,a:1},n.BLUE={r:0,g:0,b:1,a:1},n.YELLOW={r:1,g:1,b:0,a:1},n.CYAN={r:0,g:1,b:1,a:1},n.MAGENTA={r:1,g:0,b:1,a:1},n.WHITE={r:1,g:1,b:1,a:1},n.BLACK={r:0,g:0,b:0,a:1}},8913:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppConfig=void 0;var n=r(3243),i=function(){function e(){this.RELEASE_MODE=!1,this.RELEASE_VERSION="0.7.2d",this.VOXEL_BUFFER_CHUNK_SIZE=5e3,this.AMBIENT_OCCLUSION_OVERRIDE_CORNER=!0,this.USE_WORKER_THREAD=!1,this.MULTISAMPLE_COUNT=16,this.ALPHA_BIAS=1,this.ANGLE_SNAP_RADIUS_DEGREES=10,this.RENDER_TRIANGLE_THRESHOLD=1e6,this.MAXIMUM_IMAGE_MEM_ALLOC=2048,this.CAMERA_FOV_DEGREES=30,this.CAMERA_DEFAULT_DISTANCE_UNITS=18,this.CAMERA_DEFAULT_AZIMUTH_RADIANS=-1,this.CAMERA_DEFAULT_ELEVATION_RADIANS=1.3,this.CAMERA_SENSITIVITY_ROTATION=.005,this.CAMERA_SENSITIVITY_ZOOM=.005,this.CONSTRAINT_MAXIMUM_HEIGHT=380,this.DITHER_MAGNITUDE=32,this.SMOOTHNESS_MAX=3,this.CAMERA_SMOOTHING=.1,this.VIEWPORT_BACKGROUND_COLOUR={r:.125,g:.125,b:.125,a:1},this.FRESNEL_EXPONENT=3,this.FRESNEL_MIX=.3}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.dumpConfig=function(){(0,n.LOG)(this)},e}();t.AppConfig=i},5601:(e,t)=>{"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.AppRuntimeConstants=t.AppConstants=void 0,(r=t.AppConstants||(t.AppConstants={})).FACES_PER_VOXEL=6,r.VERTICES_PER_FACE=4,r.INDICES_PER_VOXEL=24,r.COMPONENT_PER_SIZE_OFFSET=r.FACES_PER_VOXEL*r.VERTICES_PER_FACE,function(e){e.LIGHTING=1,e.TEXCOORD=2,e.POSITION=3,e.COLOUR=4,e.NORMAL=3,e.INDICES=3,e.OCCLUSION=4}(n=r.ComponentSize||(r.ComponentSize={})),(i=r.VoxelMeshBufferComponentOffsets||(r.VoxelMeshBufferComponentOffsets={})).LIGHTING=n.LIGHTING*r.COMPONENT_PER_SIZE_OFFSET,i.TEXCOORD=n.TEXCOORD*r.COMPONENT_PER_SIZE_OFFSET,i.POSITION=n.POSITION*r.COMPONENT_PER_SIZE_OFFSET,i.COLOUR=n.COLOUR*r.COMPONENT_PER_SIZE_OFFSET,i.NORMAL=n.NORMAL*r.COMPONENT_PER_SIZE_OFFSET,i.INDICES=36,i.OCCLUSION=n.OCCLUSION*r.COMPONENT_PER_SIZE_OFFSET,r.DATA_VERSION=3105;var o=function(){function e(){this.FALLABLE_BLOCKS=["minecraft:anvil","minecraft:lime_concrete_powder","minecraft:orange_concrete_powder","minecraft:black_concrete_powder","minecraft:brown_concrete_powder","minecraft:cyan_concrete_powder","minecraft:light_gray_concrete_powder","minecraft:purple_concrete_powder","minecraft:magenta_concrete_powder","minecraft:light_blue_concrete_powder","minecraft:yellow_concrete_powder","minecraft:white_concrete_powder","minecraft:blue_concrete_powder","minecraft:red_concrete_powder","minecraft:gray_concrete_powder","minecraft:pink_concrete_powder","minecraft:green_concrete_powder","minecraft:dragon_egg","minecraft:gravel","minecraft:pointed_dripstone","minecraft:red_sand","minecraft:sand","minecraft:scaffolding"],this.TRANSPARENT_BLOCKS=["minecraft:frosted_ice","minecraft:glass","minecraft:white_stained_glass","minecraft:orange_stained_glass","minecraft:magenta_stained_glass","minecraft:light_blue_stained_glass","minecraft:yellow_stained_glass","minecraft:lime_stained_glass","minecraft:pink_stained_glass","minecraft:gray_stained_glass","minecraft:light_gray_stained_glass","minecraft:cyan_stained_glass","minecraft:purple_stained_glass","minecraft:blue_stained_glass","minecraft:brown_stained_glass","minecraft:green_stained_glass","minecraft:red_stained_glass","minecraft:black_stained_glass","minecraft:ice","minecraft:oak_leaves","minecraft:spruce_leaves","minecraft:birch_leaves","minecraft:jungle_leaves","minecraft:acacia_leaves","minecraft:dark_oak_leaves","minecraft:mangrove_leaves","minecraft:azalea_leaves","minecraft:flowering_azalea_leaves","minecraft:slime_block","minecraft:honey_block"],this.GRASS_LIKE_BLOCKS=["minecraft:grass_block","minecraft:grass_path","minecraft:podzol","minecraft:crimson_nylium","minecraft:warped_nylium","minecraft:mycelium","minecraft:farmland"],this.EMISSIVE_BLOCKS=["minecraft:respawn_anchor","minecraft:magma_block","minecraft:sculk_catalyst","minecraft:crying_obsidian","minecraft:shroomlight","minecraft:sea_lantern","minecraft:jack_o_lantern","minecraft:glowstone","minecraft:pearlescent_froglight","minecraft:verdant_froglight","minecraft:ochre_froglight"]}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e}();t.AppRuntimeConstants=o},4777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ditherer=void 0;var n=r(8913),i=r(2989),o=function(){function e(){}return e.ditherRandom=function(e){var t=(Math.random()-.5)*n.AppConfig.Get.DITHER_MAGNITUDE;e.r+=t,e.g+=t,e.b+=t},e.ditherOrdered=function(e,t){var r=this._getThresholdValue(Math.abs(t.x%4),Math.abs(t.y%4),Math.abs(t.z%4))*n.AppConfig.Get.DITHER_MAGNITUDE;e.r+=r,e.g+=r,e.b+=r},e._getThresholdValue=function(t,r,n){(0,i.ASSERT)(0<=t&&t<4&&0<=r&&r<4&&0<=n&&n<4);var o=t+4*r+16*n;return(0,i.ASSERT)(0<=o&&o<64),e._mapMatrix[o]/64-.5},e._mapMatrix=[0,16,2,18,48,32,50,34,6,22,4,20,54,38,52,36,24,40,26,42,8,56,10,58,30,46,28,44,14,62,12,60,3,19,5,21,51,35,53,37,1,17,7,23,49,33,55,39,27,43,29,45,11,59,13,61,25,41,31,47,9,57,15,63],e}();t.Ditherer=o},9712:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=t.EAppEvent=void 0;var n,i=r(2989),o=r(3243);!function(e){e[e.onTaskStart=0]="onTaskStart",e[e.onTaskProgress=1]="onTaskProgress",e[e.onTaskEnd=2]="onTaskEnd",e[e.onComboBoxChanged=3]="onComboBoxChanged"}(n=t.EAppEvent||(t.EAppEvent={}));var a=function(){function e(){this._eventsToListeners=new Map}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.add=function(e,t){this._eventsToListeners.has(e)||this._eventsToListeners.set(e,[]),(0,i.ASSERT)(void 0!==this._eventsToListeners.get(e),"No event listener list"),this._eventsToListeners.get(e).push(t)},e.prototype.broadcast=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];(0,o.LOG)("[BROADCAST]",n[e],t);var i=this._eventsToListeners.get(e);if(i)for(var a=0,s=i;a<s.length;a++)(0,s[a])(t)},e}();t.EventManager=a},7694:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IExporter=void 0;var r=function(){function e(){}return e.prototype.getFormatFilter=function(){return{name:this.getFormatName(),extensions:[this.getFileExtension()]}},e}();t.IExporter=r},2758:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExporterFactory=void 0;var n=r(2989),i=r(3049),o=r(4531),a=r(2537),s=r(5307),l=r(9923),u=function(){function e(){}return e.GetExporter=function(e){switch(e){case"schematic":return new l.Schematic;case"litematic":return new i.Litematic;case"obj":return new a.ObjExporter;case"schem":return new s.SchemExporter;case"nbt":return new o.NBTExporter;default:(0,n.ASSERT)(!1)}},e}();t.ExporterFactory=u},3049:function(e,t,r){"use strict";var n,i=r(3085).lW,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Litematic=void 0;var a=r(6490),s=r(2989),l=r(7464),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype._getBufferIndex=function(e){return this._sizeVector.z*this._sizeVector.x*e.y+this._sizeVector.x*e.z+e.x},t.prototype._createBlockMapping=function(e){var t={"minecraft:air":0};return e.getBlockPalette().forEach((function(e,r){t[e]=r+1})),t},t.prototype._createBlockBuffer=function(e,t){var r=this,n=this._sizeVector.x*this._sizeVector.y*this._sizeVector.z,i=e.getVoxelMesh().getBounds(),o=new Uint32Array(n);return e.getBlocks().forEach((function(e){var n=l.Vector3.sub(e.voxel.position,i.min),a=r._getBufferIndex(n);o[a]=t[e.blockInfo.name||"minecraft:air"]})),o},t.prototype._createBlockStates=function(e,t){for(var r=this._encodeBlockBuffer(e,t),n=8*r.length,i=new Array(Math.ceil(n/64)),o=0,a=n;a>0;a-=64){var s=(a-32)/8,l=0;l=((l=((l=((l=(l<<8)+r[s+0])<<8)+r[s+1])<<8)+r[s+2])<<8)+r[s+3];var u=(a-64)/8,c=0;c=((c=((c=((c=(c<<8)+r[u+0])<<8)+r[u+1])<<8)+r[u+2])<<8)+r[u+3],i[o++]=[c,l]}return i},t.prototype._encodeBlockBuffer=function(e,t){var r=this._createBlockBuffer(e,t),n=Object.keys(t).length,o=Math.ceil(Math.log2(n-1));(0,s.ASSERT)(o>=1,"Stride too small");for(var l=r.length*o,u=(0,a.ceilToNearest)(l,64),c=u-l,f=u/8,h=i.alloc(f),d=Math.floor(c/8),p=0;p<d;++p)h[p]=0;var g=0,m=c-8*d,y=d;for(p=r.length-1;p>=0;--p)for(var _=0;_<o;++_)8===m&&(h[y]=g,++y,g=0,m=0),g=(g<<1)+(r[p]>>o-_-1&1),++m;return h[y]=g,++y,g=0,m=0,h},t.prototype._createBlockStatePalette=function(e){return Array(Object.keys(e).length)},t.prototype._convertToNBT=function(e){this._sizeVector.x,this._sizeVector.y,this._sizeVector.z;var t=this._createBlockMapping(e);this._createBlockStates(e,t),this._createBlockStatePalette(t),e.getBlocks().length},t.prototype.getFormatFilter=function(){return{name:this.getFormatName(),extensions:["litematic"]}},t.prototype.getFormatName=function(){return"Litematic"},t.prototype.getFileExtension=function(){return"litematic"},t.prototype.export=function(e,t){var r,n=null===(r=e.getVoxelMesh())||void 0===r?void 0:r.getBounds();return this._sizeVector=l.Vector3.sub(n.max,n.min).add(1),this._convertToNBT(e),!1},t}(r(7694).IExporter);t.Litematic=u},4531:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.NBTExporter=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getFormatFilter=function(){return{name:this.getFormatName(),extensions:["nbt"]}},t.prototype.getFormatName=function(){return"Structure Blocks"},t.prototype.getFileExtension=function(){return"nbt"},t.prototype.export=function(e,t){return!1},t._getBufferIndex=function(e,t){return t.x+t.z*e.x+t.y*e.x*e.z},t}(r(7694).IExporter);t.NBTExporter=o},2537:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjExporter=void 0;var a=o(r(6470)),s=r(2989),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getFormatFilter=function(){return{name:"Wavefront Obj",extensions:["obj"]}},t.prototype.getFileExtension=function(){return"obj"},t.prototype.getFormatName=function(){return"Wavefront OBJ"},t.prototype.export=function(e,t){(0,s.ASSERT)(a.default.isAbsolute(t));var r=a.default.parse(t),n=t,i=a.default.join(r.dir,r.name+".mtl"),o=a.default.join(r.dir,r.name+".png");return this._exportOBJ(n,e,r.name+".mtl"),this._exportMTL(i,o,e),!0},t.prototype._exportOBJ=function(e,t,r){var n=[],i=0;do{n.push(t.getChunkedBuffer(i)),++i}while(n[n.length-1].moreBlocksToBuffer);var o=0;n.forEach((function(e,t){for(var r=e.buffer,n=0,i=0;i<r.indices.data.length;++i)n=Math.max(n,r.indices.data[i]),r.indices.data[i]+=o;o+=n+1}));var a=0,s=0,l=0,u=0,c=0;n.forEach((function(e){var t=e.buffer;a+=t.position.data.length,s+=t.normal.data.length,l+=t.texcoord.data.length,u+=t.blockTexcoord.data.length,c+=t.indices.data.length}));var f=new Float32Array(a),h=new Float32Array(s),d=new Float32Array(l),p=new Float32Array(u),g=new Float32Array(c),m=0,y=0,_=0,b=0,v=0;n.forEach((function(e){var t=e.buffer;f.set(t.position.data,m),m+=t.position.data.length,h.set(t.normal.data,y),y+=t.normal.data.length,d.set(t.texcoord.data,_),_+=t.texcoord.data.length,p.set(t.blockTexcoord.data,b),b+=t.blockTexcoord.data.length,g.set(t.indices.data,v),v+=t.indices.data.length}))},t.prototype._exportMTL=function(e,t,r){},t}(r(7694).IExporter);t.ObjExporter=l},5307:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SchemExporter=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getFormatFilter=function(){return{name:this.getFormatName(),extensions:["schem"]}},t.prototype.getFormatName=function(){return"Sponge Schematic"},t.prototype.getFileExtension=function(){return"schem"},t.prototype.export=function(e,t){return!1},t._getBufferIndex=function(e,t){return t.x+t.z*e.x+t.y*e.x*e.z},t.SCHEMA_VERSION=2,t}(r(7694).IExporter);t.SchemExporter=o},9923:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Schematic=void 0;var o=r(1535),a=r(3243),s=r(7464),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._convertToNBT=function(e){for(var t=this._sizeVector.x*this._sizeVector.y*this._sizeVector.z,r=Array(t),n=Array(t),i=e.getVoxelMesh().getBounds(),l={},u=e.getBlocks(),c=new Set,f=0,h=0,d=u;h<d.length;h++){var p=d[h],g=s.Vector3.sub(p.voxel.position,i.min),m=this._getBufferIndex(g,this._sizeVector);if(p.blockInfo.name in l){var y=l[p.blockInfo.name];r[m]=new Int8Array([y.id])[0],n[m]=new Int8Array([y.meta])[0]}else r[m]=1,n[m]=0,c.add(p.blockInfo.name),++f}c.size>0&&(o.StatusHandler.Get.add("warning","".concat(f," blocks (").concat(c.size," unique) are not supported by the .schematic format, Stone block are used in their place. Try using the schematic-friendly palette, or export using .litematica"),o.StatusID.SchematicUnsupportedBlocks),(0,a.LOG_WARN)(c))},t.prototype._getBufferIndex=function(e,t){return t.z*t.x*e.y+t.x*e.z+e.x},t.prototype.getFormatFilter=function(){return{name:this.getFormatName(),extensions:["schematic"]}},t.prototype.getFormatName=function(){return"Schematic"},t.prototype.getFileExtension=function(){return"schematic"},t.prototype.export=function(e,t){var r=e.getVoxelMesh().getBounds();return this._sizeVector=s.Vector3.sub(r.max,r.min).add(1),this._convertToNBT(e),!1},t}(r(7694).IExporter);t.Schematic=l},2695:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugGeometryTemplates=t.GeometryTemplates=void 0;var a=o(r(3141)),s=r(7168),l=r(3340),u=r(8218),c=r(2989),f=r(7464),h=function(){function e(){}return e.getTriangleBufferData=function(e){var t=e.getNormal();return{custom:{position:[e.v0.x,e.v0.y,e.v0.z,e.v1.x,e.v1.y,e.v1.z,e.v2.x,e.v2.y,e.v2.z],texcoord:[e.uv0.u,e.uv0.v,e.uv1.u,e.uv1.v,e.uv2.u,e.uv2.v],normal:[t.x,t.y,t.z,t.x,t.y,t.z,t.x,t.y,t.z]},indices:new Uint32Array([0,1,2])}},e.getBoxBufferData=function(t){var r={custom:{position:new Array(72),texcoord:new Array(48),normal:new Array(72)},indices:new Uint32Array(72)};r.custom.position=Array.from(e._default_cube.position),r.custom.normal=Array.from(e._default_cube.normal),r.custom.texcoord=Array.from(e._default_cube.texcoord),r.indices=Uint32Array.from(e._default_cube.indices);for(var n=0;n<72;n+=3)r.custom.position[n+0]+=t.x,r.custom.position[n+1]+=t.y,r.custom.position[n+2]+=t.z;return r},e._default_cube=a.primitives.createCubeVertices(1),e}();t.GeometryTemplates=h;var d=function(){function e(){}return e.cross=function(e,t,r){return{indices:new Uint32Array([0,1,2,3,4,5]),custom:{position:[e.x+t,e.y,e.z,e.x-t,e.y,e.z,e.x,e.y+t,e.z,e.x,e.y-t,e.z,e.x,e.y,e.z+t,e.x,e.y,e.z-t],colour:[r.r,r.g,r.b,r.a,r.r,r.g,r.b,r.a,r.r,r.g,r.b,r.a,r.r,r.g,r.b,r.a,r.r,r.g,r.b,r.a]}}},e.line=function(e,t,r){return{indices:new Uint32Array([0,1]),custom:{position:[e.x,e.y,e.z,t.x,t.y,t.z],colour:[r.r,r.g,r.b,r.a,r.r,r.g,r.b,r.a]}}},e.cube=function(e,t,r){var n=f.Vector3.sub(e,t/2),i=f.Vector3.add(e,t/2),o=new s.Bounds(n,i);return this.bounds(o,r)},e.bounds=function(e,t){return{indices:new Uint32Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),custom:{position:[e.min.x,e.min.y,e.min.z,e.max.x,e.min.y,e.min.z,e.max.x,e.min.y,e.max.z,e.min.x,e.min.y,e.max.z,e.min.x,e.max.y,e.min.z,e.max.x,e.max.y,e.min.z,e.max.x,e.max.y,e.max.z,e.min.x,e.max.y,e.max.z],colour:[t.r,t.g,t.b,t.a,t.r,t.g,t.b,t.a,t.r,t.g,t.b,t.a,t.r,t.g,t.b,t.a,t.r,t.g,t.b,t.a,t.r,t.g,t.b,t.a,t.r,t.g,t.b,t.a,t.r,t.g,t.b,t.a]}}},e.circle=function(t,r,n,i,o){void 0===o&&(o=8);for(var a=[],s=[],l=[],u=e._generateCirclePoints(t,r,n,o),c=0;c<o;++c){var f=u[c];s.push(f.x,f.y,f.z),a.push(c,(c+1)%o),l.push(i.r,i.g,i.b,i.a)}return{indices:new Uint32Array(a),custom:{position:s,colour:l}}},e.cone=function(t,r,n,i,o,a){for(var s=[],l=[],u=[],c=4*a,h=f.Vector3.add(t,f.Vector3.mulScalar(n.copy().normalise(),-r)),d=e._generateCirclePoints(h,n,i,c),p=0;p<c;++p){var g=d[p];l.push(g.x,g.y,g.z),s.push(p,(p+1)%c),u.push(o.r,o.g,o.b,o.a)}l.push(t.x,t.y,t.z),u.push(o.r,o.g,o.b,o.a);var m=c;for(p=0;p<4;++p){var y=p*a;s.push(m,y)}return{indices:new Uint32Array(s),custom:{position:l,colour:u}}},e.arrow=function(t,r,n){var i=e.line(t,r,n),o=.15*f.Vector3.sub(r,t).magnitude(),a=.15*o,s=f.Vector3.sub(r,t).normalise(),u=e.cone(r,o,s,a,n,1);return(0,l.MergeAttributeData)(i,u)},e.gridX=function(t,r){var n=new l.RenderBuffer([{name:"position",numComponents:3},{name:"colour",numComponents:4}]);if(n.add(e.line(new f.Vector3(0,-t.y/2,-t.z/2),new f.Vector3(0,-t.y/2,t.z/2),e.COLOUR_MAJOR)),n.add(e.line(new f.Vector3(0,t.y/2,-t.z/2),new f.Vector3(0,t.y/2,t.z/2),e.COLOUR_MAJOR)),n.add(e.line(new f.Vector3(0,-t.y/2,-t.z/2),new f.Vector3(0,t.y/2,-t.z/2),e.COLOUR_MAJOR)),n.add(e.line(new f.Vector3(0,-t.y/2,t.z/2),new f.Vector3(0,t.y/2,t.z/2),e.COLOUR_MAJOR)),r){(0,c.ASSERT)(r>0);for(var i=-t.y/2;i<t.y/2;i+=r)n.add(e.line(new f.Vector3(0,i,-t.z/2),new f.Vector3(0,i,t.z/2),e.COLOUR_MINOR));for(var o=-t.z/2;o<t.z/2;o+=r)n.add(e.line(new f.Vector3(0,-t.y/2,o),new f.Vector3(0,t.y/2,o),e.COLOUR_MINOR))}return n},e.gridY=function(t,r){var n=new l.RenderBuffer([{name:"position",numComponents:3},{name:"colour",numComponents:4}]);if(n.add(e.line(new f.Vector3(-t.x/2,0,-t.z/2),new f.Vector3(-t.x/2,0,t.z/2),e.COLOUR_MAJOR)),n.add(e.line(new f.Vector3(t.x/2,0,-t.z/2),new f.Vector3(t.x/2,0,t.z/2),e.COLOUR_MAJOR)),n.add(e.line(new f.Vector3(-t.x/2,0,-t.z/2),new f.Vector3(t.x/2,0,-t.z/2),e.COLOUR_MAJOR)),n.add(e.line(new f.Vector3(-t.x/2,0,t.z/2),new f.Vector3(t.x/2,0,t.z/2),e.COLOUR_MAJOR)),r){(0,c.ASSERT)(r>0);for(var i=-t.x/2;i<t.x/2;i+=r)n.add(e.line(new f.Vector3(i,0,-t.z/2),new f.Vector3(i,0,t.z/2),e.COLOUR_MINOR));for(var o=-t.z/2;o<t.z/2;o+=r)n.add(e.line(new f.Vector3(-t.x/2,0,o),new f.Vector3(t.x/2,0,o),e.COLOUR_MINOR))}return n},e.gridZ=function(t,r){var n=new l.RenderBuffer([{name:"position",numComponents:3},{name:"colour",numComponents:4}]);if(n.add(e.line(new f.Vector3(-t.x/2,-t.y/2,0),new f.Vector3(-t.x/2,t.y/2,0),e.COLOUR_MAJOR)),n.add(e.line(new f.Vector3(t.x/2,-t.y/2,0),new f.Vector3(t.x/2,t.y/2,0),e.COLOUR_MAJOR)),n.add(e.line(new f.Vector3(-t.x/2,-t.y/2,0),new f.Vector3(t.x/2,-t.y/2,0),e.COLOUR_MAJOR)),n.add(e.line(new f.Vector3(-t.x/2,t.y/2,0),new f.Vector3(t.x/2,t.y/2,0),e.COLOUR_MAJOR)),r){(0,c.ASSERT)(r>0);for(var i=-t.x/2;i<t.x/2;i+=r)n.add(e.line(new f.Vector3(i,-t.y/2,0),new f.Vector3(i,t.y/2,0),e.COLOUR_MINOR));for(var o=-t.y/2;o<t.y/2;o+=r)n.add(e.line(new f.Vector3(-t.x/2,o,0),new f.Vector3(t.x/2,o,0),e.COLOUR_MINOR))}return n},e.meshWireframe=function(t,r){for(var n,i=new l.RenderBuffer([{name:"position",numComponents:3},{name:"colour",numComponents:4}]),o=new f.Vector3(0,0,0),a=new f.Vector3(0,0,0),s=new f.Vector3(0,0,0),u=0;u<t.getTriangleCount();++u)o=(n=t.getVertices(u)).v0,a=n.v1,s=n.v2,i.add(e.line(o,a,r)),i.add(e.line(a,s,r)),i.add(e.line(s,o,r));return i},e.voxelMeshWireframe=function(t,r,n){for(var i=new l.RenderBuffer([{name:"position",numComponents:3},{name:"colour",numComponents:4}]),o=t.getBounds().getDimensions(),a=new f.Vector3(o.x%2==0?0:-.5,o.y%2==0?0:-.5,o.z%2==0?0:-.5),s=0,u=t.getVoxels();s<u.length;s++){var c=u[s];i.add(e.cube(f.Vector3.mulScalar(f.Vector3.add(c.position,a),n),n,r))}return i},e.meshNormals=function(t,r){for(var n=new l.RenderBuffer([{name:"position",numComponents:3},{name:"colour",numComponents:4}]),i=0;i<t.getTriangleCount();++i){var o=t.getVertices(i),a=t.getNormals(i),s=f.Vector3.add(a.v0,a.v1).add(a.v2).divScalar(3),c=new u.Triangle(o.v0,o.v1,o.v2).getCentre(),h=f.Vector3.add(c,f.Vector3.mulScalar(s,.5));n.add(e.arrow(c,h,r))}return n},e._generateCirclePoints=function(e,t,r,n){var i=[{i:0,v:(t=t.copy().normalise()).x},{i:1,v:t.y},{i:2,v:t.z}],o=i.sort((function(e,t){return t.v-e.v}));o[2].v=0;var a=o[0].v;o[0].v=o[1].v,o[1].v=a,o=i.sort((function(e,t){return e.i-t.i}));var s=new f.Vector3(i[0].v,i[1].v,i[2].v),l=f.Vector3.cross(t,s);s.normalise(),l.normalise();for(var u=[],c=0;c<n;++c){var h=c/n*Math.PI*2,d=e.copy().add(f.Vector3.mulScalar(s,r*Math.cos(h))).add(f.Vector3.mulScalar(l,r*Math.sin(h)));u.push(d)}return u},e.COLOUR_MINOR={r:.5,g:.5,b:.5,a:.3},e.COLOUR_MAJOR={r:1,g:1,b:1,a:.3},e}();t.DebugGeometryTemplates=d},8333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IImporter=void 0;t.IImporter=function(){}},1801:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImporterFactor=void 0;var n=r(2989),i=r(4471),o=function(){function e(){}return e.GetImporter=function(e){if("obj"===e)return new i.ObjImporter;(0,n.ASSERT)(!1)},e}();t.ImporterFactor=o},4471:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjImporter=void 0;var a=o(r(6470)),s=r(6490),l=r(4790),u=r(9882),c=r(2989),f=r(3243),h=r(4507),d=r(4507),p=r(4507),g=r(7464),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._vertices=[],t._normals=[],t._uvs=[],t._tris=[],t._currentMaterialName="DEFAULT_UNASSIGNED",t._objParsers=[{regex:(new h.RegExpBuilder).add(/^usemtl/).add(/ /).add(d.REGEX_NZ_ANY,"name").toRegExp(),delegate:function(e){t._currentMaterialName=e.name.trim(),(0,c.ASSERT)(t._currentMaterialName,"invalid material name")}},{regex:(new h.RegExpBuilder).add(/^v/).addNonzeroWhitespace().add(p.REGEX_NUMBER,"x").addNonzeroWhitespace().add(p.REGEX_NUMBER,"y").addNonzeroWhitespace().add(p.REGEX_NUMBER,"z").toRegExp(),delegate:function(e){var r=parseFloat(e.x),n=parseFloat(e.y),i=parseFloat(e.z);(0,s.checkNaN)(r,n,i),t._vertices.push(new g.Vector3(r,n,i))}},{regex:(new h.RegExpBuilder).add(/^vn/).addNonzeroWhitespace().add(p.REGEX_NUMBER,"x").addNonzeroWhitespace().add(p.REGEX_NUMBER,"y").addNonzeroWhitespace().add(p.REGEX_NUMBER,"z").toRegExp(),delegate:function(e){var r=parseFloat(e.x),n=parseFloat(e.y),i=parseFloat(e.z);(0,s.checkNaN)(r,n,i),t._normals.push(new g.Vector3(r,n,i))}},{regex:(new h.RegExpBuilder).add(/^vt/).addNonzeroWhitespace().add(p.REGEX_NUMBER,"u").addNonzeroWhitespace().add(p.REGEX_NUMBER,"v").toRegExp(),delegate:function(e){var r=parseFloat(e.u),n=parseFloat(e.v);(0,s.checkNaN)(r,n),t._uvs.push(new u.UV(r,n))}},{regex:(new h.RegExpBuilder).add(/^f/).addNonzeroWhitespace().add(/.*/,"line").toRegExp(),delegate:function(e){var r=e.line.trim().split(" ").filter((function(e){return 0!==e.length}));r.length;for(var n=[],i=0,o=r;i<o.length;i++){var a=o[i].split("/");switch(a.length){case 1:var s=parseInt(a[0]);n.push({positionIndex:s,texcoordIndex:s,normalIndex:s});break;case 2:var l=parseInt(a[0]),u=parseInt(a[1]);n.push({positionIndex:l,texcoordIndex:u});break;case 3:l=parseInt(a[0]),u=parseInt(a[1]);var f=parseInt(a[2]);n.push({positionIndex:l,texcoordIndex:u,normalIndex:f});break;default:throw new c.AppError("Face data has unexpected number of vertex data: ".concat(a.length))}}for(var h=n[0],d=1;d<n.length-1;++d){var p=n[d],g=n[d+1],m={positionIndices:{x:h.positionIndex-1,y:p.positionIndex-1,z:g.positionIndex-1},material:t._currentMaterialName};(h.normalIndex||p.normalIndex||g.normalIndex)&&((0,c.ASSERT)(h.normalIndex&&p.normalIndex&&g.normalIndex),m.normalIndices={x:h.normalIndex-1,y:p.normalIndex-1,z:g.normalIndex-1}),(h.texcoordIndex||p.texcoordIndex||g.texcoordIndex)&&((0,c.ASSERT)(h.texcoordIndex&&p.texcoordIndex&&g.texcoordIndex),m.texcoordIndices={x:h.texcoordIndex-1,y:p.texcoordIndex-1,z:g.texcoordIndex-1}),t._tris.push(m)}}}],t}return i(t,e),t.prototype.parse=function(e){this._parseOBJ(e)},t.prototype.toMesh=function(){return new l.Mesh(this._vertices,this._normals,this._uvs,this._tris,new Map)},t.prototype._parseOBJ=function(e){if(e.includes("�"))throw new c.AppError("Unrecognised character found, please encode <b>".concat(a.default,"</b> using UTF-8"));e.replace("\r","");for(var t=0,r=e.split("\n");t<r.length;t++){var n=r[t];this.parseOBJLine(n)}},t.prototype.parseOBJLine=function(e){for(var t=0,r=this._objParsers;t<r.length;t++){var n=r[t],i=n.regex.exec(e);if(i&&i.groups){try{n.delegate(i.groups)}catch(t){if((0,f.LOG_ERROR)("Caught",t),t instanceof c.AppError)throw new c.AppError("Failed attempt to parse '".concat(e,"', because '").concat(t.message,"'"))}return}}if(["usemtl ","v ","vt ","f ","vn "].some((function(t){return e.startsWith(t)})))throw new c.AppError("Failed to parse essential token for <b>".concat(e,"</b>"))},t}(r(8333).IImporter);t.ObjImporter=m},3509:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockMeshLighting=void 0;var n,i=r(7168),o=r(2989),a=r(3243),s=r(7464);!function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.North=2]="North",e[e.South=3]="South",e[e.East=4]="East",e[e.West=5]="West",e[e.None=6]="None"}(n||(n={}));var l=function(){function e(e){this._owner=e,this._sunLightValues=new Map,this._blockLightValues=new Map,this._limits=new Map,this._bounds=new i.Bounds(new s.Vector3(0,0,0),new s.Vector3(0,0,0)),this._updates=0,this._skips=0}return e.prototype.getLightLevel=function(e){var t,r,n=e.hash();return{sunLightValue:null!==(t=this._sunLightValues.get(n))&&void 0!==t?t:0,blockLightValue:null!==(r=this._blockLightValues.get(n))&&void 0!==r?r:0}},e.prototype.getMaxLightLevel=function(e){var t=this.getLightLevel(e);return Math.max(t.blockLightValue,t.sunLightValue)},e.prototype.addLightToDarkness=function(e){var t=this;if(0!==e){var r=[];for(this._owner.getBlocks().forEach((function(n){t.getMaxLightLevel(n.voxel.position)<e&&r.push(n.voxel.position)}));r.length>0;){var i=r.pop();if(this.getMaxLightLevel(i)<e&&this._owner.setEmissiveBlock(i)){this._blockLightValues.set(i.hash(),14);var a={sunLightValue:this.getLightLevel(i).sunLightValue-1,blockLightValue:13},l=[];l.push({pos:new s.Vector3(0,1,0).add(i),sunLightValue:a.sunLightValue,blockLightValue:a.blockLightValue,from:n.Down}),l.push({pos:new s.Vector3(0,-1,0).add(i),sunLightValue:a.sunLightValue,blockLightValue:a.blockLightValue,from:n.Up}),l.push({pos:new s.Vector3(1,0,0).add(i),sunLightValue:a.sunLightValue,blockLightValue:a.blockLightValue,from:n.South}),l.push({pos:new s.Vector3(-1,0,0).add(i),sunLightValue:a.sunLightValue,blockLightValue:a.blockLightValue,from:n.North}),l.push({pos:new s.Vector3(0,0,1).add(i),sunLightValue:a.sunLightValue,blockLightValue:a.blockLightValue,from:n.West}),l.push({pos:new s.Vector3(0,0,-1).add(i),sunLightValue:a.sunLightValue,blockLightValue:a.blockLightValue,from:n.East}),this._handleBlockLightUpdates(l),(0,o.ASSERT)(0===l.length)}}}},e.prototype._calculateLimits=function(){var e=this;this._bounds=this._owner.getVoxelMesh().getBounds(),this._limits.clear();var t=function(t){var r=t.copy();r.y=0;var n=e._limits.get(r.hash());void 0!==n?(n.maxY=Math.max(n.maxY,t.y),n.minY=Math.min(n.minY,t.y)):e._limits.set(r.hash(),{x:t.x,z:t.z,minY:t.y,maxY:t.y})};this._owner.getBlocks().forEach((function(e){t(e.voxel.position),t(new s.Vector3(1,0,0).add(e.voxel.position)),t(new s.Vector3(-1,0,0).add(e.voxel.position)),t(new s.Vector3(0,0,1).add(e.voxel.position)),t(new s.Vector3(0,0,-1).add(e.voxel.position))}))},e.prototype.init=function(){this._calculateLimits()},e.prototype.addSunLightValues=function(){var e=[];this._limits.forEach((function(t,r){e.push({pos:new s.Vector3(0,1,0).add(new s.Vector3(t.x,t.maxY,t.z)),sunLightValue:15,blockLightValue:0,from:n.None})})),this._handleSunLightUpdates(e),(0,o.ASSERT)(0===e.length,"Updates still remaining")},e.prototype.addEmissiveBlocks=function(){var e=this,t=[];this._owner.getBlocks().forEach((function(r){e._owner.isEmissiveBlock(r)&&t.push({pos:r.voxel.position,sunLightValue:0,blockLightValue:14,from:n.None})})),this._handleBlockLightUpdates(t),(0,o.ASSERT)(0===t.length,"Updates still remaining")},e.prototype._handleBlockLightUpdates=function(e){for(;e.length>0;){this._updates+=1;var t=e.pop();if(this._isPosValid(t.pos)){var r=this.getLightLevel(t.pos),i=r.blockLightValue,o=t.pos.hash();r.blockLightValue<t.blockLightValue&&(i=t.blockLightValue,this._blockLightValues.set(o,i));var a=this._owner.getBlockAt(t.pos);(void 0===a||this._owner.isTransparentBlock(a))&&r.blockLightValue!==i&&i>0&&(t.from!==n.Up&&e.push({pos:new s.Vector3(0,1,0).add(t.pos),sunLightValue:r.sunLightValue,blockLightValue:i-1,from:n.Down}),t.from!==n.Down&&e.push({pos:new s.Vector3(0,-1,0).add(t.pos),sunLightValue:r.sunLightValue,blockLightValue:i-1,from:n.Up}),t.from!==n.North&&e.push({pos:new s.Vector3(1,0,0).add(t.pos),sunLightValue:r.sunLightValue,blockLightValue:i-1,from:n.South}),t.from!==n.South&&e.push({pos:new s.Vector3(-1,0,0).add(t.pos),sunLightValue:r.sunLightValue,blockLightValue:i-1,from:n.North}),t.from!==n.East&&e.push({pos:new s.Vector3(0,0,1).add(t.pos),sunLightValue:r.sunLightValue,blockLightValue:i-1,from:n.West}),t.from!==n.West&&e.push({pos:new s.Vector3(0,0,-1).add(t.pos),sunLightValue:r.sunLightValue,blockLightValue:i-1,from:n.East}))}else this._skips+=1}},e.prototype._handleSunLightUpdates=function(e){for(;e.length>0;){this._updates+=1;var t=e.pop();if(this._isPosValid(t.pos)){var r=this.getLightLevel(t.pos),i=r.sunLightValue,o=t.pos.hash();r.sunLightValue<t.sunLightValue&&(i=t.sunLightValue,this._sunLightValues.set(o,i));var a=this._owner.getBlockAt(t.pos);(void 0===a||this._owner.isTransparentBlock(a))&&r.sunLightValue!==i&&i>0&&(t.from!==n.Up&&e.push({pos:new s.Vector3(0,1,0).add(t.pos),sunLightValue:i-1,blockLightValue:r.blockLightValue,from:n.Down}),t.from!==n.Down&&e.push({pos:new s.Vector3(0,-1,0).add(t.pos),sunLightValue:15===i?15:i-1,blockLightValue:r.blockLightValue,from:n.Up}),t.from!==n.North&&e.push({pos:new s.Vector3(1,0,0).add(t.pos),sunLightValue:i-1,blockLightValue:r.blockLightValue,from:n.South}),t.from!==n.South&&e.push({pos:new s.Vector3(-1,0,0).add(t.pos),sunLightValue:i-1,blockLightValue:r.blockLightValue,from:n.North}),t.from!==n.East&&e.push({pos:new s.Vector3(0,0,1).add(t.pos),sunLightValue:i-1,blockLightValue:r.blockLightValue,from:n.West}),t.from!==n.West&&e.push({pos:new s.Vector3(0,0,-1).add(t.pos),sunLightValue:i-1,blockLightValue:r.blockLightValue,from:n.East}))}else this._skips+=1}},e.prototype._isPosValid=function(e){var t=e.copy();t.y=0;var r=this._limits.get(t.hash());return void 0!==r&&e.y>=this._bounds.min.y&&e.y<=r.maxY+1},e.prototype.dumpInfo=function(){(0,a.LOG)("Skipped ".concat(this._skips," out of ").concat(this._updates," (").concat((100*this._skips/this._updates).toFixed(4),"%)"))},e}();t.BlockMeshLighting=l},6189:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialMapManager=void 0;var n=r(4405),i=r(4790),o=r(9962),a=r(2989),s=function(){function e(e){this.materials=e}return e.prototype.changeTransparencyType=function(e,t){var r=this.materials.get(e);switch((0,a.ASSERT)(void 0!==r,"Cannot change transparency type of non-existent material"),(0,a.ASSERT)(r.type===i.MaterialType.textured),t){case"None":r.transparency={type:"None"};break;case"UseAlphaMap":r.transparency={type:"UseAlphaMap",alpha:void 0,channel:o.EImageChannel.R};break;case"UseAlphaValue":r.transparency={type:"UseAlphaValue",alpha:1};break;case"UseDiffuseMapAlphaChannel":r.transparency={type:"UseDiffuseMapAlphaChannel"}}this.materials.set(e,r)},e.prototype.changeMaterialType=function(e,t){var r=this.materials.get(e);if((0,a.ASSERT)(void 0!==r,"Cannot change material type of non-existent material"),r.type!==t)switch(t){case i.MaterialType.solid:(0,a.ASSERT)(r.type===i.MaterialType.textured,"Old material expect to be texture"),this.materials.set(e,{type:i.MaterialType.solid,colour:n.RGBAColours.MAGENTA,canBeTextured:!0,needsAttention:!0});break;case i.MaterialType.textured:(0,a.ASSERT)(r.type===i.MaterialType.solid,"Old material expect to be solid"),this.materials.set(e,{type:i.MaterialType.textured,transparency:{type:"None"},extension:"repeat",interpolation:"linear",needsAttention:!0,diffuse:void 0})}},e}();t.MaterialMapManager=s},6490:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmoothVectorVariable=t.SmoothVariable=t.degreesToRadians=t.checkFractional=t.checkNaN=t.wayThrough=t.mapRange=t.between=t.roundToNearest=t.ceilToNearest=t.floorToNearest=t.clamp=t.argMax=t.AppMath=void 0;var n=r(2989),i=r(3243),o=r(7464);!function(e){function t(e){return e*(Math.PI/180)}e.RADIANS_0=t(0),e.RADIANS_90=t(90),e.RADIANS_180=t(180),e.RADIANS_270=t(270),e.lerp=function(e,t,r){return(1-e)*t+e*r},e.nearlyEqual=function(e,t,r){return void 0===r&&(r=1e-4),Math.abs(e-t)<r},e.degreesToRadians=t,e.uint8=function(e){return Math.floor(255*e)}}(t.AppMath||(t.AppMath={})),t.argMax=function(e){return e.map((function(e,t){return[e,t]})).reduce((function(e,t){return t[0]>e[0]?t:e}))[1]},t.clamp=function(e,t,r){return Math.max(Math.min(r,e),t)},t.floorToNearest=function(e,t){return Math.floor(e/t)*t},t.ceilToNearest=function(e,t){return Math.ceil(e/t)*t},t.roundToNearest=function(e,t){return Math.round(e/t)*t},t.between=function(e,t,r){return t<=e&&e<=r},t.mapRange=function(e,t,r,n,i){return(e-t)/(r-t)*(i-n)+n},t.wayThrough=function(e,t,r){return(e-t)/(r-t)},t.checkNaN=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.some((function(e){return isNaN(e)})))throw(0,i.LOG_ERROR)(e),new n.AppError("Found NaN")},t.checkFractional=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.some((function(e){return e>1||e<0})))throw new n.AppError("Found value outside of [0, 1]")},t.degreesToRadians=Math.PI/180;var a=function(){function e(e,t){this._actual=e,this._target=e,this._smoothing=t,this._min=-1/0,this._max=1/0}return e.prototype.setClamp=function(e,t){this._min=e,this._max=t},e.prototype.addToTarget=function(e){this._target=(0,t.clamp)(this._target+e,this._min,this._max)},e.prototype.setTarget=function(e){this._target=(0,t.clamp)(e,this._min,this._max)},e.prototype.setActual=function(e){this._actual=e},e.prototype.tick=function(){this._actual+=(this._target-this._actual)*this._smoothing},e.prototype.getActual=function(){return this._actual},e.prototype.getTarget=function(){return this._target},e}();t.SmoothVariable=a;var s=function(){function e(e,t){this._actual=e,this._target=e,this._smoothing=t}return e.prototype.addToTarget=function(e){this._target=o.Vector3.add(this._target,e)},e.prototype.setTarget=function(e){this._target=e},e.prototype.tick=function(){this._actual.add(o.Vector3.sub(this._target,this._actual).mulScalar(this._smoothing))},e.prototype.getActual=function(){return this._actual},e.prototype.getTarget=function(){return this._target},e}();t.SmoothVectorVariable=s},4790:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mesh=t.MaterialType=void 0;var n,i=r(7168),o=r(4405),a=r(6490),s=r(1535),l=r(9962),u=r(8218),c=r(9882),f=r(2989),h=r(3243),d=r(7464);!function(e){e[e.solid=0]="solid",e[e.textured=1]="textured"}(n=t.MaterialType||(t.MaterialType={}));var p=function(){function e(e,t,r,n,i){this.id=(0,c.getRandomID)(),this._vertices=e,this._normals=t,this._uvs=r,this._tris=n,this._materials=i,this._loadedTextures=new Map}return e.prototype.processMesh=function(e,t,r){this._checkMesh(),this._checkMaterials(),this._centreMesh(),this._rotateMesh(e,t,r),this._normaliseMesh(),this._loadTextures()},e.prototype._rotateMesh=function(e,t,r){var n=Math.cos(r*a.degreesToRadians),i=Math.sin(r*a.degreesToRadians),o=Math.cos(e*a.degreesToRadians),s=Math.sin(e*a.degreesToRadians),l=Math.cos(t*a.degreesToRadians),u=Math.sin(t*a.degreesToRadians),c=n*o,f=n*s*u-i*l,h=n*s*l+i*u,d=i*o,p=i*s*u+n*l,g=i*s*l-n*u,m=-s,y=o*u,_=o*l;this._vertices.forEach((function(e){var t=e.x,r=e.y,n=e.z;e.x=c*t+f*r+h*n,e.y=d*t+p*r+g*n,e.z=m*t+y*r+_*n}))},e.prototype.getBounds=function(){var e=i.Bounds.getInfiniteBounds();if(this._transform)for(var t=0,r=this._vertices;t<r.length;t++){var n=r[t];e.extendByPoint(this._transform(n))}else for(var o=0,a=this._vertices;o<a.length;o++)n=a[o],e.extendByPoint(n);return e},e.prototype.translateMesh=function(e){this._vertices.forEach((function(t){t.add(e)}))},e.prototype.scaleMesh=function(e){this._vertices.forEach((function(t){t.mulScalar(e)}))},e.prototype._checkMesh=function(){if(0===this._vertices.length)throw new f.AppError("No vertices were loaded");if(0===this._tris.length)throw new f.AppError("No triangles were loaded");this._tris.length>=1e5&&s.StatusHandler.Get.add("warning","The imported mesh has ".concat(this._tris.length.toLocaleString()," triangles, consider simplifying it in a DDC such as Blender")),s.StatusHandler.Get.add("info","".concat(this._vertices.length.toLocaleString()," vertices, ").concat(this._tris.length.toLocaleString()," triangles"));for(var e=!1,t=0;t<this.getTriangleCount();++t){var r=this._tris[t];if(r.normalIndices){var n=r.normalIndices.x<this._normals.length,i=r.normalIndices.y<this._normals.length,o=r.normalIndices.z<this._normals.length;if(!n||!i||!o){e=!0;break}}if(!r.normalIndices){e=!0;break}}e&&s.StatusHandler.Get.add("warning","Some vertices do not have their normals defined, this may cause voxels to be aligned incorrectly")},e.prototype._checkMaterials=function(){for(var e=this,t=new Set,r=new Set,i=0,a=this._tris;i<a.length;i++){var s=a[i];this._materials.has(s.material)||(void 0===s.texcoordIndices?this._materials.set(s.material,{type:n.solid,colour:o.RGBAColours.MAGENTA,canBeTextured:!1,needsAttention:!0}):this._materials.set(s.material,{type:n.solid,colour:o.RGBAUtil.random(),canBeTextured:!0,needsAttention:!0}),r.add(s.material)),t.add(s.material)}var l=new Set;this._materials.forEach((function(e,r){t.has(r)||((0,h.LOG_WARN)("'".concat(r,"' is not used by any triangles, removing...")),l.add(r))})),l.forEach((function(t){e._materials.delete(t)})),r.size>0&&(0,h.LOG_WARN)("Triangles use these materials but they were not found",r),this._materials.forEach((function(e,t){}));var u=new Set;this._tris.forEach((function(t,r){if(!u.has(t.material)){var n=e.getUVs(r);(n.uv0.u<0||n.uv0.u>1||n.uv0.v<0||n.uv0.v>1||n.uv1.u<0||n.uv1.u>1||n.uv1.v<0||n.uv1.v>1||n.uv2.u<0||n.uv2.u>1||n.uv2.v<0||n.uv2.v>1)&&u.add(t.material)}})),(0,h.LOG)("Materials with OOB UVs",JSON.stringify(u)),this._materials.forEach((function(e,t){e.type===n.textured&&(e.extension=u.has(t)?"repeat":"clamp")}))},e.prototype._centreMesh=function(){var e=this.getBounds().getCentre();if(!e.isNumber())throw new f.AppError("Could not find centre of mesh");this.translateMesh(e.negate())},e.prototype._normaliseMesh=function(){var t=this.getBounds(),r=d.Vector3.sub(t.max,t.min),n=e.desiredHeight/r.y;if(isNaN(n)||!isFinite(n))throw new f.AppError("Could not scale mesh correctly - mesh is likely 2D, rotate it so that it has a non-zero height");this.scaleMesh(n)},e.prototype._loadTextures=function(){var e=this;this._loadedTextures.clear(),this._materials.forEach((function(t,r){t.type!==n.textured||e._loadedTextures.has(r)||e._loadedTextures.set(r,new l.Texture({diffuse:t.diffuse,transparency:t.transparency}))}))},e.prototype.getVertices=function(e){var t=this._tris[e];return this._transform?{v0:this._transform(this._vertices[t.positionIndices.x]),v1:this._transform(this._vertices[t.positionIndices.y]),v2:this._transform(this._vertices[t.positionIndices.z])}:{v0:this._vertices[t.positionIndices.x],v1:this._vertices[t.positionIndices.y],v2:this._vertices[t.positionIndices.z]}},e.prototype.getUVs=function(e){var t=this._tris[e];return t.texcoordIndices?{uv0:this._uvs[t.texcoordIndices.x]||new c.UV(0,0),uv1:this._uvs[t.texcoordIndices.y]||new c.UV(0,0),uv2:this._uvs[t.texcoordIndices.z]||new c.UV(0,0)}:{uv0:new c.UV(0,0),uv1:new c.UV(0,0),uv2:new c.UV(0,0)}},e.prototype.getNormals=function(e){var t=this.getVertices(e),r=new u.Triangle(t.v0,t.v1,t.v2).getNormal(),n=this._tris[e];return n.normalIndices?{v0:this._normals[n.normalIndices.x]||r,v1:this._normals[n.normalIndices.y]||r,v2:this._normals[n.normalIndices.z]||r}:{v0:r,v1:r,v2:r}},e.prototype.getUVTriangle=function(e){var t=this.getVertices(e),r=this.getNormals(e),n=this.getUVs(e);return new u.UVTriangle(t.v0,t.v1,t.v2,r.v0,r.v1,r.v2,n.uv0,n.uv1,n.uv2)},e.prototype.getMaterialByTriangle=function(e){return this._tris[e].material},e.prototype.getMaterialByName=function(e){return this._materials.get(e)},e.prototype.setMaterials=function(e){this._materials=e,this._loadTextures()},e.prototype.getMaterials=function(){return this._materials},e.prototype.sampleTextureMaterial=function(e,t){var r=this._materials.get(e);(0,f.ASSERT)(void 0!==r,"Sampling material that does not exist: ".concat(e)),(0,f.ASSERT)(r.type===n.textured,"Sampling texture material of non-texture material");var i=this._loadedTextures.get(e);return(0,f.ASSERT)(void 0!==i,"Sampling texture that is not loaded"),i.getRGBA(t,r.interpolation,r.extension)},e.prototype.getTriangleCount=function(){return this._tris.length},e.prototype.setTransform=function(e){this._transform=e},e.prototype.clearTransform=function(){this._transform=void 0},e.desiredHeight=8,e}();t.Mesh=p},9775:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseManager=void 0;var n=r(3419),i=function(){function e(e){this._gl=e,this.currMouse={x:-1,y:-1,buttons:0},this.prevMouse={x:-1,y:-1,buttons:0}}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this(n.Renderer.Get._gl))},enumerable:!1,configurable:!0}),e.prototype.onMouseMove=function(e){this.currMouse={x:e.clientX,y:e.clientY,buttons:e.buttons}},e.prototype.isMouseLeftDown=function(){this.currMouse.buttons,e.MOUSE_LEFT},e.prototype.isMouseRightDown=function(){this.currMouse.buttons,e.MOUSE_RIGHT},e.prototype.getMouseDelta=function(){var e={dx:this.currMouse.x-this.prevMouse.x,dy:-(this.currMouse.y-this.prevMouse.y)};return this.prevMouse=this.currMouse,e},e.prototype.getMousePosNorm=function(){return{x:this.currMouse.x/this._gl.canvas.width*2-1,y:-(this.currMouse.y/this._gl.canvas.height*2-1)}},e.MOUSE_LEFT=1,e.MOUSE_RIGHT=2,e}();t.MouseManager=i},6631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OcclusionManager=void 0;var n=r(8913),i=r(2989),o=r(7464),a=function(){function e(){this._occlusionsSetup=!1,this._setupOcclusions(),this._occlusions=new Array(96),this._localNeighbourhoodCache=Array(27)}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.getBlankOcclusions=function(){return new Array(96).fill(1)},e.prototype.getOcclusions=function(e,t){var r=t.getNeighbourhoodMap().get(e.hash());if(void 0===r)return this.getBlankOcclusions();for(var i=0;i<27;++i)this._localNeighbourhoodCache[i]=(r.value&1<<i)>0?1:0;for(var o=0;o<6;++o)for(var a=0;a<4;++a){var s,l=0;for(i=0;i<2;++i){var u=this._occlusionNeighboursIndices[this._getOcclusionMapIndex(o,a,i)];l+=this._localNeighbourhoodCache[u]}2==l&&n.AppConfig.Get.AMBIENT_OCCLUSION_OVERRIDE_CORNER?++l:(u=this._occlusionNeighboursIndices[this._getOcclusionMapIndex(o,a,2)],l+=this._localNeighbourhoodCache[u]),s=1-.2*l;var c=16*o+a;this._occlusions[c+0]=s,this._occlusions[c+4]=s,this._occlusions[c+8]=s,this._occlusions[c+12]=s}return this._occlusions},e.getNeighbourIndex=function(e){return 9*(e.x+1)+3*(e.y+1)+(e.z+1)},e.prototype._setupOcclusions=function(){(0,i.ASSERT)(!this._occlusionsSetup);var t=[[[new o.Vector3(1,1,0),new o.Vector3(1,0,-1),new o.Vector3(1,1,-1)],[new o.Vector3(1,-1,0),new o.Vector3(1,0,-1),new o.Vector3(1,-1,-1)],[new o.Vector3(1,1,0),new o.Vector3(1,0,1),new o.Vector3(1,1,1)],[new o.Vector3(1,-1,0),new o.Vector3(1,0,1),new o.Vector3(1,-1,1)]],[[new o.Vector3(-1,1,0),new o.Vector3(-1,0,1),new o.Vector3(-1,1,1)],[new o.Vector3(-1,-1,0),new o.Vector3(-1,0,1),new o.Vector3(-1,-1,1)],[new o.Vector3(-1,1,0),new o.Vector3(-1,0,-1),new o.Vector3(-1,1,-1)],[new o.Vector3(-1,-1,0),new o.Vector3(-1,0,-1),new o.Vector3(-1,-1,-1)]],[[new o.Vector3(-1,1,0),new o.Vector3(0,1,1),new o.Vector3(-1,1,1)],[new o.Vector3(-1,1,0),new o.Vector3(0,1,-1),new o.Vector3(-1,1,-1)],[new o.Vector3(1,1,0),new o.Vector3(0,1,1),new o.Vector3(1,1,1)],[new o.Vector3(1,1,0),new o.Vector3(0,1,-1),new o.Vector3(1,1,-1)]],[[new o.Vector3(-1,-1,0),new o.Vector3(0,-1,-1),new o.Vector3(-1,-1,-1)],[new o.Vector3(-1,-1,0),new o.Vector3(0,-1,1),new o.Vector3(-1,-1,1)],[new o.Vector3(1,-1,0),new o.Vector3(0,-1,-1),new o.Vector3(1,-1,-1)],[new o.Vector3(1,-1,0),new o.Vector3(0,-1,1),new o.Vector3(1,-1,1)]],[[new o.Vector3(0,1,1),new o.Vector3(1,0,1),new o.Vector3(1,1,1)],[new o.Vector3(0,-1,1),new o.Vector3(1,0,1),new o.Vector3(1,-1,1)],[new o.Vector3(0,1,1),new o.Vector3(-1,0,1),new o.Vector3(-1,1,1)],[new o.Vector3(0,-1,1),new o.Vector3(-1,0,1),new o.Vector3(-1,-1,1)]],[[new o.Vector3(0,1,-1),new o.Vector3(-1,0,-1),new o.Vector3(-1,1,-1)],[new o.Vector3(0,-1,-1),new o.Vector3(-1,0,-1),new o.Vector3(-1,-1,-1)],[new o.Vector3(0,1,-1),new o.Vector3(1,0,-1),new o.Vector3(1,1,-1)],[new o.Vector3(0,-1,-1),new o.Vector3(1,0,-1),new o.Vector3(1,-1,-1)]]];this._occlusionNeighboursIndices=[];for(var r=0;r<6;++r)for(var n=0;n<4;++n)for(var a=0;a<3;++a){var s=this._getOcclusionMapIndex(r,n,a);this._occlusionNeighboursIndices[s]=e.getNeighbourIndex(t[r][n][a])}this._occlusionsSetup=!0},e.prototype._getOcclusionMapIndex=function(e,t,r){return 12*e+3*t+r},e}();t.OcclusionManager=a},2126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=t.PaletteManager=void 0;var n=r(1535),i=r(9882),o=r(3243),a=r(6841),s=function(){function e(){}return e.getPalettesInfo=function(){return[{id:"all",name:"All"},{id:"colourful",name:"Colourful"},{id:"greyscale",name:"Greyscale"},{id:"schematic-friendly",name:"Schematic-friendly"}]},e}();t.PaletteManager=s;var l=function(){function e(){this._blocks=[]}return e.create=function(){return new e},e.load=function(e){},e.prototype.save=function(e){return!1},e.prototype.add=function(e){var t=this;e.forEach((function(e){t._blocks.includes(e)||t._blocks.push(i.AppUtil.Text.namespaceBlock(e))}))},e.prototype.remove=function(e){var t=this._blocks.indexOf(i.AppUtil.Text.namespaceBlock(e));return-1!==t&&(this._blocks.splice(t,1),!0)},e.prototype.has=function(e){return this._blocks.includes(i.AppUtil.Text.namespaceBlock(e))},e.prototype.count=function(){return this._blocks.length},e.prototype.getBlocks=function(){return this._blocks},e.getAllPalette=function(){return e.load("all-release")},e.prototype.removeMissingAtlasBlocks=function(e){for(var t=[],r=this._blocks.length-1;r>=0;--r){var i=this._blocks[r];e.hasBlock(i)||(t.push(i),this.remove(i))}t.length>0&&(n.StatusHandler.Get.add("warning","".concat(t.length," palette block(s) are missing atlas textures, they will not be used")),(0,o.LOG_WARN)("Blocks missing atlas textures",t))},e._isValidPaletteName=function(t){return t.length>0&&e.PALETTE_NAME_REGEX.test(t)},e._getPalettePath=function(e){return a.PathUtil.join(a.AppPaths.Get.palettes,"./".concat(e,".palette"))},e.PALETTE_NAME_REGEX=/^[a-zA-Z\- ]+$/,e.PALETTE_FILE_EXT=".palette",e._FILE_VERSION=1,e}();t.Palette=l},4374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressManager=void 0;var n=r(9712),i=r(2989),o=r(3243),a=function(){function e(){this._tasks=[]}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.start=function(e){return(0,i.ASSERT)(!this._tasks.includes(e),"Task with id '".concat(e,"' already being tracked")),this._tasks.push(e),n.EventManager.Get.broadcast(n.EAppEvent.onTaskStart,e),(0,o.LOGF)("[PROGRESS]: Start '".concat(e," (").concat(this._tasks.length," task(s))'")),{nextPercentage:0,id:e}},e.prototype.progress=function(e,t){t>e.nextPercentage&&(n.EventManager.Get.broadcast(n.EAppEvent.onTaskProgress,e.id,t),e.nextPercentage+=.05)},e.prototype.end=function(e){(0,o.LOGF)("[PROGRESS]: End '".concat(e.id,"' (").concat(this._tasks.length," task(s))'"));var t=this._tasks.findIndex((function(t){return t===e.id}));(0,i.ASSERT)(-1!==t,"Task with that id '".concat(e.id,"' is not being tracked, ").concat(this._tasks)),this._tasks.splice(t,1),n.EventManager.Get.broadcast(n.EAppEvent.onTaskEnd,e.id)},e.prototype.clear=function(){this._tasks=[]},e}();t.ProgressManager=a},9347:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rayIntersectTriangle=t.axesToDirection=t.Axes=void 0;var n,i=r(2989),o=r(7464),a=1e-7;function s(e){return e===n.x?new o.Vector3(1,0,0):e===n.y?new o.Vector3(0,1,0):e===n.z?new o.Vector3(0,0,1):void(0,i.ASSERT)(!1)}!function(e){e[e.x=0]="x",e[e.y=1]="y",e[e.z=2]="z"}(n=t.Axes||(t.Axes={})),t.axesToDirection=s,t.rayIntersectTriangle=function(e,t,r,n){var i=o.Vector3.sub(r,t),l=o.Vector3.sub(n,t),u=s(e.axis),c=o.Vector3.cross(u,l),f=o.Vector3.dot(i,c);if(!(f>-1e-7&&f<a)){var h=1/f,d=o.Vector3.sub(e.origin,t),p=h*o.Vector3.dot(d,c);if(!(p<0||p>1)){var g=o.Vector3.cross(d,i),m=h*o.Vector3.dot(u,g);if(!(m<0||p+m>1)){var y=h*o.Vector3.dot(l,g);return y>a?o.Vector3.add(e.origin,o.Vector3.mulScalar(u,y)):void 0}}}}},3340:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderBuffer=t.MergeAttributeData=void 0;var a=o(r(3141)),s=r(3419),l=r(2989);t.MergeAttributeData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return{indices:new Uint32Array,custom:{}};for(var r=Object.keys(e[0].custom),n=function(t){var n=Object.keys(e[t].custom),i=r.every((function(e){return n.includes(e)})),o=n.every((function(e){return r.includes(e)}));(0,l.ASSERT)(i&&o,"Attributes to merge do not match")},i=1;i<e.length;++i)n(i);var o=Array.from(e[0].indices),a=e[0].custom,s=function(t){var n,i=Math.max.apply(Math,o)+1,s=e[t],l=s.indices.map((function(e){return e+i}));o.push.apply(o,Array.from(l));for(var u=0,c=r;u<c.length;u++){var f=c[u],h=s.custom[f];(n=a[f]).push.apply(n,h)}};for(i=1;i<e.length;++i)s(i);return{indices:new Uint32Array(o),custom:a}};var u=function(){function e(e){this._attributes={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this._attributes[n.name]={name:n.name,numComponents:n.numComponents}}this._needsCompiling=!1,this._compiled=!1,this._maxIndex=0,this._getNewBuffer()}return e.prototype.add=function(e){var t,r,n=this,i=new Array(e.indices.length),o=-1;for(var a in e.indices.forEach((function(e,t){var r=e+n._maxIndex;o=Math.max(o,r),i[t]=r})),(t=this._buffer.indices.data).push.apply(t,i),this._maxIndex=1+o,this._attributes)(r=this._buffer[a].data).push.apply(r,e.custom[a]);this._needsCompiling=!0},e.from=function(t){var r=new e([]);return r._buffer=t._buffer,r._attributes=t._attributes,r._maxIndex=t._maxIndex,r._compiled=t._compiled,r._needsCompiling=t._needsCompiling,r},e.prototype.attachNewAttribute=function(e,t){(0,l.ASSERT)(void 0===this._buffer[e.name],"Attribute already exists in buffer"),(0,l.ASSERT)(void 0===this._attributes[e.name],"Attribute already exists in attributes");var r=this._maxIndex*e.numComponents;(0,l.ASSERT)(t.length===r,"Data length expected to be ".concat(r,", got ").concat(t.length)),this._buffer[e.name]={numComponents:e.numComponents,data:t},this._attributes[e.name]=e,this._needsCompiling=!0},e.prototype.removeAttribute=function(e){delete this._buffer[e],delete this._attributes[e],this._needsCompiling=!0},e.prototype.getWebGLBuffer=function(){return this._compile(),(0,l.ASSERT)(void 0!==this._WebGLBuffer),this._WebGLBuffer},e.prototype._compile=function(){if(!this._compiled||this._needsCompiling){var e={indices:{data:Uint32Array.from(this._buffer.indices.data),numComponents:this._buffer.indices.numComponents}};for(var t in this._buffer)"indices"!==t&&(e[t]={data:Float32Array.from(this._buffer[t].data),numComponents:this._buffer[t].numComponents});this._WebGLBuffer={buffer:a.createBufferInfoFromArrays(s.Renderer.Get._gl,e),numElements:this._buffer.indices.data.length},this._compiled=!0,this._needsCompiling=!1}},e.prototype._getNewBuffer=function(){for(var e in this._buffer={indices:{numComponents:1,data:[]}},this._attributes)this._buffer[e]={numComponents:this._attributes[e].numComponents,data:[]}},e.prototype._checkDataMatchesAttributes=function(e){if(!("indices"in e))throw Error("Given data does not have indices data");var t=e.indices.reduce((function(e,t){return Math.max(e,t)}))+1;for(var r in this._attributes){if(!(r in e))throw Error("Given data does not have ".concat(r," data"));if(e.custom[r].length%this._attributes[r].numComponents!=0)throw Error("Not enough/too much ".concat(r," data given"));if(e.custom[r].length/this._attributes[r].numComponents!=t)throw Error("Expected ".concat(t*this._attributes[r].numComponents," values for ").concat(r,", got ").concat(e.custom[r].length))}},e.prototype.copy=function(){var t=new e([]);for(var r in t._buffer={indices:{numComponents:this._buffer.indices.numComponents,data:Array.from(this._buffer.indices.data)}},this._buffer)"indices"!==r&&(t._buffer[r]={numComponents:this._buffer[r].numComponents,data:Array.from(this._buffer[r].data)});return t._attributes=JSON.parse(JSON.stringify(this._attributes)),t._maxIndex=this._maxIndex,t._compiled=!1,t._needsCompiling=!0,t},e}();t.RenderBuffer=u},3419:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=t.MeshType=void 0;var a,s,l=o(r(3141)),u=r(2830),c=r(4405),f=r(8913),h=r(2695),d=r(4790),p=r(3340),g=r(1708),m=r(9962),y=r(2989),_=r(7464);!function(e){e[e.None=0]="None",e[e.TriangleMesh=1]="TriangleMesh",e[e.VoxelMesh=2]="VoxelMesh",e[e.BlockMesh=3]="BlockMesh"}(a=t.MeshType||(t.MeshType={})),function(e){e[e.Wireframe=0]="Wireframe",e[e.Normals=1]="Normals",e[e.Bounds=2]="Bounds",e[e.Dev=3]="Dev"}(s||(s={}));var b=function(){function e(){this._backgroundColour={r:.125,g:.125,b:.125,a:1},this._atlasSize=1,this._meshToUse=a.None,this._voxelSize=1,this._gridOffset=new _.Vector3(0,0,0),this._lightingAvailable=!1,this._allVoxelChunks=!1,this._gl=document.getElementById("canvas").getContext("webgl",{alpha:!1}),l.addExtensionsToContext(this._gl),this._backgroundColour=f.AppConfig.Get.VIEWPORT_BACKGROUND_COLOUR,this._modelsAvailable=0,this._materialBuffers=new Map,this._gridBuffers={x:{},y:{},z:{}},this._gridEnabled=!1,this._debugBuffers={},this._debugBuffers[a.None]={},this._debugBuffers[a.TriangleMesh]={},this._debugBuffers[a.VoxelMesh]={},this._debugBuffers[a.BlockMesh]={},this._isGridComponentEnabled={},this._axesEnabled=!1,this._nightVisionEnabled=!0,this._axisBuffer=new p.RenderBuffer([{name:"position",numComponents:3},{name:"colour",numComponents:4}]),this._axisBuffer.add(h.DebugGeometryTemplates.arrow(new _.Vector3(0,0,0),new _.Vector3(1,0,0),{r:.96,g:.21,b:.32,a:1})),this._axisBuffer.add(h.DebugGeometryTemplates.arrow(new _.Vector3(0,0,0),new _.Vector3(0,1,0),{r:.44,g:.64,b:.11,a:1})),this._axisBuffer.add(h.DebugGeometryTemplates.arrow(new _.Vector3(0,0,0),new _.Vector3(0,0,1),{r:.18,g:.52,b:.89,a:1}))}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.update=function(){u.ArcballCamera.Get.updateCamera()},e.prototype.draw=function(){switch(this._setupScene(),this._meshToUse){case a.TriangleMesh:this._drawMesh();break;case a.VoxelMesh:this._drawVoxelMesh();break;case a.BlockMesh:this._drawBlockMesh()}this._drawDebug()},e.prototype.setLightingAvailable=function(e){this._lightingAvailable=e,e||(this._nightVisionEnabled=!0)},e.prototype.toggleIsGridEnabled=function(){this._gridEnabled=!this._gridEnabled},e.prototype.isGridEnabled=function(){return this._gridEnabled},e.prototype.isAxesEnabled=function(){return this._axesEnabled},e.prototype.toggleIsAxesEnabled=function(){this._axesEnabled=!this._axesEnabled},e.prototype.canToggleNightVision=function(){return this._lightingAvailable},e.prototype.toggleIsNightVisionEnabled=function(){this._nightVisionEnabled=!this._nightVisionEnabled,this._lightingAvailable||(this._nightVisionEnabled=!0)},e.prototype.isNightVisionEnabled=function(){return this._nightVisionEnabled},e.prototype.toggleIsWireframeEnabled=function(){var e=!this._isGridComponentEnabled[s.Wireframe];this._isGridComponentEnabled[s.Wireframe]=e},e.prototype.toggleIsNormalsEnabled=function(){var e=!this._isGridComponentEnabled[s.Normals];this._isGridComponentEnabled[s.Normals]=e},e.prototype.toggleIsDevDebugEnabled=function(){var e=!this._isGridComponentEnabled[s.Dev];this._isGridComponentEnabled[s.Dev]=e},e.prototype.clearMesh=function(){this._materialBuffers=new Map,this._modelsAvailable=0,this.setModelToUse(a.None)},e.prototype._createInternalMaterial=function(e){var t;if(e.type===d.MaterialType.solid)return{type:d.MaterialType.solid,colourArray:c.RGBAUtil.toArray(e.colour)};var r=l.createTexture(this._gl,{min:this._gl.NEAREST,mag:this._gl.NEAREST,src:[255,0,255,255]}),n=r,i=n;void 0!==e.diffuse&&""!==e.diffuse.raw&&(n=l.createTexture(this._gl,{src:null===(t=e.diffuse)||void 0===t?void 0:t.raw,min:"linear"===e.interpolation?this._gl.LINEAR:this._gl.NEAREST,mag:"linear"===e.interpolation?this._gl.LINEAR:this._gl.NEAREST,wrap:"clamp"===e.extension?this._gl.CLAMP_TO_EDGE:this._gl.REPEAT})),"UseAlphaMap"===e.transparency.type&&(i=r,void 0!==e.transparency.alpha&&""!==e.transparency.alpha.raw&&(i=l.createTexture(this._gl,{src:e.transparency.alpha.raw,min:"linear"===e.interpolation?this._gl.LINEAR:this._gl.NEAREST,mag:"linear"===e.interpolation?this._gl.LINEAR:this._gl.NEAREST,wrap:"clamp"===e.extension?this._gl.CLAMP_TO_EDGE:this._gl.REPEAT})));var o="UseAlphaValue"===e.transparency.type?e.transparency.alpha:1,a=m.EImageChannel.MAX;switch(e.transparency.type){case"UseAlphaValue":a=m.EImageChannel.MAX;break;case"UseDiffuseMapAlphaChannel":a=m.EImageChannel.A;break;case"UseAlphaMap":a=e.transparency.channel}return{type:d.MaterialType.textured,diffuseTexture:n,alphaTexture:i,alphaValue:o,alphaChannel:a}},e.prototype.recreateMaterialBuffer=function(e,t){var r=this._materialBuffers.get(e);(0,y.ASSERT)(void 0!==r);var n=this._createInternalMaterial(t);this._materialBuffers.set(e,{buffer:r.buffer,material:n,numElements:r.numElements,materialName:e})},e.prototype.useMesh=function(e){this._materialBuffers=new Map;for(var t=0,r=e.buffers;t<r.length;t++){var n=r[t],i=n.material,o=n.buffer,s=n.numElements,u=n.materialName,c=this._createInternalMaterial(i);this._materialBuffers.set(u,{buffer:l.createBufferInfoFromArrays(this._gl,o),material:c,numElements:s,materialName:u})}this._gridBuffers.x[a.TriangleMesh]=h.DebugGeometryTemplates.gridX(e.dimensions),this._gridBuffers.y[a.TriangleMesh]=h.DebugGeometryTemplates.gridY(e.dimensions),this._gridBuffers.z[a.TriangleMesh]=h.DebugGeometryTemplates.gridZ(e.dimensions),this._modelsAvailable=1,this.setModelToUse(a.TriangleMesh)},e.prototype.useVoxelMeshChunk=function(e){var t;if(e.isFirstChunk&&(this._voxelBuffer=[]),this._allVoxelChunks=!e.moreVoxelsToBuffer,null===(t=this._voxelBuffer)||void 0===t||t.push(l.createBufferInfoFromArrays(this._gl,e.buffer.buffer)),this._voxelSize=e.voxelSize,e.isFirstChunk){var r=this._voxelSize,n=new _.Vector3(0,0,0);n.setFrom(e.dimensions),this._gridOffset=new _.Vector3(n.x%2==0?0:-.5,n.y%2==0?0:-.5,n.z%2==0?0:-.5),n.add(1),this._gridBuffers.x[a.VoxelMesh]=h.DebugGeometryTemplates.gridX(_.Vector3.mulScalar(n,r),r),this._gridBuffers.y[a.VoxelMesh]=h.DebugGeometryTemplates.gridY(_.Vector3.mulScalar(n,r),r),this._gridBuffers.z[a.VoxelMesh]=h.DebugGeometryTemplates.gridZ(_.Vector3.mulScalar(n,r),r),this._modelsAvailable=2,this.setModelToUse(a.VoxelMesh)}},e.prototype.useBlockMeshChunk=function(e){var t;e.isFirstChunk&&(this._blockBuffer=[]),null===(t=this._blockBuffer)||void 0===t||t.push(l.createBufferInfoFromArrays(this._gl,e.buffer.buffer)),e.isFirstChunk&&(this._atlasTexture=l.createTexture(this._gl,{src:e.atlasTexturePath,mag:this._gl.NEAREST}),this._atlasSize=e.atlasSize,this._gridBuffers.y[a.BlockMesh]=this._gridBuffers.y[a.VoxelMesh],this._modelsAvailable=3,this.setModelToUse(a.BlockMesh))},e.prototype._drawDebug=function(){if(this._gridEnabled)if(!u.ArcballCamera.Get.isAlignedWithAxis("x")||u.ArcballCamera.Get.isAlignedWithAxis("y")||u.ArcballCamera.Get.isUserRotating)if(!u.ArcballCamera.Get.isAlignedWithAxis("z")||u.ArcballCamera.Get.isAlignedWithAxis("y")||u.ArcballCamera.Get.isUserRotating)void 0!==(e=this._gridBuffers.y[this._meshToUse])&&this._drawBuffer(this._gl.LINES,e.getWebGLBuffer(),g.ShaderManager.Get.debugProgram,{u_worldViewProjection:u.ArcballCamera.Get.getWorldViewProjection()});else{var e;void 0!==(e=this._gridBuffers.z[this._meshToUse])&&this._drawBuffer(this._gl.LINES,e.getWebGLBuffer(),g.ShaderManager.Get.debugProgram,{u_worldViewProjection:u.ArcballCamera.Get.getWorldViewProjection()})}else void 0!==(e=this._gridBuffers.x[this._meshToUse])&&this._drawBuffer(this._gl.LINES,e.getWebGLBuffer(),g.ShaderManager.Get.debugProgram,{u_worldViewProjection:u.ArcballCamera.Get.getWorldViewProjection()});this._axesEnabled&&(this._gl.disable(this._gl.DEPTH_TEST),this._drawBuffer(this._gl.LINES,this._axisBuffer.getWebGLBuffer(),g.ShaderManager.Get.debugProgram,{u_worldViewProjection:u.ArcballCamera.Get.getWorldViewProjection()}),this._gl.enable(this._gl.DEPTH_TEST))},e.prototype._drawMesh=function(){var e=this;this._materialBuffers.forEach((function(t,r){var n;t.material.type===d.MaterialType.textured?e._drawMeshBuffer(t.buffer,t.numElements,g.ShaderManager.Get.textureTriProgram,{u_lightWorldPos:u.ArcballCamera.Get.getCameraPosition(-Math.PI/4,0).toArray(),u_worldViewProjection:u.ArcballCamera.Get.getWorldViewProjection(),u_worldInverseTranspose:u.ArcballCamera.Get.getWorldInverseTranspose(),u_texture:t.material.diffuseTexture,u_alpha:null!==(n=t.material.alphaTexture)&&void 0!==n?n:t.material.diffuseTexture,u_alphaChannel:t.material.alphaChannel,u_alphaFactor:t.material.alphaValue,u_cameraDir:u.ArcballCamera.Get.getCameraDirection().toArray(),u_fresnelExponent:f.AppConfig.Get.FRESNEL_EXPONENT,u_fresnelMix:f.AppConfig.Get.FRESNEL_MIX}):e._drawMeshBuffer(t.buffer,t.numElements,g.ShaderManager.Get.solidTriProgram,{u_lightWorldPos:u.ArcballCamera.Get.getCameraPosition(-Math.PI/4,0).toArray(),u_worldViewProjection:u.ArcballCamera.Get.getWorldViewProjection(),u_worldInverseTranspose:u.ArcballCamera.Get.getWorldInverseTranspose(),u_fillColour:t.material.colourArray,u_cameraDir:u.ArcballCamera.Get.getCameraDirection().toArray(),u_fresnelExponent:f.AppConfig.Get.FRESNEL_EXPONENT,u_fresnelMix:f.AppConfig.Get.FRESNEL_MIX})}))},e.prototype._drawVoxelMesh=function(){var e,t=this,r=g.ShaderManager.Get.voxelProgram,n={u_worldViewProjection:u.ArcballCamera.Get.getWorldViewProjection(),u_voxelSize:this._voxelSize,u_gridOffset:this._gridOffset.toArray(),u_ambientOcclusion:this._allVoxelChunks};null===(e=this._voxelBuffer)||void 0===e||e.forEach((function(e){t._gl.useProgram(r.program),l.setBuffersAndAttributes(t._gl,r,e),l.setUniforms(r,n),t._gl.drawElements(t._gl.TRIANGLES,e.numElements,t._gl.UNSIGNED_INT,0)}))},e.prototype._drawBlockMesh=function(){var e,t=this;this._gl.enable(this._gl.CULL_FACE);var r=g.ShaderManager.Get.blockProgram,n={u_worldViewProjection:u.ArcballCamera.Get.getWorldViewProjection(),u_texture:this._atlasTexture,u_voxelSize:this._voxelSize,u_atlasSize:this._atlasSize,u_gridOffset:this._gridOffset.toArray(),u_nightVision:this.isNightVisionEnabled()};null===(e=this._blockBuffer)||void 0===e||e.forEach((function(e){t._gl.useProgram(r.program),l.setBuffersAndAttributes(t._gl,r,e),l.setUniforms(r,n),t._gl.drawElements(t._gl.TRIANGLES,e.numElements,t._gl.UNSIGNED_INT,0)})),this._gl.disable(this._gl.CULL_FACE)},e.prototype._drawMeshBuffer=function(e,t,r,n){this._drawBuffer(this._gl.TRIANGLES,{buffer:e,numElements:t},r,n)},e.prototype.setModelToUse=function(e){this._modelsAvailable>=e&&(this._meshToUse=e)},e.prototype._setupScene=function(){l.resizeCanvasToDisplaySize(this._gl.canvas),this._gl.viewport(0,0,this._gl.canvas.width,this._gl.canvas.height),u.ArcballCamera.Get.setAspect(this._gl.canvas.width/this._gl.canvas.height),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.enable(this._gl.DEPTH_TEST),this._gl.enable(this._gl.BLEND),this._gl.clearColor(this._backgroundColour.r,this._backgroundColour.g,this._backgroundColour.b,1),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT)},e.prototype._drawBuffer=function(e,t,r,n){this._gl.useProgram(r.program),l.setBuffersAndAttributes(this._gl,r,t.buffer),l.setUniforms(r,n),this._gl.drawElements(e,t.numElements,this._gl.UNSIGNED_INT,0)},e.prototype.getModelsAvailable=function(){return this._modelsAvailable},e.prototype.getActiveMeshType=function(){return this._meshToUse},e}();t.Renderer=b},1708:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderManager=void 0;var s=o(r(3141)),l=a(r(9464)),u=a(r(5697)),c=a(r(3112)),f=a(r(3016)),h=a(r(8510)),d=a(r(6203)),p=a(r(5279)),g=a(r(225)),m=a(r(4706)),y=a(r(8133)),_=r(3419),b=function(){function e(){var e=_.Renderer.Get._gl;this.textureTriProgram=s.createProgramInfo(e,[g.default,p.default]),this.solidTriProgram=s.createProgramInfo(e,[d.default,h.default]),this.voxelProgram=s.createProgramInfo(e,[y.default,m.default]),this.blockProgram=s.createProgramInfo(e,[u.default,l.default]),this.debugProgram=s.createProgramInfo(e,[f.default,c.default])}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e}();t.ShaderManager=b},1535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusHandler=t.StatusID=void 0;var n,i=r(9882),o=r(2989),a=r(3243);(n=t.StatusID||(t.StatusID={}))[n.SchematicUnsupportedBlocks=0]="SchematicUnsupportedBlocks";var s=function(){function e(){this._statusMessages=[]}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._statusMessages=[]},e.prototype.add=function(e,t,r){("warning"===e?a.LOG_WARN:a.LOG)(t),this._statusMessages.push({status:e,message:t,id:r})},e.prototype.hasId=function(e){return this._statusMessages.some((function(t){return t.id===e}))},e.prototype.hasStatusMessages=function(e){return this.getStatusMessages(e).length>0},e.prototype.getStatusMessages=function(e){return(void 0!==e?this._statusMessages.filter((function(t){return t.status===e})):this._statusMessages).map((function(e){return e.message}))},e.prototype.getAllStatusMessages=function(){return this._statusMessages},e.prototype.getDefaultSuccessMessage=function(e){switch(e){case i.EAction.Import:return"[Importer]: Loaded";case i.EAction.Materials:return"[Materials]: Updated";case i.EAction.Voxelise:return"[Voxeliser]: Succeeded";case i.EAction.Assign:return"[Assigner]: Succeeded";case i.EAction.Export:return"[Exporter]: Saved";default:(0,o.ASSERT)(!1,"Unknown action")}},e.prototype.getDefaultFailureMessage=function(e){switch(e){case i.EAction.Import:return"[Importer]: Failed";case i.EAction.Materials:return"[Materials]: Failed";case i.EAction.Voxelise:return"[Voxeliser]: Failed";case i.EAction.Assign:return"[Assigner]: Failed";case i.EAction.Export:return"[Exporter]: Failed";default:(0,o.ASSERT)(!1,"Unknown action")}},e.prototype.dump=function(){for(var e=0,t=this._statusMessages;e<t.length;e++){var r=t[e],n=r.message;"warning"===r.status?(0,a.LOG_WARN)(n):(0,a.LOG_MAJOR)("  - "+n)}return this},e}();t.StatusHandler=s},9962:(e,t,r)=>{"use strict";var n=r(3085).lW;Object.defineProperty(t,"__esModule",{value:!0}),t.TextureConverter=t.Texture=t.EImageChannel=t.TextureFiltering=t.TextureFormat=void 0;var i,o,a,s=r(5477),l=r(4405),u=r(6490),c=r(9882),f=r(2989),h=r(3243);(a=t.TextureFormat||(t.TextureFormat={}))[a.PNG=0]="PNG",a[a.JPEG=1]="JPEG",(o=t.TextureFiltering||(t.TextureFiltering={}))[o.Linear=0]="Linear",o[o.Nearest=1]="Nearest",function(e){e[e.R=0]="R",e[e.G=1]="G",e[e.B=2]="B",e[e.A=3]="A",e[e.MAX=4]="MAX"}(i=t.EImageChannel||(t.EImageChannel={}));var d=function(){function e(e){this._image=this._readRawData(e.diffuse),this._alphaImage="UseAlphaMap"===e.transparency.type?this._readRawData(e.transparency.alpha):this._image}return e.prototype._readRawData=function(e){if("png"===(null==e?void 0:e.filetype)){var t=e.raw.split(",")[1];if(void 0!==t)return s.PNG.sync.read(n.from(t,"base64"))}},e.prototype._correctTexcoord=function(e){if(Number.isInteger(e))return e>.5?1:0;var t=Math.abs(e)-Math.floor(Math.abs(e));return e<0?1-t:t},e.prototype.getRGBA=function(e,t,r){var n=new c.UV(0,0);"clamp"===r?(n.u=(0,u.clamp)(e.u,0,1),n.v=(0,u.clamp)(e.v,0,1)):(n.u=this._correctTexcoord(e.u),n.v=this._correctTexcoord(e.v)),(0,f.ASSERT)(n.u>=0&&n.u<=1,"Texcoord UV.u OOB"),(0,f.ASSERT)(n.v>=0&&n.v<=1,"Texcoord UV.v OOB"),n.v=1-n.v;var i=void 0===this._image?l.RGBAColours.MAGENTA:"nearest"===t?this._getNearestRGBA(this._image,n):this._getLinearRGBA(this._image,n),o=void 0===this._alphaImage?l.RGBAColours.MAGENTA:"nearest"===t?this._getNearestRGBA(this._alphaImage,n):this._getLinearRGBA(this._alphaImage,n);return{r:i.r,g:i.g,b:i.b,a:o.a}},e.prototype._getLinearRGBA=function(t,r){var n=r.u*t.width,i=r.v*t.height,o=Math.floor(n),a=o+1,s=Math.floor(i),u=s+1,c=n-o,f=i-s;if(!(c>=0&&c<=1&&f>=0&&f<=1))return l.RGBAColours.MAGENTA;var h=e._sampleImage(o,s,this._image),d=e._sampleImage(a,s,this._image),p=l.RGBAUtil.lerp(h,d,c),g=e._sampleImage(o,u,this._image),m=e._sampleImage(a,u,this._image),y=l.RGBAUtil.lerp(g,m,c);return l.RGBAUtil.lerp(p,y,f)},e.prototype._getNearestRGBA=function(t,r){var n=Math.floor(r.u*t.width),i=Math.floor(r.v*t.height);return e._sampleImage(n,i,t)},e.prototype._sampleChannel=function(e,t){switch(t){case i.R:return e.r;case i.G:return e.g;case i.B:return e.b;case i.A:return e.a}},e.prototype._useAlphaChannel=function(){if((0,f.ASSERT)(void 0!==this._alphaImage),void 0!==this._useAlphaChannelValue)return this._useAlphaChannelValue;for(var t=0;t<this._alphaImage.width;++t)for(var r=0;r<this._alphaImage.height;++r)if(1!=e._sampleImage(t,r,this._alphaImage).a)return(0,h.LOG)("Using alpha channel"),this._useAlphaChannelValue=!0,!0;return(0,h.LOG)("Using red channel"),this._useAlphaChannelValue=!1,!1},e._sampleImage=function(e,t,r){if(void 0===r)return l.RGBAColours.MAGENTA;e=(0,u.clamp)(e,0,r.width-1),t=(0,u.clamp)(t,0,r.height-1);var n=4*(r.width*t+e),i=r.data.slice(n,n+4);return{r:i[0]/255,g:i[1]/255,b:i[2]/255,a:i[3]/255}},e}();t.Texture=d;var p=function(){function e(){}return e.createPNGfromTGA=function(e){return""},e}();t.TextureConverter=p},8218:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.UVTriangle=t.Triangle=void 0;var o=r(7168),a=r(7464),s=function(){function e(e,t,r){this.v0=e,this.v1=t,this.v2=r}return e.prototype.getCentre=function(){return a.Vector3.divScalar(a.Vector3.add(a.Vector3.add(this.v0,this.v1),this.v2),3)},e.prototype.getArea=function(){var e=a.Vector3.sub(this.v0,this.v1).magnitude(),t=a.Vector3.sub(this.v1,this.v2).magnitude(),r=a.Vector3.sub(this.v2,this.v0).magnitude(),n=(e+t+r)/2;return Math.sqrt(n*(n-e)*(n-t)*(n-r))},e.prototype.getNormal=function(){var e=a.Vector3.sub(this.v0,this.v1),t=a.Vector3.sub(this.v0,this.v2);return a.Vector3.cross(e,t).normalise()},e.prototype.getBounds=function(){return new o.Bounds(new a.Vector3(Math.min(this.v0.x,this.v1.x,this.v2.x),Math.min(this.v0.y,this.v1.y,this.v2.y),Math.min(this.v0.z,this.v1.z,this.v2.z)),new a.Vector3(Math.max(this.v0.x,this.v1.x,this.v2.x),Math.max(this.v0.y,this.v1.y,this.v2.y),Math.max(this.v0.z,this.v1.z,this.v2.z)))},e}();t.Triangle=s;var l=function(e){function t(t,r,n,i,o,a,s,l,u){var c=e.call(this,t,r,n)||this;return c.n0=i,c.n1=o,c.n2=a,c.uv0=s,c.uv1=l,c.uv2=u,c}return i(t,e),t}(s);t.UVTriangle=l},656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseUIElement=void 0;var n=r(9882),i=r(219),o=function(){function e(){this._id=(0,n.getRandomID)(),this._isEnabled=!0,this._obeyGroupEnables=!0}return e.prototype.getEnabled=function(){return this._isEnabled},e.prototype.setEnabled=function(e,t){void 0===t&&(t=!0),e&&t&&!this._obeyGroupEnables||(this._isEnabled=e,this._onEnabledChanged())},e.prototype.setShouldObeyGroupEnables=function(e){return this._obeyGroupEnables=e,this},e.prototype.finalise=function(){this._onEnabledChanged()},e.prototype._getElement=function(){return i.UIUtil.getElementById(this._id)},e.prototype._getId=function(){return this._id},e}();t.BaseUIElement=o},9251:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonElement=void 0;var o=r(219),a=function(e){function t(){var t=e.call(this)||this;return t._label="Unknown",t._onClick=function(){},t}return i(t,e),t.prototype.setOnClick=function(e){return this._onClick=e,this},t.prototype.setLabel=function(e){return this._label=e,this},t.prototype.setLabelOverride=function(e){return this._getElement().innerHTML=e,this},t.prototype.removeLabelOverride=function(){return this._getElement().innerHTML=this._label,this},t.prototype.startLoading=function(){return this._getElement().classList.add("button-loading"),this},t.prototype.setProgress=function(e){return o.UIUtil.getElementById(this._getProgressBarId()).style.width="".concat(100*e,"%"),this},t.prototype.stopLoading=function(){return this._getElement().classList.remove("button-loading"),this},t.prototype.generateHTML=function(){return'\n            <div class="button" id="'.concat(this._getId(),'">\n                <div class="button-label">').concat(this._label,'</div>\n                <div class="button-progress" id="').concat(this._getProgressBarId(),'"></div>\n            </div>\n        ')},t.prototype.registerEvents=function(){var e=this;this._getElement().addEventListener("click",(function(){var t;e.getEnabled()&&(null===(t=e._onClick)||void 0===t||t.call(e))}))},t.prototype._onEnabledChanged=function(){this.getEnabled()?this._getElement().classList.remove("button-disabled"):this._getElement().classList.add("button-disabled")},t.prototype._getProgressBarId=function(){return this._getId()+"-progress"},t}(r(656).BaseUIElement);t.ButtonElement=a},2960:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxElement=void 0;var o=r(219),a=function(e){function t(){var t=e.call(this,!1)||this;return t._labelChecked="On",t._labelUnchecked="Off",t}return i(t,e),t.prototype.setCheckedText=function(e){return this._labelChecked=e,this},t.prototype.setUncheckedText=function(e){return this._labelUnchecked=e,this},t.prototype.registerEvents=function(){var e=this,t=this._getElement(),r=o.UIUtil.getElementById(this._getPipId());t.addEventListener("mouseenter",(function(){e.getEnabled()&&(t.classList.add("checkbox-hover"),r.classList.add("checkbox-pip-hover"))})),t.addEventListener("mouseleave",(function(){e.getEnabled()&&(t.classList.remove("checkbox-hover"),r.classList.remove("checkbox-pip-hover"))})),t.addEventListener("click",(function(){e.getEnabled()&&e._setValue(!e.getValue())}))},t.prototype._generateInnerHTML=function(){return'\n            <div class="checkbox" id="'.concat(this._getId(),'">\n                <svg id="').concat(this._getPipId(),'" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-check" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n                    <path d="M5 12l5 5l10 -10" />\n                </svg>\n            </div>\n            <div class="checkbox-text" id="').concat(this._getLabelId(),'">').concat(this.getValue()?this._labelChecked:this._labelUnchecked,"</div>\n        ")},t.prototype._onValueChanged=function(){var e=this._getElement(),t=o.UIUtil.getElementById(this._getPipId());o.UIUtil.getElementById(this._getLabelId()).innerHTML=this.getValue()?this._labelChecked:this._labelUnchecked,t.style.visibility=this.getValue()?"visible":"hidden",this.getEnabled()?e.classList.remove("checkbox-disabled"):e.classList.add("checkbox-disabled")},t.prototype._onEnabledChanged=function(){e.prototype._onEnabledChanged.call(this);var t=this._getElement(),r=o.UIUtil.getElementById(this._getPipId()),n=o.UIUtil.getElementById(this._getLabelId());this.getEnabled()?(t.classList.remove("checkbox-disabled"),n.classList.remove("checkbox-text-disabled"),r.classList.remove("checkbox-pip-disabled")):(t.classList.add("checkbox-disabled"),n.classList.add("checkbox-text-disabled"),r.classList.add("checkbox-pip-disabled"))},t.prototype._getPipId=function(){return this._getId()+"-pip"},t.prototype._getLabelId=function(){return this._getId()+"-label"},t}(r(295).ConfigUIElement);t.CheckboxElement=a},3538:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ComboBoxElement=void 0;var o=function(e){function t(){var t=e.call(this)||this;return t._items=[],t._small=!1,t}return i(t,e),t.prototype.addItems=function(e){var t=this;return e.forEach((function(e){t.addItem(e)})),this},t.prototype.addItem=function(e){return this._items.push(e),this._setValue(this._items[0].payload),this},t.prototype.setSmall=function(){return this._small=!0,this},t.prototype.registerEvents=function(){var e=this;this._getElement().addEventListener("change",(function(t){var r=e._items[e._getElement().selectedIndex].payload;e._setValue(r)}))},t.prototype._generateInnerHTML=function(){for(var e="",t=0,r=this._items;t<r.length;t++){var n=r[t];e+='<option value="'.concat(n.payload,'" title="').concat(n.tooltip||"",'">').concat(n.displayText,"</option>")}return'\n            <select class="'.concat(this._small?"height-small":"height-normal",'" name="').concat(this._getId(),'" id="').concat(this._getId(),'">\n                ').concat(e,"\n            </select>\n        ")},t.prototype._onEnabledChanged=function(){e.prototype._onEnabledChanged.call(this),this._getElement().disabled=!this.getEnabled()},t.prototype._onValueChanged=function(){},t.prototype.finalise=function(){var e=this,t=this._items.findIndex((function(t){return t.payload===e.getValue()}));this._getElement().selectedIndex=t},t}(r(295).ConfigUIElement);t.ComboBoxElement=o},295:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigUIElement=void 0;var o=r(2989),a=r(656),s=r(5474),l=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r._label="unknown",r._hasLabel=!1,r._labelElement=new s.LabelElement(r._label,r._description),r._onValueChangedListeners=[],r._onEnabledChangedListeners=[],r}return i(t,e),t.prototype.setDefaultValue=function(e){return this._value=e,this},t.prototype.setLabel=function(e){return this._hasLabel=!0,this._label=e,this._labelElement=new s.LabelElement(this._label,this._description),this},t.prototype.setDescription=function(e){return this._labelElement=new s.LabelElement(this._label,e),this},t.prototype.cacheValue=function(){this._cachedValue=this._value},t.prototype.hasChanged=function(){return this._cachedValue!==this._value},t.prototype.getValue=function(){return(0,o.ASSERT)(void 0!==this._value,"this._value is undefined"),this._value},t.prototype.addValueChangedListener=function(e){return this._onValueChangedListeners.push(e),this},t.prototype.addEnabledChangedListener=function(e){return this._onEnabledChangedListeners.push(e),this},t.prototype.finalise=function(){var t=this;e.prototype.finalise.call(this),this._onValueChanged(),this._onValueChangedListeners.forEach((function(e){e(t._value)}))},t.prototype.generateHTML=function(){return"\n            ".concat(this._labelElement.generateHTML(),'\n            <div class="prop-value-container">\n                ').concat(this._generateInnerHTML(),"\n            </div>\n        ")},t.prototype._onEnabledChanged=function(){var e=this;this._hasLabel&&this._labelElement.setEnabled(this.getEnabled()),this._onEnabledChangedListeners.forEach((function(t){t(e.getEnabled())}))},t.prototype._setValue=function(e){var t=this;this._value=e,this._onValueChanged(),this._onValueChangedListeners.forEach((function(e){e(t._value)}))},t}(a.BaseUIElement);t.ConfigUIElement=l},4208:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FileInputElement=void 0;var l=s(r(6470)),u=r(2989),c=r(219),f=function(e){function t(){var t=e.call(this,Promise.resolve(""))||this;return t._fileExtensions=[],t._loadedFilePath="",t._hovering=!1,t}return i(t,e),t.prototype.setFileExtensions=function(e){return this._fileExtensions=e,this},t.prototype._generateInnerHTML=function(){return'\n            <div class="input-file" id="'.concat(this._getId(),'">\n                <input type="file" accept=".obj" style="display: none;" id="').concat(this._getId(),'-input">\n                ').concat(this._loadedFilePath,"\n            </div>\n        ")},t.prototype.registerEvents=function(){var e=this;this._getElement().addEventListener("mouseenter",(function(){e._hovering=!0,e._updateStyle()})),this._getElement().addEventListener("mouseleave",(function(){e._hovering=!1,e._updateStyle()}));var t=c.UIUtil.getElementById(this._getId()+"-input");t.addEventListener("change",(function(){var r=t.files;if(1===(null==r?void 0:r.length)){var n=r.item(0);(0,u.ASSERT)(null!==n),e._loadedFilePath=n.name,e._setValue(n.text())}})),this._getElement().addEventListener("click",(function(){e.getEnabled()&&t.click()})),this._getElement().addEventListener("mousemove",(function(){e._updateStyle()}))},t.prototype._onEnabledChanged=function(){e.prototype._onEnabledChanged.call(this),this.getEnabled()?this._getElement().classList.remove("input-file-disabled"):this._getElement().classList.add("input-file-disabled")},t.prototype._onValueChanged=function(){var e=l.parse(this._loadedFilePath);this._getElement().innerHTML=e.name+e.ext},t.prototype._updateStyle=function(){this._getElement().classList.remove("input-file-disabled"),this._getElement().classList.remove("input-file-hover"),this.getEnabled()?this._hovering&&this._getElement().classList.add("input-file-hover"):this._getElement().classList.add("input-file-disabled")},t}(r(295).ConfigUIElement);t.FileInputElement=f},970:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ImageElement=void 0;var o=r(9882),a=r(2989),s=r(219),l=r(3672),u=r(295),c=r(5033),f=function(e){function t(t){var r=e.call(this,Promise.resolve(null!=t?t:""))||this;return r._switchElement=new c.ToolbarItemElement({iconSVG:l.AppIcons.UPLOAD}).setSmall().setLabel("Choose").onClick((function(){s.UIUtil.getElementById(r._getId()+"-input").click()})),r._imageId=(0,o.getRandomID)(),r}return i(t,e),t.prototype._generateInnerHTML=function(){return'\n            <div class="row-container">\n                <div class="row-item">\n                    <img id="'.concat(this._imageId,'" class="texture-preview" loading="lazy"></img>\n                </div>\n                <div class="row-item">\n                <div class="col-container">\n                        <div class="col-item">\n                            <input type="file" accept="images/png" style="display: none;" id="').concat(this._getId(),'-input">\n                            ').concat(this._switchElement.generateHTML(),"\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")},t.prototype.registerEvents=function(){var e=this;this._switchElement.registerEvents();var t=s.UIUtil.getElementById(this._getId()+"-input");t.addEventListener("change",(function(){var r=t.files;if(1===(null==r?void 0:r.length)){var n=r.item(0);(0,a.ASSERT)(null!==n),e._setValue(new Promise((function(e,t){var r=new FileReader;r.onload=function(){"string"==typeof r.result?e(r.result):t(Error())},r.readAsDataURL(n)})))}}))},t.prototype._onEnabledChanged=function(){},t.prototype._onValueChanged=function(){var e=this,t=s.UIUtil.getElementById(this._imageId);this.getValue().then((function(r){if(""===r)throw Error();e._switchElement.setActive(!1),t.src=r,t.style.display="unset"})).catch((function(r){e._switchElement.setActive(!0),t.src="",t.style.display="none"}))},t.prototype.finalise=function(){e.prototype.finalise.call(this),this._onValueChanged()},t}(u.ConfigUIElement);t.ImageElement=f},5474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelElement=void 0;var n=r(9882),i=r(2989),o=function(){function e(e,t){this._id=(0,n.getRandomID)(),this._text=e,this._description=t}return e.prototype.generateHTML=function(){return void 0===this._description?'\n                <div class="prop-key-container" id="'.concat(this._id,'">\n                    ').concat(this._text,"\n                </div>\n            "):'\n                <div class="prop-key-container" id="'.concat(this._id,'">\n                    <abbr title="').concat(this._description,'">').concat(this._text,"</abbr>\n                </div>\n            ")},e.prototype.setEnabled=function(e){var t=document.getElementById(this._id);(0,i.ASSERT)(null!==t),e?t.classList.remove("prop-key-container-disabled"):t.classList.add("prop-key-container-disabled")},e}();t.LabelElement=o},8365:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialTypeElement=void 0;var o=r(4790),a=r(3672),s=r(295),l=r(5033),u=function(e){function t(t){var r=e.call(this,t)||this;return r._switchElement=new l.ToolbarItemElement({iconSVG:a.AppIcons.SWITCH}).setSmall().setLabel("Switch").onClick((function(){var e;null===(e=r._onClickChangeTypeDelegate)||void 0===e||e.call(r)})),r}return i(t,e),t.prototype._generateInnerHTML=function(){var e=this.getValue();return'\n            <div class="row-container">\n                <div class="row-item">\n                    '.concat(e===o.MaterialType.solid?"Solid":"Textured",'\n                </div>\n                <div class="row-item">\n                <div class="col-container">\n                        <div class="col-item">\n                            ').concat(this._switchElement.generateHTML(),"\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")},t.prototype.registerEvents=function(){this._switchElement.registerEvents()},t.prototype._onEnabledChanged=function(){},t.prototype._onValueChanged=function(){},t.prototype.onClickChangeTypeDelegate=function(e){return this._onClickChangeTypeDelegate=e,this},t}(s.ConfigUIElement);t.MaterialTypeElement=u},2242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputElement=void 0;var n=r(2989),i=r(3769),o=function(){function e(){this._id="_"+Math.random().toString(16),this._message=new i.UIMessageBuilder}return e.prototype.generateHTML=function(){return'\n            <div class="item-body-sunken" id="'.concat(this._id,'">\n            </div>\n        ')},e.prototype.setMessage=function(e,t){var r=document.getElementById(this._id);(0,n.ASSERT)(null!==r),this._message=e,r.innerHTML=this._message.toString()},e.prototype.getMessage=function(){return this._message},e.prototype.setTaskInProgress=function(e,t){this.getMessage().clear(e).addTask(e,t),this.updateMessage()},e.prototype.setTaskComplete=function(e,t,r,n){var i=this.getMessage().clear(e);r.length>0?i.addHeading(e,t,n):i.addBold(e,[t],n),i.addItem(e,r,n),this.updateMessage()},e.prototype.updateMessage=function(){var e=document.getElementById(this._id);(0,n.ASSERT)(null!==e),e.innerHTML=this._message.toString(),this._message.postBuild()},e.prototype.setStyle=function(e){var t=document.getElementById(this._id);switch((0,n.ASSERT)(null!==t),t.classList.remove("border-success"),t.classList.remove("border-warning"),t.classList.remove("border-error"),e){case"success":t.classList.add("border-success");break;case"warning":t.classList.add("border-warning");break;case"error":t.classList.add("border-error")}},e}();t.OutputElement=o},6199:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SliderElement=void 0;var o=r(6490),a=r(2989),s=r(219),l=function(e){function t(){var t=e.call(this)||this;return t._min=0,t._max=1,t._decimals=1,t._step=.1,t._internalValue=.5,t._dragging=!1,t._hovering=!1,t._small=!1,t}return i(t,e),t.prototype.setDefaultValue=function(t){return e.prototype.setDefaultValue.call(this,t),this._internalValue=t,this},t.prototype.setSmall=function(){return this._small=!0,this},t.prototype.setMin=function(e){return this._min=e,this},t.prototype.setMax=function(e){return this._max=e,this},t.prototype.setDecimals=function(e){return this._decimals=e,this},t.prototype.setStep=function(e){return this._step=e,this},t.prototype.registerEvents=function(){var e=this,t=this._getElement(),r=s.UIUtil.getElementById(this._getSliderBarId()),n=s.UIUtil.getElementById(this._getSliderValueId());t.onmouseenter=function(){e._hovering=!0,e.getEnabled()&&(t.classList.add("new-slider-hover"),r.classList.add("new-slider-bar-hover"))},t.onmouseleave=function(){e._hovering=!1,e._dragging||(t.classList.remove("new-slider-hover"),r.classList.remove("new-slider-bar-hover"))},t.onmousedown=function(){e._dragging=!0},document.addEventListener("mousemove",(function(t){e._dragging&&e._onDragSlider(t)})),document.addEventListener("mouseup",(function(n){e._dragging&&e._onDragSlider(n),e._hovering||(t.classList.remove("new-slider-hover"),r.classList.remove("new-slider-bar-hover")),e._dragging=!1})),t.addEventListener("wheel",(function(t){!e._dragging&&e.getEnabled()&&(t.preventDefault(),e._onScrollSlider(t))})),n.addEventListener("change",(function(){e._onTypedValue()}))},t.prototype._generateInnerHTML=function(){var e=(this._internalValue-this._min)/(this._max-this._min);return'\n            <input class="'.concat(this._small?"slider-height-small":"slider-height-normal",'" type="number" id="').concat(this._getSliderValueId(),'" min="').concat(this._min,'" max="').concat(this._max,'" step="').concat(this._step,'" value="').concat(this.getValue().toFixed(this._decimals),'">\n            <div class="new-slider ').concat(this._small?"slider-bar-height-small":"slider-bar-height-normal",' " id="').concat(this._getId(),'" style="flex-grow: 1;">\n                <div class="new-slider-bar" id="').concat(this._getSliderBarId(),'" style="width: ').concat(100*e,'%;">\n                </div>\n            </div>\n        ')},t.prototype._onEnabledChanged=function(){e.prototype._onEnabledChanged.call(this);var t=this._getElement(),r=s.UIUtil.getElementById(this._getSliderBarId()),n=s.UIUtil.getElementById(this._getSliderValueId());this.getEnabled()?(t.classList.remove("new-slider-disabled"),r.classList.remove("new-slider-bar-disabled"),n.disabled=!1):(t.classList.add("new-slider-disabled"),r.classList.add("new-slider-bar-disabled"),n.disabled=!0)},t.prototype._onValueChanged=function(){var e=(0,o.wayThrough)(this.getValue(),this._min,this._max);(0,a.ASSERT)(e>=0&&e<=1),s.UIUtil.getElementById(this._getSliderBarId()).style.width="".concat(100*e,"%"),s.UIUtil.getElementById(this._getSliderValueId()).value=this.getValue().toFixed(this._decimals)},t.prototype._onScrollSlider=function(e){this.getEnabled()&&(this._internalValue-=e.deltaY/150*this._step,this._internalValue=(0,o.clamp)(this._internalValue,this._min,this._max),this._onInternalValueUpdated())},t.prototype._onDragSlider=function(e){if(this.getEnabled()){var t=this._getElement().getBoundingClientRect(),r=t.x,n=t.x+t.width;this._internalValue=(0,o.mapRange)(e.clientX,r,n,this._min,this._max),this._internalValue=(0,o.clamp)(this._internalValue,this._min,this._max),this._onInternalValueUpdated()}},t.prototype._onTypedValue=function(){var e=s.UIUtil.getElementById(this._getSliderValueId()),t=parseFloat(e.value);isNaN(t)||(this._internalValue=(0,o.clamp)(t,this._min,this._max)),this._onInternalValueUpdated()},t.prototype._onInternalValueUpdated=function(){var e=this._internalValue.toFixed(this._decimals);this._setValue(parseFloat(e))},t.prototype._getSliderValueId=function(){return this._getId()+"-value"},t.prototype._getSliderBarId=function(){return this._getId()+"-bar"},t}(r(295).ConfigUIElement);t.SliderElement=l},1333:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SolidMaterialElement=void 0;var o=r(4405),a=r(4790),s=r(9882),l=r(219),u=r(295),c=r(8365),f=r(6199),h=function(e){function t(t,r){var n=e.call(this,r)||this;return n._materialName=t,n._colourId=(0,s.getRandomID)(),n._typeElement=new c.MaterialTypeElement(a.MaterialType.solid),n._alphaElement=(new f.SliderElement).setMin(0).setMax(1).setDefaultValue(r.colour.a).setDecimals(2).setStep(.01).setSmall(),n}return i(t,e),t.prototype.registerEvents=function(){var e=this;this._typeElement.registerEvents(),this._alphaElement.registerEvents(),this._typeElement.onClickChangeTypeDelegate((function(){var t;null===(t=e._onChangeTypeDelegate)||void 0===t||t.call(e)})),this._alphaElement.addValueChangedListener((function(t){e.getValue().colour.a=t}));var t=l.UIUtil.getElementById(this._colourId);t.addEventListener("change",(function(){e.getValue().colour=o.RGBAUtil.fromHexString(t.value)}))},t.prototype._generateInnerHTML=function(){var e=this.getValue(),t=[],r=function(e,r){t.push('\n                <div class="subproperty">\n                    <div class="subprop-key-container">\n                        '.concat(e,'\n                    </div>\n                    <div class="subprop-value-container">\n                        ').concat(r,"\n                    </div>\n                </div>\n            "))};return r("Type",this._typeElement._generateInnerHTML()),r("Colour",'<input class="colour-swatch" type="color" id="'.concat(this._colourId,'" value="').concat(o.RGBAUtil.toHexString(e.colour),'">')),r("Alpha",this._alphaElement._generateInnerHTML()),'\n            <div class="subproperty-container">\n                '.concat(t.join(""),"\n            </div>\n        ")},t.prototype._onValueChanged=function(){},t.prototype._onEnabledChanged=function(){e.prototype._onEnabledChanged.call(this)},t.prototype.onChangeTypeDelegate=function(e){return this._onChangeTypeDelegate=e,this},t}(u.ConfigUIElement);t.SolidMaterialElement=h},413:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TexturedMaterialElement=void 0;var o=r(4790),a=r(9962),s=r(9882),l=r(2989),u=r(3538),c=r(295),f=r(970),h=r(8365),d=r(6199),p=function(e){function t(t,r){var n,i,l=this;switch((l=e.call(this,r)||this)._materialName=t,l._colourId=(0,s.getRandomID)(),l._filteringElement=(new u.ComboBoxElement).addItem({payload:"linear",displayText:"Linear"}).addItem({payload:"nearest",displayText:"Nearest"}).setSmall().setDefaultValue(r.interpolation),l._wrapElement=(new u.ComboBoxElement).addItem({payload:"clamp",displayText:"Clamp"}).addItem({payload:"repeat",displayText:"Repeat"}).setSmall().setDefaultValue(r.extension),l._transparencyElement=(new u.ComboBoxElement).addItem({payload:"None",displayText:"None"}).addItem({payload:"UseAlphaMap",displayText:"Alpha map"}).addItem({payload:"UseAlphaValue",displayText:"Alpha constant"}).addItem({payload:"UseDiffuseMapAlphaChannel",displayText:"Diffuse map alpha channel"}).setSmall().setDefaultValue(r.transparency.type),l._imageElement=new f.ImageElement(null===(n=r.diffuse)||void 0===n?void 0:n.raw),l._typeElement=new h.MaterialTypeElement(o.MaterialType.textured),r.transparency.type){case"UseAlphaValue":l._alphaValueElement=(new d.SliderElement).setMin(0).setMax(1).setDefaultValue(r.transparency.alpha).setDecimals(2).setStep(.01).setSmall();break;case"UseAlphaMap":l._alphaMapElement=new f.ImageElement(null===(i=r.transparency.alpha)||void 0===i?void 0:i.raw),l._alphaChannelElement=(new u.ComboBoxElement).addItem({payload:a.EImageChannel.R,displayText:"Red"}).addItem({payload:a.EImageChannel.G,displayText:"Green"}).addItem({payload:a.EImageChannel.B,displayText:"Blue"}).addItem({payload:a.EImageChannel.A,displayText:"Alpha"}).setSmall().setDefaultValue(r.transparency.channel)}return l}return i(t,e),t.prototype.registerEvents=function(){var e,t,r,n,i,o,a=this;this._imageElement.registerEvents(),this._typeElement.registerEvents(),this._filteringElement.registerEvents(),this._wrapElement.registerEvents(),this._transparencyElement.registerEvents(),null===(e=this._alphaValueElement)||void 0===e||e.registerEvents(),null===(t=this._alphaMapElement)||void 0===t||t.registerEvents(),null===(r=this._alphaChannelElement)||void 0===r||r.registerEvents(),this._imageElement.addValueChangedListener((function(e){var t=a.getValue();e.then((function(e){t.diffuse={filetype:"png",raw:e}}))})),this._filteringElement.addValueChangedListener((function(e){a.getValue().interpolation=e})),this._wrapElement.addValueChangedListener((function(e){a.getValue().extension=e})),this._typeElement.onClickChangeTypeDelegate((function(){var e;null===(e=a._onChangeTypeDelegate)||void 0===e||e.call(a)})),null===(n=this._alphaValueElement)||void 0===n||n.addValueChangedListener((function(e){var t=a.getValue();(0,l.ASSERT)("UseAlphaValue"===t.transparency.type),t.transparency.alpha=e})),null===(i=this._alphaMapElement)||void 0===i||i.addValueChangedListener((function(e){var t=a.getValue();e.then((function(e){(0,l.ASSERT)("UseAlphaMap"===t.transparency.type),t.transparency.alpha={filetype:"png",raw:e}}))})),null===(o=this._alphaChannelElement)||void 0===o||o.addValueChangedListener((function(e){var t=a.getValue();(0,l.ASSERT)("UseAlphaMap"===t.transparency.type),t.transparency.channel=e})),this._transparencyElement.addValueChangedListener((function(e){var t;null===(t=a._onChangeTransparencyTypeDelegate)||void 0===t||t.call(a,e)}))},t.prototype._generateInnerHTML=function(){var e=[],t=function(t,r){e.push('\n                <div class="subproperty">\n                    <div class="subprop-key-container">\n                        '.concat(t,'\n                    </div>\n                    <div class="subprop-value-container">\n                        ').concat(r,"\n                    </div>\n                </div>\n            "))};return t("Type",this._typeElement._generateInnerHTML()),t("Diffuse map",this._imageElement._generateInnerHTML()),t("Filtering",this._filteringElement._generateInnerHTML()),t("Wrap",this._wrapElement._generateInnerHTML()),t("Transparency",this._transparencyElement._generateInnerHTML()),void 0!==this._alphaMapElement&&((0,l.ASSERT)(void 0!==this._alphaChannelElement),t("Alpha map",this._alphaMapElement._generateInnerHTML()),t("Channel",this._alphaChannelElement._generateInnerHTML())),this._alphaValueElement&&t("Alpha",this._alphaValueElement._generateInnerHTML()),'\n            <div class="subproperty-container">\n                '.concat(e.join(""),"\n            </div>\n        ")},t.prototype._onValueChanged=function(){},t.prototype._onEnabledChanged=function(){e.prototype._onEnabledChanged.call(this)},t.prototype.finalise=function(){var t,r,n;e.prototype.finalise.call(this),this._imageElement.finalise(),this._typeElement.finalise(),this._filteringElement.finalise(),this._wrapElement.finalise(),this._transparencyElement.finalise(),null===(t=this._alphaValueElement)||void 0===t||t.finalise(),null===(r=this._alphaMapElement)||void 0===r||r.finalise(),null===(n=this._alphaChannelElement)||void 0===n||n.finalise()},t.prototype.onChangeTypeDelegate=function(e){return this._onChangeTypeDelegate=e,this},t.prototype.onChangeTransparencyTypeDelegate=function(e){return this._onChangeTransparencyTypeDelegate=e,this},t}(c.ConfigUIElement);t.TexturedMaterialElement=p},5033:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarItemElement=void 0;var n=r(9882),i=r(2989),o=r(219),a=function(){function e(e){this._id=(0,n.getRandomID)();var t=(new DOMParser).parseFromString(e.iconSVG,"text/html").getElementsByTagName("svg");(0,i.ASSERT)(1===t.length,"Missing SVG"),this._iconSVG=t[0],this._iconSVG.id=this._id+"-svg",this._isEnabled=!0,this._isActive=!1,this._isHovering=!1,this._small=!1,this._label=""}return e.prototype.setSmall=function(){return this._small=!0,this},e.prototype.setLabel=function(e){return this._label=e,this},e.prototype.tick=function(){if(void 0!==this._isEnabledDelegate){var e=this._isEnabledDelegate();this.setEnabled(e)}if(void 0!==this._isActiveDelegate){var t=this._isActiveDelegate();this.setActive(t)}},e.prototype.isActive=function(e){return this._isActiveDelegate=e,this},e.prototype.isEnabled=function(e){return this._isEnabledDelegate=e,this},e.prototype.onClick=function(e){return this._onClick=e,this},e.prototype.generateHTML=function(){return'\n            <div class="toolbar-item '.concat(this._small?"toolbar-item-small":"",'" id="').concat(this._id,'">\n                ').concat(this._iconSVG.outerHTML," ").concat(this._label,"\n            </div>\n        ")},e.prototype.registerEvents=function(){var e=this,t=document.getElementById(this._id);(0,i.ASSERT)(null!==t),t.addEventListener("click",(function(){e._isEnabled&&e._onClick&&e._onClick()})),t.addEventListener("mouseenter",(function(){e._isHovering=!0,e._updateElements()})),t.addEventListener("mouseleave",(function(){e._isHovering=!1,e._updateElements()})),this._updateElements()},e.prototype._getSVGElement=function(){var e=this._id+"-svg";return o.UIUtil.getElementById(e)},e.prototype._updateElements=function(){var e=document.getElementById(this._id),t=this._getSVGElement();(0,i.ASSERT)(null!==e&&null!==t),e.classList.remove("toolbar-item-active-hover"),e.classList.remove("toolbar-item-disabled"),e.classList.remove("toolbar-item-active"),e.classList.remove("toolbar-item-hover"),this._isEnabled?this._isActive?this._isHovering?e.classList.add("toolbar-item-active-hover"):e.classList.add("toolbar-item-active"):this._isHovering&&e.classList.add("toolbar-item-hover"):e.classList.add("toolbar-item-disabled"),t.classList.remove("icon-disabled"),t.classList.remove("icon-active"),this._isEnabled?this._isActive&&t.classList.add("icon-active"):t.classList.add("icon-disabled")},e.prototype.setEnabled=function(e){this._isEnabled=e,this._updateElements()},e.prototype.setActive=function(e){this._isActive=e,this._updateElements()},e}();t.ToolbarItemElement=a},1375:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.VectorSpinboxElement=void 0;var o=r(2989),a=r(219),s=r(7464),l=function(e){function t(){var t=e.call(this,new s.Vector3(0,0,0))||this;return t._mouseover=null,t._dragging=null,t._lastClientX=0,t._showY=!0,t._wrap=1/0,t._units=null,t}return i(t,e),t.prototype.setShowY=function(e){return this._showY=e,this},t.prototype.setWrap=function(e){return this._wrap=e,this},t.prototype.setUnits=function(e){return this._units=e,this},t.prototype._generateInnerHTML=function(){var e="";return e+='<div class="spinbox-main-container">',e+='\n            <div class="spinbox-element-container">\n                <div class="spinbox-key" id="'.concat(this._getKeyId("x"),'">X</div>\n                <div class="spinbox-value" id="').concat(this._getValueId("x"),'">\n                    ').concat(this.getValue().x,"\n                </div>\n            </div>\n        "),this._showY&&(e+='\n                <div class="spinbox-element-container">\n                    <div class="spinbox-key" id="'.concat(this._getKeyId("y"),'">Y</div>\n                    <div class="spinbox-value" id="').concat(this._getValueId("y"),'">\n                        ').concat(this.getValue().y,"\n                    </div>\n                </div>\n            ")),(e+='\n            <div class="spinbox-element-container">\n                <div class="spinbox-key" id="'.concat(this._getKeyId("z"),'">Z</div>\n                <div class="spinbox-value" id="').concat(this._getValueId("z"),'">\n                    ').concat(this.getValue().z,"\n                </div>\n            </div>\n        "))+"</div>"},t.prototype._getKeyId=function(e){return this._getId()+"-k"+e},t.prototype._getValueId=function(e){return this._getId()+"-v"+e},t.prototype._registerAxis=function(e){var t=this,r=a.UIUtil.getElementById(this._getValueId(e));r.onmouseenter=function(){t._mouseover=e,t.getEnabled()&&r.classList.add("spinbox-value-hover")},r.onmouseleave=function(){t._mouseover=null,t._dragging!==e&&r.classList.remove("spinbox-value-hover")}},t.prototype.registerEvents=function(){var e=this;this._registerAxis("x"),this._showY&&this._registerAxis("y"),this._registerAxis("z"),document.addEventListener("mousedown",(function(t){e.getEnabled()&&null!==e._mouseover&&(e._dragging=e._mouseover,e._lastClientX=t.clientX)})),document.addEventListener("mousemove",(function(t){e.getEnabled()&&null!==e._dragging&&e._updateValue(t)})),document.addEventListener("mouseup",(function(){null!==e._dragging&&a.UIUtil.getElementById(e._getValueId(e._dragging)).classList.remove("spinbox-value-hover"),e._dragging=null}))},t.prototype._updateValue=function(e){(0,o.ASSERT)(this.getEnabled(),"Not enabled"),(0,o.ASSERT)(null!==this._dragging,"Dragging nothing");var t=e.clientX-this._lastClientX;this._lastClientX=e.clientX;var r=this.getValue().copy();switch(this._dragging){case"x":r.x=(r.x+t)%this._wrap;break;case"y":r.y=(r.y+t)%this._wrap;break;case"z":r.z=(r.z+t)%this._wrap}this._setValue(r)},t.prototype._onEnabledChanged=function(){e.prototype._onEnabledChanged.call(this);var t=[a.UIUtil.getElementById(this._getKeyId("x")),a.UIUtil.getElementById(this._getKeyId("y")),a.UIUtil.getElementById(this._getKeyId("z"))],r=[a.UIUtil.getElementById(this._getValueId("x")),a.UIUtil.getElementById(this._getValueId("y")),a.UIUtil.getElementById(this._getValueId("z"))];if(this.getEnabled()){for(var n=0,i=t;n<i.length;n++)null==(c=i[n])||c.classList.remove("spinbox-key-disabled");for(var o=0,s=r;o<s.length;o++)null==(d=s[o])||d.classList.remove("spinbox-value-disabled")}else{for(var l=0,u=t;l<u.length;l++){var c;null==(c=u[l])||c.classList.add("spinbox-key-disabled")}for(var f=0,h=r;f<h.length;f++){var d;null==(d=h[f])||d.classList.add("spinbox-value-disabled")}}},t.prototype._onValueChanged=function(){var e=a.UIUtil.getElementById(this._getValueId("x")),t=a.UIUtil.getElementById(this._getValueId("y")),r=a.UIUtil.getElementById(this._getValueId("z")),n=this.getValue().copy();e.innerHTML=n.x.toString()+this._units,t&&(t.innerHTML=n.y.toString()+this._units),r.innerHTML=n.z.toString()+this._units},t}(r(295).ConfigUIElement);t.VectorSpinboxElement=l},3672:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AppIcons=void 0,(r=t.AppIcons||(t.AppIcons={})).MESH='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-grain" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="mesh-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <circle cx="4.5" cy="9.5" r="1" />\n            <circle cx="9.5" cy="4.5" r="1" />\n            <circle cx="9.5" cy="14.5" r="1" />\n            <circle cx="4.5" cy="19.5" r="1" />\n            <circle cx="14.5" cy="9.5" r="1" />\n            <circle cx="19.5" cy="4.5" r="1" />\n            <circle cx="14.5" cy="19.5" r="1" />\n            <circle cx="19.5" cy="14.5" r="1" />\n        </svg>\n    ',r.VOXEL='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-3d-cube-sphere" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="voxel-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <path d="M6 17.6l-2 -1.1v-2.5" />\n            <path d="M4 10v-2.5l2 -1.1" />\n            <path d="M10 4.1l2 -1.1l2 1.1" />\n            <path d="M18 6.4l2 1.1v2.5" />\n            <path d="M20 14v2.5l-2 1.12" />\n            <path d="M14 19.9l-2 1.1l-2 -1.1" />\n            <line x1="12" y1="12" x2="14" y2="10.9" />\n            <line x1="18" y1="8.6" x2="20" y2="7.5" />\n            <line x1="12" y1="12" x2="12" y2="14.5" />\n            <line x1="12" y1="18.5" x2="12" y2="21" />\n            <path d="M12 12l-2 -1.12" />\n            <line x1="6" y1="8.6" x2="4" y2="7.5" />\n        </svg>\n    ',r.BLOCK='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-box" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="block-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <polyline points="12 3 20 7.5 20 16.5 12 21 4 16.5 4 7.5 12 3" />\n            <line x1="12" y1="12" x2="20" y2="7.5" />\n            <line x1="12" y1="12" x2="12" y2="21" />\n            <line x1="12" y1="12" x2="4" y2="7.5" />\n        </svg>\n    ',r.GRID='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-border-all" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="grid-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <rect x="4" y="4" width="16" height="16" rx="2" />\n            <line x1="4" y1="12" x2="20" y2="12" />\n            <line x1="12" y1="4" x2="12" y2="20" />\n        </svg>\n    ',r.AXES='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-axis-x" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="axes-svg">\n            <path d="M17 20l3 -3l-3 -3" />\n            <path d="M4 17h16" />\n            <path d="M4 7l3 -3l3 3" />\n            <path d="M7 20v-16" />\n        </svg>\n    ',r.BULB='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="bulb-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <circle cx="12" cy="12" r="4" />\n            <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" />\n        </svg>\n    ',r.MINUS='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-minus" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="minus-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <line x1="5" y1="12" x2="19" y2="12" />\n        </svg>\n    ',r.PLUS='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-plus" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="plus-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <line x1="12" y1="5" x2="12" y2="19" />\n            <line x1="5" y1="12" x2="19" y2="12" />\n        </svg>\n    ',r.CENTRE='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-focus-2" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="centre-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <circle cx="12" cy="12" r=".5" fill="currentColor" />\n            <circle cx="12" cy="12" r="7" />\n            <line x1="12" y1="3" x2="12" y2="5" />\n            <line x1="3" y1="12" x2="5" y2="12" />\n            <line x1="12" y1="19" x2="12" y2="21" />\n            <line x1="19" y1="12" x2="21" y2="12" />\n        </svg>\n    ',r.PERSPECTIVE='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-perspective" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="perspective-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <path d="M6.141 4.163l12 1.714a1 1 0 0 1 .859 .99v10.266a1 1 0 0 1 -.859 .99l-12 1.714a1 1 0 0 1 -1.141 -.99v-13.694a1 1 0 0 1 1.141 -.99z" />\n        </svg>\n    ',r.ORTHOGRAPHIC='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rectangle" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="orthographic-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <rect x="3" y="5" width="18" height="14" rx="2" />\n        </svg>\n    ',r.MAGNET='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-magnet" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round" id="magnet-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <path d="M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0" />\n            <line x1="4" y1="8" x2="9" y2="8" />\n            <line x1="15" y1="8" x2="19" y2="8" />\n        </svg>\n    ',r.UPLOAD='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-upload" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round" id="upload-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" />\n            <polyline points="7 9 12 4 17 9" />\n            <line x1="12" y1="4" x2="12" y2="16" />\n        </svg>\n    ',r.FOLDER='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-folder" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round" id="folder-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2" />\n        </svg>\n    ',r.SWITCH='\n        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-switch-3" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round" id="switch-svg">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n            <path d="M3 17h2.397a5 5 0 0 0 4.096 -2.133l.177 -.253m3.66 -5.227l.177 -.254a5 5 0 0 1 4.096 -2.133h3.397" />\n            path d="M18 4l3 3l-3 3" />\n            <path d="M3 7h2.397a5 5 0 0 1 4.096 2.133l4.014 5.734a5 5 0 0 0 4.096 2.133h3.397" />\n            <path d="M18 20l3 -3l-3 -3" />\n        </svg>\n    '},5429:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UI=void 0;var n=r(2830),i=r(2126),o=r(3419),a=r(9882),s=r(2989),l=r(3243),u=r(9251),c=r(2960),f=r(3538),h=r(4208),d=r(2242),p=r(6199),g=r(5033),m=r(1375),y=r(3672),_=function(){function e(e){var t=this;this.uiOrder=["import","materials","voxelise","assign","export"],this._ui={import:{label:"Import",elements:{input:(new h.FileInputElement).setFileExtensions(["obj"]).setLabel("Wavefront .obj file"),rotation:(new m.VectorSpinboxElement).setLabel("Rotation").setWrap(360).setUnits("°")},elementsOrder:["input","rotation"],submitButton:(new u.ButtonElement).setOnClick((function(){t._appContext.do(a.EAction.Import)})).setLabel("Load mesh"),output:new d.OutputElement},materials:{label:"Materials",elements:{},elementsOrder:[],submitButton:(new u.ButtonElement).setOnClick((function(){t._appContext.do(a.EAction.Materials)})).setLabel("Update materials"),output:new d.OutputElement},voxelise:{label:"Voxelise",elements:{constraintAxis:(new f.ComboBoxElement).addItem({payload:"y",displayText:"Y (height) (green)"}).addItem({payload:"x",displayText:"X (width) (red)"}).addItem({payload:"z",displayText:"Z (depth) (blue)"}).setLabel("Constraint axis").addValueChangedListener((function(e){})),size:(new p.SliderElement).setMin(3).setMax(380).setDefaultValue(80).setDecimals(0).setStep(1).setLabel("Size"),voxeliser:(new f.ComboBoxElement).addItem({payload:"bvh-ray",displayText:"BVH Ray-based"}).addItem({payload:"ncrb",displayText:"NCRB"}).addItem({payload:"ray-based",displayText:"Ray-based (legacy)"}).setLabel("Algorithm"),ambientOcclusion:(new c.CheckboxElement).setCheckedText("On (recommended)").setUncheckedText("Off (faster)").setDefaultValue(!0).setLabel("Ambient occlusion"),multisampleColouring:(new c.CheckboxElement).setCheckedText("On (recommended)").setUncheckedText("Off (faster)").setDefaultValue(!0).setLabel("Multisampling"),voxelOverlapRule:(new f.ComboBoxElement).addItem({displayText:"Average (recommended)",payload:"average",tooltip:"If multiple voxels are placed in the same location, take the average of their colours"}).addItem({displayText:"First",payload:"first",tooltip:"If multiple voxels are placed in the same location, use the first voxel's colour"}).setLabel("Voxel overlap")},elementsOrder:["constraintAxis","size","voxeliser","ambientOcclusion","multisampleColouring","voxelOverlapRule"],submitButton:(new u.ButtonElement).setOnClick((function(){t._appContext.do(a.EAction.Voxelise)})).setLabel("Voxelise mesh"),output:new d.OutputElement},assign:{label:"Assign",elements:{textureAtlas:(new f.ComboBoxElement).addItems(this._getTextureAtlases()).setLabel("Texture atlas"),blockPalette:(new f.ComboBoxElement).addItems(this._getBlockPalettes()).setLabel("Block palette"),dithering:(new f.ComboBoxElement).addItems([{displayText:"Ordered",payload:"ordered"},{displayText:"Random",payload:"random"},{displayText:"Off",payload:"off"}]).setLabel("Dithering"),fallable:(new f.ComboBoxElement).addItems([{displayText:"Replace falling with solid",payload:"replace-falling",tooltip:"Replace all blocks that will fall with solid blocks"},{displayText:"Replace fallable with solid",payload:"replace-fallable",tooltip:"Replace all blocks that can fall with solid blocks"},{displayText:"Do nothing",payload:"do-nothing",tooltip:"Let the block fall"}]).setLabel("Fallable blocks"),colourAccuracy:(new p.SliderElement).setMin(1).setMax(8).setDefaultValue(5).setDecimals(1).setStep(.1).setLabel("Colour accuracy"),contextualAveraging:(new c.CheckboxElement).setCheckedText("On (recommended)").setUncheckedText("Off (faster)").setDefaultValue(!0).setLabel("Smart averaging"),errorWeight:(new p.SliderElement).setMin(0).setMax(2).setDefaultValue(.2).setDecimals(2).setStep(.01).setLabel("Smoothness"),calculateLighting:(new c.CheckboxElement).setCheckedText("On").setUncheckedText("Off").setDefaultValue(!1).setLabel("Calculate lighting").addValueChangedListener((function(e){var r=t._ui.assign.elements.calculateLighting.getEnabled();t._ui.assign.elements.lightThreshold.setEnabled(e&&r,!1)})).addEnabledChangedListener((function(e){var r=t._ui.assign.elements.calculateLighting.getValue();t._ui.assign.elements.lightThreshold.setEnabled(r&&e,!1)})),lightThreshold:(new p.SliderElement).setMin(0).setMax(14).setDefaultValue(1).setDecimals(0).setStep(1).setLabel("Light threshold").setShouldObeyGroupEnables(!1)},elementsOrder:["textureAtlas","blockPalette","dithering","fallable","colourAccuracy","contextualAveraging","errorWeight","calculateLighting","lightThreshold"],submitButton:(new u.ButtonElement).setOnClick((function(){t._appContext.do(a.EAction.Assign)})).setLabel("Assign blocks"),output:new d.OutputElement},export:{label:"Export",elements:{export:(new f.ComboBoxElement).addItems([{displayText:"Litematic (.litematic)",payload:"litematic"},{displayText:"Schematic (.schematic)",payload:"schematic"},{displayText:"Wavefront OBJ (.obj)",payload:"obj"},{displayText:"Sponge Schematic (.schem)",payload:"schem"},{displayText:"Structure blocks (.nbt)",payload:"nbt"}]).setLabel("Exporter")},elementsOrder:["export"],submitButton:(new u.ButtonElement).setLabel("Export structure").setOnClick((function(){t._appContext.do(a.EAction.Export)})),output:new d.OutputElement}},this._toolbarLeft={groups:{viewmode:{elements:{mesh:new g.ToolbarItemElement({iconSVG:y.AppIcons.MESH}).onClick((function(){o.Renderer.Get.setModelToUse(o.MeshType.TriangleMesh)})).isActive((function(){return o.Renderer.Get.getActiveMeshType()===o.MeshType.TriangleMesh})).isEnabled((function(){return o.Renderer.Get.getModelsAvailable()>=o.MeshType.TriangleMesh})),voxelMesh:new g.ToolbarItemElement({iconSVG:y.AppIcons.VOXEL}).onClick((function(){o.Renderer.Get.setModelToUse(o.MeshType.VoxelMesh)})).isActive((function(){return o.Renderer.Get.getActiveMeshType()===o.MeshType.VoxelMesh})).isEnabled((function(){return o.Renderer.Get.getModelsAvailable()>=o.MeshType.VoxelMesh})),blockMesh:new g.ToolbarItemElement({iconSVG:y.AppIcons.BLOCK}).onClick((function(){o.Renderer.Get.setModelToUse(o.MeshType.BlockMesh)})).isActive((function(){return o.Renderer.Get.getActiveMeshType()===o.MeshType.BlockMesh})).isEnabled((function(){return o.Renderer.Get.getModelsAvailable()>=o.MeshType.BlockMesh}))},elementsOrder:["mesh","voxelMesh","blockMesh"]},debug:{elements:{grid:new g.ToolbarItemElement({iconSVG:y.AppIcons.GRID}).onClick((function(){o.Renderer.Get.toggleIsGridEnabled()})).isActive((function(){return o.Renderer.Get.isGridEnabled()})).isEnabled((function(){return o.Renderer.Get.getActiveMeshType()!==o.MeshType.None})),axes:new g.ToolbarItemElement({iconSVG:y.AppIcons.AXES}).onClick((function(){o.Renderer.Get.toggleIsAxesEnabled()})).isActive((function(){return o.Renderer.Get.isAxesEnabled()})),"night-vision":new g.ToolbarItemElement({iconSVG:y.AppIcons.BULB}).onClick((function(){o.Renderer.Get.toggleIsNightVisionEnabled()})).isActive((function(){return o.Renderer.Get.isNightVisionEnabled()})).isEnabled((function(){return o.Renderer.Get.canToggleNightVision()}))},elementsOrder:["grid","axes","night-vision"]}},groupsOrder:["viewmode","debug"]},this._toolbarRight={groups:{zoom:{elements:{zoomOut:new g.ToolbarItemElement({iconSVG:y.AppIcons.MINUS}).onClick((function(){n.ArcballCamera.Get.onZoomOut()})),zoomIn:new g.ToolbarItemElement({iconSVG:y.AppIcons.PLUS}).onClick((function(){n.ArcballCamera.Get.onZoomIn()})),reset:new g.ToolbarItemElement({iconSVG:y.AppIcons.CENTRE}).onClick((function(){n.ArcballCamera.Get.reset()}))},elementsOrder:["zoomOut","zoomIn","reset"]},camera:{elements:{perspective:new g.ToolbarItemElement({iconSVG:y.AppIcons.PERSPECTIVE}).onClick((function(){n.ArcballCamera.Get.setCameraMode("perspective")})).isActive((function(){return n.ArcballCamera.Get.isPerspective()})),orthographic:new g.ToolbarItemElement({iconSVG:y.AppIcons.ORTHOGRAPHIC}).onClick((function(){n.ArcballCamera.Get.setCameraMode("orthographic")})).isActive((function(){return n.ArcballCamera.Get.isOrthographic()})),angleSnap:new g.ToolbarItemElement({iconSVG:y.AppIcons.MAGNET}).onClick((function(){n.ArcballCamera.Get.toggleAngleSnap()})).isActive((function(){return n.ArcballCamera.Get.isAngleSnapEnabled()})).isEnabled((function(){return n.ArcballCamera.Get.isOrthographic()}))},elementsOrder:["perspective","orthographic","angleSnap"]}},groupsOrder:["camera","zoom"]},this._uiDull=this._ui,this._toolbarLeftDull=this._toolbarLeft.groups,this._toolbarRightDull=this._toolbarRight.groups,this._appContext=e}return e.prototype.tick=function(e){for(var t in document.body.style.cursor=e?"progress":"default",this._toolbarLeftDull)for(var r=0,n=(o=this._toolbarLeftDull[t]).elementsOrder;r<n.length;r++){var i=n[r];o.elements[i].tick()}for(var t in this._toolbarRightDull)for(var o,a=0,s=(o=this._toolbarRightDull[t]).elementsOrder;a<s.length;a++)i=s[a],o.elements[i].tick()},e.prototype.build=function(){var e={};for(var t in this._ui){var r=this._uiDull[t];e[t]='\n            <div class="property">\n                <div style="flex-grow: 1">\n                    <div class="h-div">\n                    </div>\n                </div>\n                <div class="group-heading">\n                    '.concat(r.label.toUpperCase(),'\n                </div>\n                <div style="flex-grow: 1">\n                    <div class="h-div">\n                    </div>\n                </div>\n            </div>\n            '),e[t]+=this._getGroupHTML(r)}for(var n="",i=0,o=this.uiOrder;i<o.length;i++)n+=e[t=o[i]];document.getElementById("properties").innerHTML='<div class="container">\n        '+n+"</div>";var a="";a+='<div class="toolbar-column">';for(var s=0,l=this._toolbarLeft.groupsOrder;s<l.length;s++){var u=l[s];a+='<div class="toolbar-group">';for(var c=0,f=(g=this._toolbarLeftDull[u]).elementsOrder;c<f.length;c++){var h=f[c];a+=g.elements[h].generateHTML()}a+="</div>"}a+="</div>",a+='<div class="toolbar-column">';for(var d=0,p=this._toolbarRight.groupsOrder;d<p.length;d++){u=p[d],a+='<div class="toolbar-group">';for(var g,m=0,y=(g=this._toolbarRightDull[u]).elementsOrder;m<y.length;m++)h=y[m],a+=g.elements[h].generateHTML();a+="</div>"}a+="</div>",document.getElementById("toolbar").innerHTML=a},e.prototype.cacheValues=function(e){for(var t=this._getEActionGroup(e),r=0,n=t.elementsOrder;r<n.length;r++){var i=n[r];(0,l.LOG)("[UI]: Caching ".concat(i)),t.elements[i].cacheValue()}},e.prototype.refreshSubcomponents=function(e){var t=document.getElementById("subcomponents_".concat(e.label));for(var r in(0,s.ASSERT)(null!==t),t.innerHTML=this._getGroupSubcomponentsHTML(e),e.elements){var n=e.elements[r];n.registerEvents(),n.finalise()}},e.prototype._getGroupSubcomponentsHTML=function(e){for(var t="",r=0,n=e.elementsOrder;r<n.length;r++){var i=n[r],o=e.elements[i];(0,s.ASSERT)(void 0!==o,"No element for: ".concat(i)),t+=this._buildSubcomponent(o,"Materials"===e.label)}return t},e.prototype._getGroupHTML=function(e){return'\n            <div id="subcomponents_'.concat(e.label,'">\n                ').concat(this._getGroupSubcomponentsHTML(e),'\n            </div>\n            <div class="property">\n                <div class="prop-value-container">\n                    ').concat(e.submitButton.generateHTML(),'\n                </div>\n            </div>\n            <div class="property">\n                ').concat(e.output.generateHTML(),"\n            </div>\n        ")},e.prototype._buildSubcomponent=function(e,t){return'\n            <div class="property '.concat(t?"big-padding":"",'">\n                ').concat(e.generateHTML(),"\n            </div>\n        ")},e.prototype.getActionOutput=function(e){return this._getEActionGroup(e).output},e.prototype.getActionButton=function(e){return this._getEActionGroup(e).submitButton},e.prototype.registerEvents=function(){for(var e in this._ui){var t=this._uiDull[e];for(var r in t.elements){var n=t.elements[r];n.registerEvents(),n.finalise()}t.submitButton.registerEvents()}for(var i=0,o=this._toolbarLeft.groupsOrder;i<o.length;i++)for(var a=o[i],s=0,l=(h=this._toolbarLeftDull[a]).elementsOrder;s<l.length;s++){var u=l[s];h.elements[u].registerEvents()}for(var c=0,f=this._toolbarRight.groupsOrder;c<f.length;c++){a=f[c];for(var h,d=0,p=(h=this._toolbarRightDull[a]).elementsOrder;d<p.length;d++)u=p[d],h.elements[u].registerEvents()}},Object.defineProperty(e.prototype,"layout",{get:function(){return this._ui},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layoutDull",{get:function(){return this._uiDull},enumerable:!1,configurable:!0}),e.prototype.enableTo=function(e){for(var t=0;t<=e;++t)this.enable(t)},e.prototype.enable=function(e){if(!(e>=a.EAction.MAX)){(0,l.LOG)("[UI]: Enabling",e);var t=this._getEActionGroup(e);for(var r in t.elements)t.elements[r].setEnabled(!0);t.submitButton.setEnabled(!0)}},e.prototype.disableAll=function(){this.disable(a.EAction.Import,!1)},e.prototype.disable=function(e,t){if(void 0===t&&(t=!0),!(e<0))for(var r=e;r<a.EAction.MAX;++r){var n=this._getEActionGroup(r);for(var i in n.elements)n.elements[i].setEnabled(!1);n.submitButton.setEnabled(!1),t&&(n.output.getMessage().clearAll(),n.output.updateMessage())}},e.prototype._getEActionGroup=function(e){var t=this.uiOrder[e];return this._uiDull[t]},e.prototype._getTextureAtlases=function(){return[]},e.prototype._getBlockPalettes=function(){for(var e=[],t=0,r=i.PaletteManager.getPalettesInfo();t<r.length;t++){var n=r[t];e.push({payload:n.id,displayText:n.name})}return e},e}();t.UI=_},3769:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIMessageBuilder=t.UITreeBuilder=void 0;var r=function(){function e(e){this._rootLabel=e,this._children=[],this._postBuildDelegates=[],this._warning=!1,this._open=!1}return e.create=function(t){return new e(t)},e.prototype.isOpen=function(){return this._open},e.prototype.toggleIsOpen=function(){this._open=!this._open},e.prototype.setWarning=function(){this._warning=!0},e.prototype.getWarning=function(){if(this._warning)return!0;for(var t=0,r=this._children;t<r.length;t++){var n=r[t];if(n instanceof e){if(n.getWarning())return!0}else if(n.warning)return!0}return!1},e.prototype.addChild=function(t,r){this._children.push(t),void 0!==r&&this._postBuildDelegates.push(r),t instanceof e&&this._postBuildDelegates.push((function(){t.postBuild()}))},e.prototype.postBuild=function(){this._postBuildDelegates.forEach((function(e){e()}));for(var e=document.getElementsByClassName("caret"),t=function(t){var r=e[t];r.onclick=function(){var e,t;null===(t=null===(e=r.parentElement)||void 0===e?void 0:e.querySelector(".nested"))||void 0===t||t.classList.toggle("active"),r.classList.toggle("caret-down")}},r=0;r<e.length;r++)t(r)},e.prototype.buildHTML=function(){var t="";return this._children.forEach((function(r){t+="<li>",t+=r instanceof e?r.buildHTML():r.warning?'<p style="margin:0px; color:orange;">'.concat(r.html,"</p>"):r.html,t+="</li>"})),this.getWarning()?'\n                <span class="caret caret-down" style="color:orange;" >'.concat(this._rootLabel,'</span>\n                <ul class="nested active">').concat(t,"</ul>\n            "):this.isOpen()?'\n                <span class="caret caret-down">'.concat(this._rootLabel,'</span>\n                <ul class="nested active">').concat(t,"</ul>\n            "):'\n                <span class="caret">'.concat(this._rootLabel,'</span>\n                <ul class="nested">').concat(t,"</ul>\n            ")},e}();t.UITreeBuilder=r;var n=function(){function e(){this._messages=[],this._postBuildDelegates=[]}return e.create=function(){return new e},e.prototype.addHeading=function(e,t,r){return this.addBold(e,[t+":"],r),this},e.prototype.addBold=function(e,t,r){for(var n=0,i=t;n<i.length;n++){var o=i[n],a=this._getStatusCSSClass(r);this._messages.push({groupId:e,body:'\n                <div style="display: flex; align-items: center;" '.concat(a?'class="'.concat(a,'"'):"",'>\n                    <div style="margin-right: 8px;" class="loader-circle"></div>\n                    <b>').concat(o,"</b>\n                </div>\n            ")})}return this},e.prototype.addTree=function(e,t){this._messages.push({groupId:e,body:'<div style="padding-left: 16px;">'.concat(t.buildHTML(),"</div>")}),this._postBuildDelegates.push((function(){t.postBuild()}))},e.prototype.setTree=function(e,t){var r=this,n=!1;this._messages.forEach((function(i){i.groupId===e&&(r._postBuildDelegates=[],i.body='<div style="padding-left: 16px;">'.concat(t.buildHTML(),"</div>"),r._postBuildDelegates.push((function(){t.postBuild()})),n=!0)})),n||this.addTree(e,t)},e.prototype.postBuild=function(){this._postBuildDelegates.forEach((function(e){e()}))},e.prototype.addItem=function(e,t,r,n){void 0===n&&(n=1);for(var i=0,o=t;i<o.length;i++){var a=o[i],s=this._getStatusCSSClass(r);this._messages.push({groupId:e,body:'\n                <div style="margin-left: 16px;" '.concat(s?'class="message-builder-item '.concat(s,'"'):"","> - ").concat(a,"</div>\n            ")})}return this},e.prototype.addTask=function(e,t){return this._messages.push({groupId:e,body:'\n            <div style="display: flex; align-items: center; color: var(--text-standard)">\n                <div style="margin-right: 8px;" class="loader-circle spin"></div>\n                <b class="spin">'.concat(t,"</b>\n            </div>\n        ")}),this},e.prototype.clear=function(e){return this._messages=this._messages.filter((function(t){return t.groupId!==e})),this},e.prototype.clearAll=function(){this._messages=[]},e.prototype.toString=function(){var e=this._messages.map((function(e){return e.body})).join("");return'\n            <div style="display: flex; flex-direction: column">\n                '.concat(e,"\n            </div>\n        ")},e.fromString=function(t,r,n){var i=new e;return i.addItem(t,[r],n),i},e.prototype.join=function(e){var t;(t=this._messages).push.apply(t,e._messages)},e.prototype._getStatusCSSClass=function(e){switch(e){case"success":return"status-success";case"warning":return"status-warning";case"error":return"status-error"}},e}();t.UIMessageBuilder=n},9882:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomID=t.ColourSpace=t.UV=t.EAction=t.AppUtil=void 0,function(e){function t(e){return e.includes(":")}e.capitaliseFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.namespaceBlock=function(e){return t(e)?e:"minecraft:"+e},e.isNamespacedBlock=t}((n=t.AppUtil||(t.AppUtil={})).Text||(n.Text={})),(r=t.EAction||(t.EAction={}))[r.Import=0]="Import",r[r.Materials=1]="Materials",r[r.Voxelise=2]="Voxelise",r[r.Assign=3]="Assign",r[r.Export=4]="Export",r[r.MAX=5]="MAX";var i,o=function(){function e(e,t){this.u=e,this.v=t}return e.prototype.copy=function(){return new e(this.u,this.v)},e}();t.UV=o,(i=t.ColourSpace||(t.ColourSpace={}))[i.RGB=0]="RGB",i[i.LAB=1]="LAB",t.getRandomID=function(){return(Math.random()+1).toString(36).substring(7)}},2989:function(e,t){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ASSERT=t.AppError=void 0;var i=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(Error);t.AppError=i,t.ASSERT=function(e,t){if(void 0===t&&(t="Assertion Failed"),!e)throw Error(t),Error(t)}},3243:(e,t,r)=>{"use strict";var n=r(5108);Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LOG_ERROR=t.TIME_END=t.TIME_START=t.LOG_WARN=t.LOG_MAJOR=t.LOGF=t.LOG=void 0,t.LOG=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.Get.isLOGEnabled()&&n.log.apply(n,e)},t.LOGF=t.LOG,t.LOG_MAJOR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.Get.isLOGMAJOREnabled()&&n.log.apply(n,e)},t.LOG_WARN=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.Get.isLOGWARNEnabled()&&n.warn.apply(n,e)},t.TIME_START=function(e){i.Get.isLOGTIMEEnabled()&&n.time(e)},t.TIME_END=function(e){i.Get.isLOGTIMEEnabled()&&n.timeEnd(e)},t.LOG_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.error.apply(n,e)};var i=function(){function e(){this._enabledLOG=!1,this._enabledLOGMAJOR=!1,this._enabledLOGWARN=!1,this._enabledLOGTIME=!1}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.enableLOG=function(){this._enabledLOG=!0},e.prototype.disableLOG=function(){this._enabledLOG=!1},e.prototype.enableLOGMAJOR=function(){this._enabledLOGMAJOR=!0},e.prototype.disableLOGMAJOR=function(){this._enabledLOGMAJOR=!1},e.prototype.enableLOGWARN=function(){this._enabledLOGWARN=!0},e.prototype.disableLOGWARN=function(){this._enabledLOGWARN=!1},e.prototype.enableLOGTIME=function(){this._enabledLOGTIME=!0},e.prototype.disableLOGTIME=function(){this._enabledLOGTIME=!1},e.prototype.disableLogToFile=function(){this._enabledLogToFile=!1},e.prototype.isLOGEnabled=function(){return this._enabledLOG},e.prototype.isLOGMAJOREnabled=function(){return this._enabledLOGMAJOR},e.prototype.isLOGWARNEnabled=function(){return this._enabledLOGWARN},e.prototype.isLOGTIMEEnabled=function(){return this._enabledLOGTIME},e}();t.Logger=i},6841:function(e,t,r){"use strict";var n="/",i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AppPaths=t.PathUtil=void 0;var o,a=i(r(6470));!function(e){e.join=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.default.join.apply(a.default,e)}}(o=t.PathUtil||(t.PathUtil={}));var s=function(){function e(){this._base=o.join(n,"../../..")}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.setBaseDir=function(e){this._base=e},Object.defineProperty(e.prototype,"base",{get:function(){return this._base},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resources",{get:function(){return o.join(this._base,"./res/")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tools",{get:function(){return o.join(this._base,"./tools/")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tests",{get:function(){return o.join(this._base,"./tests/")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"testData",{get:function(){return o.join(this._base,"./tests/data/")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"atlases",{get:function(){return o.join(this.resources,"./atlases/")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"palettes",{get:function(){return o.join(this.resources,"./palettes/")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"static",{get:function(){return o.join(this.resources,"./static/")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shaders",{get:function(){return o.join(this.resources,"./shaders/")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logs",{get:function(){return o.join(this._base,"./logs/")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gen",{get:function(){return o.join(this._base,"./gen/")},enumerable:!1,configurable:!0}),e}();t.AppPaths=s},4507:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegExpBuilder=t.buildRegex=t.regexOptional=t.regexCapture=t.REGEX_NZ_ANY=t.REGEX_NUMBER=t.REGEX_NZ_WS=void 0,t.REGEX_NZ_WS=/[ \t]+/,t.REGEX_NUMBER=/[0-9eE+\.\-]+/,t.REGEX_NZ_ANY=/.+/,t.regexCapture=function(e,t){return new RegExp("(?<".concat(e,">").concat(t.source))},t.regexOptional=function(e){return new RegExp("(".concat(e,")?"))},t.buildRegex=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new RegExp(e.map((function(e){return e instanceof RegExp?e.source:e})).join(""))};var r=function(){function e(){this._components=[]}return e.prototype.add=function(e,t,r){var n;return void 0===r&&(r=!1),n=e instanceof RegExp?e.source:e,t&&(n="(?<".concat(t,">").concat(n,")")),r&&(n="(".concat(n,")?")),this._components.push(n),this},e.prototype.addMany=function(e,t){void 0===t&&(t=!1);for(var r="",n=0,i=e;n<i.length;n++){var o=i[n];o instanceof RegExp?r+=o.source:r+=o}return this._components.push(t?"(".concat(r,")?"):r),this},e.prototype.addNonzeroWhitespace=function(){return this.add(t.REGEX_NZ_WS),this},e.prototype.toRegExp=function(){return new RegExp(this._components.join(""))},e}();t.RegExpBuilder=r},219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIUtil=void 0;var n=r(2989);(t.UIUtil||(t.UIUtil={})).getElementById=function(e){var t=document.getElementById(e);return(0,n.ASSERT)(null!==t,"Attempting to getElement of nonexistent element: ".concat(e)),t}},7464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fastCrossZAxis=t.fastCrossYAxis=t.fastCrossXAxis=t.Vector3=void 0;var n=r(2989),i=function(){function e(e,t,r){this.x=e,this.y=t,this.z=r}return e.prototype.set=function(e,t,r){this.x=e,this.y=t,this.z=r},e.prototype.setFrom=function(e){this.x=e.x,this.y=e.y,this.z=e.z},e.fromArray=function(t){return(0,n.ASSERT)(3===t.length),new e(t[0],t[1],t[2])},e.prototype.toArray=function(){return[this.x,this.y,this.z]},e.random=function(){return new e(Math.random(),Math.random(),Math.random())},e.parse=function(t){var r=t.match(/[+-]?\d+(\.\d+)?/g).map((function(e){return parseFloat(e)}));return new e(r[0],r[1],r[2])},e.copy=function(t){return new e(t.x,t.y,t.z)},e.add=function(t,r){return e.copy(t).add(r)},e.sub=function(t,r){return e.copy(t).sub(r)},e.prototype.add=function(t){return t instanceof e?(this.x+=t.x,this.y+=t.y,this.z+=t.z,this):(this.x+=t,this.y+=t,this.z+=t,this)},e.prototype.sub=function(t){return t instanceof e?(this.x-=t.x,this.y-=t.y,this.z-=t.z,this):(this.x-=t,this.y-=t,this.z-=t,this)},e.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},e.prototype.copy=function(){return e.copy(this)},e.mulScalar=function(t,r){return new e(r*t.x,r*t.y,r*t.z)},e.prototype.mulScalar=function(e){return this.x*=e,this.y*=e,this.z*=e,this},e.divScalar=function(t,r){return new e(t.x/r,t.y/r,t.z/r)},e.prototype.divScalar=function(e){return this.x/=e,this.y/=e,this.z/=e,this},e.lessThanEqualTo=function(e,t){return e.x<=t.x&&e.y<=t.y&&e.z<=t.z},e.round=function(t){return new e(Math.round(t.x),Math.round(t.y),Math.round(t.z))},e.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},e.abs=function(t){return new e(Math.abs(t.x),Math.abs(t.y),Math.abs(t.z))},e.cross=function(t,r){return new e(t.y*r.z-t.z*r.y,t.z*r.x-t.x*r.z,t.x*r.y-t.y*r.x)},e.min=function(t,r){return new e(Math.min(t.x,r.x),Math.min(t.y,r.y),Math.min(t.z,r.z))},e.max=function(t,r){return new e(Math.max(t.x,r.x),Math.max(t.y,r.y),Math.max(t.z,r.z))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))},e.prototype.normalise=function(){var e=this.magnitude();return this.x/=e,this.y/=e,this.z/=e,this},Object.defineProperty(e,"xAxis",{get:function(){return new e(1,0,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"yAxis",{get:function(){return new e(0,1,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"zAxis",{get:function(){return new e(0,0,1)},enumerable:!1,configurable:!0}),e.prototype.isNumber=function(){return!isNaN(this.x)&&!isNaN(this.y)&&!isNaN(this.z)},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},e.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},e.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},e.prototype.hash=function(){return(this.x+1e7<<42)+(this.y+1e7<<21)+(this.z+1e7)},e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z},e.prototype.stringify=function(){return"".concat(this.x,"_").concat(this.y,"_").concat(this.z)},e}();t.Vector3=i,t.fastCrossXAxis=function(e){return new i(0,-e.z,e.y)},t.fastCrossYAxis=function(e){return new i(e.z,0,-e.x)},t.fastCrossZAxis=function(e){return new i(-e.y,e.x,0)}},8493:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoxelMesh=void 0;var n=r(2509),i=r(7168),o=r(4917),a=r(6631),s=r(2989),l=r(3243),u=r(7464),c=function(){function e(e){this._neighbours=[new u.Vector3(1,1,-1),new u.Vector3(0,1,-1),new u.Vector3(-1,1,-1),new u.Vector3(1,0,-1),new u.Vector3(-1,0,-1),new u.Vector3(1,-1,-1),new u.Vector3(0,-1,-1),new u.Vector3(-1,-1,-1),new u.Vector3(1,1,0),new u.Vector3(-1,1,0),new u.Vector3(1,-1,0),new u.Vector3(-1,-1,0),new u.Vector3(1,1,1),new u.Vector3(0,1,1),new u.Vector3(-1,1,1),new u.Vector3(1,0,1),new u.Vector3(-1,0,1),new u.Vector3(1,-1,1),new u.Vector3(0,-1,1),new u.Vector3(-1,-1,1)],this._bufferChunks=[],this._voxels=[],this._voxelsHash=new Map,this._neighbourMap=new Map,this._bounds=i.Bounds.getInfiniteBounds(),this._voxelMeshParams=e,this._recreateBuffer=!0}return e.prototype.getVoxels=function(){return this._voxels},e.prototype.isVoxelAt=function(e){return this._voxelsHash.has(e.hash())},e.prototype.isOpaqueVoxelAt=function(e){var t=this.getVoxelAt(e);return!!t&&1==t.colour.a},e.prototype.getVoxelAt=function(e){var t=this._voxelsHash.get(e.hash());if(void 0!==t){var r=this._voxels[t];return(0,s.ASSERT)(void 0!==r),r}},e.getFullFaceVisibility=function(){return n.EFaceVisibility.Up|n.EFaceVisibility.Down|n.EFaceVisibility.North|n.EFaceVisibility.West|n.EFaceVisibility.East|n.EFaceVisibility.South},e.prototype.getFaceVisibility=function(e){var t=0;return this.isOpaqueVoxelAt(u.Vector3.add(e,new u.Vector3(0,1,0)))||(t+=n.EFaceVisibility.Up),this.isOpaqueVoxelAt(u.Vector3.add(e,new u.Vector3(0,-1,0)))||(t+=n.EFaceVisibility.Down),this.isOpaqueVoxelAt(u.Vector3.add(e,new u.Vector3(1,0,0)))||(t+=n.EFaceVisibility.North),this.isOpaqueVoxelAt(u.Vector3.add(e,new u.Vector3(-1,0,0)))||(t+=n.EFaceVisibility.South),this.isOpaqueVoxelAt(u.Vector3.add(e,new u.Vector3(0,0,1)))||(t+=n.EFaceVisibility.East),this.isOpaqueVoxelAt(u.Vector3.add(e,new u.Vector3(0,0,-1)))||(t+=n.EFaceVisibility.West),t},e.prototype.addVoxel=function(e,t){if(0!==t.a){var r=e.copy().round(),n=r.hash(),i=this._voxelsHash.get(n);if(void 0!==i){var o=this._voxels[i];o.colour.r=(o.colour.r*o.collisions+t.r)/(o.collisions+1),o.colour.g=(o.colour.g*o.collisions+t.g)/(o.collisions+1),o.colour.b=(o.colour.b*o.collisions+t.b)/(o.collisions+1),o.colour.a=(o.colour.a*o.collisions+t.a)/(o.collisions+1),++o.collisions}else this._voxels.push({position:r,colour:t,collisions:1}),this._voxelsHash.set(n,this._voxels.length-1),this._bounds.extendByPoint(r),this._updateNeighbours(r)}},e.prototype.getBounds=function(){return this._bounds},e.prototype.getVoxelIndex=function(e){return this._voxelsHash.get(e.hash())},e.prototype.getVoxelCount=function(){return this._voxels.length},e.prototype._updateNeighbours=function(e){if(this._voxelMeshParams.enableAmbientOcclusion)for(var t=0,r=this._neighbours;t<r.length;t++){var n=r[t],i=u.Vector3.add(e,n),o=n.copy().negate(),s=a.OcclusionManager.getNeighbourIndex(o);this.getNeighbours(i).value|=1<<s}},e.prototype.getNeighbours=function(e){(0,s.ASSERT)(this._voxelMeshParams.enableAmbientOcclusion,"Ambient occlusion is disabled");var t=e.hash(),r=this._neighbourMap.get(t);return void 0===r?(this._neighbourMap.set(t,{value:0}),this._neighbourMap.get(t)):r},e.prototype.getNeighbourhoodMap=function(){return this._neighbourMap},e.prototype.hasNeighbour=function(e,t){return(this.getNeighbours(e).value&1<<a.OcclusionManager.getNeighbourIndex(t))>0},e.prototype.setRenderParams=function(e){this._renderParams=e,this._recreateBuffer=!0,this._bufferChunks=[]},e.prototype.getChunkedBuffer=function(e){return(0,s.ASSERT)(this._renderParams,"Called VoxelMesh.getChunkedBuffer() without setting render params"),void 0===this._bufferChunks[e]?((0,l.LOGF)("[VoxelMesh]: getChunkedBuffer: ci: ".concat(e," not cached")),this._bufferChunks[e]=o.ChunkedBufferGenerator.fromVoxelMesh(this,this._renderParams,e)):(0,l.LOGF)("[VoxelMesh]: getChunkedBuffer: ci: ".concat(e," cached")),this._bufferChunks[e]},e}();t.VoxelMesh=c},6065:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IVoxeliser=void 0;var n=r(4405),i=r(8913),o=r(4790),a=r(1535),s=r(8218),l=r(9882),u=r(2989),c=r(7464),f=function(){function e(){}return e.prototype.voxelise=function(e,t){var r=this._voxelise(e,t);a.StatusHandler.Get.add("info","Voxel mesh has ".concat(r.getVoxelCount().toLocaleString()," voxels"));var n=r.getBounds().getDimensions().add(1);return a.StatusHandler.Get.add("info","Dimensions are ".concat(n.x.toLocaleString(),"x").concat(n.y.toLocaleString(),"x").concat(n.z.toLocaleString()," voxels")),r},e.prototype._getVoxelColour=function(e,t,r,a,s){var l=e.getMaterialByName(r);if((0,u.ASSERT)(void 0!==l),l.type===o.MaterialType.solid)return n.RGBAUtil.copy(l.colour);for(var f=[],h=0;h<(s?i.AppConfig.Get.MULTISAMPLE_COUNT:1);++h){var d=c.Vector3.random().sub(.5);f.push(this._internalGetVoxelColour(e,t,r,d.add(a)))}return n.RGBAUtil.average.apply(n.RGBAUtil,f)},e.prototype._internalGetVoxelColour=function(e,t,r,i){var a=e.getMaterialByName(r);(0,u.ASSERT)(void 0!==a&&a.type===o.MaterialType.textured);var c=new s.Triangle(t.v0,t.v1,i).getArea(),f=new s.Triangle(t.v1,t.v2,i).getArea(),h=new s.Triangle(t.v2,t.v0,i).getArea(),d=c+f+h,p=f/d,g=h/d,m=c/d,y=new l.UV(t.uv0.u*p+t.uv1.u*g+t.uv2.u*m,t.uv0.v*p+t.uv1.v*g+t.uv2.v*m);return(isNaN(y.u)||isNaN(y.v))&&n.RGBAUtil.copy(n.RGBAColours.MAGENTA),e.sampleTextureMaterial(r,y)},e}();t.IVoxeliser=f},1493:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BVHRayVoxeliserPlusThickness=void 0;var o=r(4374),a=r(9347),s=r(2989),l=r(3243),u=r(7464),c=r(8493),f=r(6065),h=r(157),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._voxelise=function(e,t){var r,n=new c.VoxelMesh(t),i=e.getBounds().getDimensions(),f=new u.Vector3(0,0,0);switch(t.constraintAxis){case"x":r=(t.size-1)/i.x,f=t.size%2==0?new u.Vector3(.5,0,0):new u.Vector3(0,0,0);break;case"y":r=(t.size-1)/i.y,f=t.size%2==0?new u.Vector3(0,.5,0):new u.Vector3(0,0,0);break;case"z":r=(t.size-1)/i.z,f=t.size%2==0?new u.Vector3(0,0,.5):new u.Vector3(0,0,0)}e.setTransform((function(e){return e.copy().mulScalar(r).add(f)}));for(var d=Array(e._tris.length),p=0;p<e.getTriangleCount();++p){var g=e.getVertices(p);d[p]=[g.v0,g.v1,g.v2]}(0,l.LOG)("Creating BVH...");var m=new h.BVH(d,8);(0,l.LOG)("BVH created...");var y=e.getBounds();y.min.floor(),y.max.ceil();for(var _=u.Vector3.sub(y.max,y.min).add(1),b=_.x*_.y+_.x*_.z+_.y*_.z,v=new Array(b),x=0,w=y.min.y;w<=y.max.y;++w)for(var E=y.min.z;E<=y.max.z;++E)v[x++]={origin:new u.Vector3(y.min.x-1,w,E),axis:a.Axes.x};for(var A=y.min.x;A<=y.max.x;++A)for(E=y.min.z;E<=y.max.z;++E)v[x++]={origin:new u.Vector3(A,y.min.y-1,E),axis:a.Axes.y};for(A=y.min.x;A<=y.max.x;++A)for(w=y.min.y;w<=y.max.y;++w)v[x++]={origin:new u.Vector3(A,w,y.min.z-1),axis:a.Axes.z};(0,s.ASSERT)(v.length===x),(0,l.LOG)("Rays created...");var T=o.ProgressManager.Get.start("Voxelising");for(x=0;x<v.length;++x){o.ProgressManager.Get.progress(T,x/v.length);for(var S=v[x],M=0,k=m.intersectRay(S.origin,(0,a.axesToDirection)(S.axis),!1);M<k.length;M++){var O=k[M],I=O.intersectionPoint,R=new u.Vector3(I.x,I.y,I.z),C=e.getUVTriangle(O.triangleIndex),L=u.Vector3.sub(C.v1,C.v0),B=u.Vector3.sub(C.v2,C.v0),V=u.Vector3.cross(B,L),P=R.copy().add(V.normalise().mulScalar(.5)).round(),U=this._getVoxelColour(e,e.getUVTriangle(O.triangleIndex),e.getMaterialByTriangle(O.triangleIndex),R,t.useMultisampleColouring);n.addVoxel(R,U),P.equals(R)||n.addVoxel(P,U)}}return o.ProgressManager.Get.end(T),e.clearTransform(),n},t}(f.IVoxeliser);t.BVHRayVoxeliserPlusThickness=d},1890:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BVHRayVoxeliser=void 0;var o=r(4374),a=r(9347),s=r(2989),l=r(3243),u=r(7464),c=r(8493),f=r(6065),h=r(157),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._voxelise=function(e,t){var r,n=new c.VoxelMesh(t),i=e.getBounds().getDimensions(),f=new u.Vector3(0,0,0);switch(t.constraintAxis){case"x":r=(t.size-1)/i.x,f=t.size%2==0?new u.Vector3(.5,0,0):new u.Vector3(0,0,0);break;case"y":r=(t.size-1)/i.y,f=t.size%2==0?new u.Vector3(0,.5,0):new u.Vector3(0,0,0);break;case"z":r=(t.size-1)/i.z,f=t.size%2==0?new u.Vector3(0,0,.5):new u.Vector3(0,0,0)}e.setTransform((function(e){return e.copy().mulScalar(r).add(f)}));for(var d=Array(e._tris.length),p=0;p<e.getTriangleCount();++p){var g=e.getVertices(p);d[p]=[g.v0,g.v1,g.v2]}(0,l.LOG)("Creating BVH...");var m=new h.BVH(d,8);(0,l.LOG)("BVH created...");var y=e.getBounds();y.min.floor(),y.max.ceil();for(var _=u.Vector3.sub(y.max,y.min).add(1),b=_.x*_.y+_.x*_.z+_.y*_.z,v=new Array(b),x=0,w=y.min.y;w<=y.max.y;++w)for(var E=y.min.z;E<=y.max.z;++E)v[x++]={origin:new u.Vector3(y.min.x-1,w,E),axis:a.Axes.x};for(var A=y.min.x;A<=y.max.x;++A)for(E=y.min.z;E<=y.max.z;++E)v[x++]={origin:new u.Vector3(A,y.min.y-1,E),axis:a.Axes.y};for(A=y.min.x;A<=y.max.x;++A)for(w=y.min.y;w<=y.max.y;++w)v[x++]={origin:new u.Vector3(A,w,y.min.z-1),axis:a.Axes.z};(0,s.ASSERT)(v.length===x),(0,l.LOG)("Rays created...");var T=o.ProgressManager.Get.start("Voxelising");for(x=0;x<v.length;++x){o.ProgressManager.Get.progress(T,x/v.length);for(var S=v[x],M=0,k=m.intersectRay(S.origin,(0,a.axesToDirection)(S.axis),!1);M<k.length;M++){var O=k[M],I=O.intersectionPoint,R=new u.Vector3(I.x,I.y,I.z),C=this._getVoxelColour(e,e.getUVTriangle(O.triangleIndex),e.getMaterialByTriangle(O.triangleIndex),R,t.useMultisampleColouring);n.addVoxel(R,C)}}return o.ProgressManager.Get.end(T),e.clearTransform(),n},t}(f.IVoxeliser);t.BVHRayVoxeliser=d},4262:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.NormalCorrectedRayVoxeliser=void 0;var o=r(7168),a=r(4374),s=r(9347),l=r(2989),u=r(7464),c=r(8493),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._voxelise=function(e,t){this._mesh=e,this._voxelMesh=new c.VoxelMesh(t),this._voxeliseParams=t;var r,n=e.getBounds().getDimensions();switch(t.constraintAxis){case"x":r=t.size/n.x;break;case"y":r=t.size/n.y;break;case"z":r=t.size/n.z}e.setTransform((function(e){return e.copy().mulScalar(r)}));var i=e.getBounds();this._size=u.Vector3.sub(i.max.copy().ceil(),i.min.copy().floor()),this._offset=new u.Vector3(this._size.x%2==0?.5:0,this._size.y%2==0?.5:0,this._size.z%2==0?.5:0);for(var o=e.getTriangleCount(),s=a.ProgressManager.Get.start("Voxelising"),l=0;l<o;++l){a.ProgressManager.Get.progress(s,l/o);var f=e.getUVTriangle(l),h=e.getNormals(l),d=e.getMaterialByTriangle(l);this._voxeliseTri(f,d,h)}return a.ProgressManager.Get.end(s),e.clearTransform(),this._voxelMesh},t.prototype._voxeliseTri=function(e,t,r){var n=this._generateRays(e.v0,e.v1,e.v2,this._offset);(0,l.ASSERT)(void 0!==this._mesh),(0,l.ASSERT)(void 0!==this._voxeliseParams),(0,l.ASSERT)(void 0!==this._voxelMesh);for(var i=0,o=n;i<o.length;i++){var a=o[i],c=(0,s.rayIntersectTriangle)(a,e.v0,e.v1,e.v2);if(c){var f=r.v0.normalise();c.sub(u.Vector3.mulScalar(f,.5)),c.add(this._offset);var h=void 0;switch(a.axis){case s.Axes.x:h=new u.Vector3(Math.round(c.x),c.y,c.z);break;case s.Axes.y:h=new u.Vector3(c.x,Math.round(c.y),c.z);break;case s.Axes.z:h=new u.Vector3(c.x,c.y,Math.round(c.z))}var d=this._getVoxelColour(this._mesh,e,t,h,this._voxeliseParams.useMultisampleColouring);this._voxelMesh.addVoxel(h,d)}}},t.prototype._generateRays=function(e,t,r,n){var i=new o.Bounds(new u.Vector3(Math.ceil(Math.min(e.x,t.x,r.x)),Math.ceil(Math.min(e.y,t.y,r.y)),Math.ceil(Math.min(e.z,t.z,r.z))),new u.Vector3(Math.floor(Math.max(e.x,t.x,r.x)),Math.floor(Math.max(e.y,t.y,r.y)),Math.floor(Math.max(e.z,t.z,r.z)))),a=[];return this._traverseX(a,i,n),this._traverseY(a,i,n),this._traverseZ(a,i,n),a},t.prototype._traverseX=function(e,t,r){for(var n=t.min.y-r.y;n<=t.max.y+r.y;++n)for(var i=t.min.z-r.z;i<=t.max.z+r.z;++i)e.push({origin:new u.Vector3(t.min.x-1,n,i),axis:s.Axes.x})},t.prototype._traverseY=function(e,t,r){for(var n=t.min.x-r.x;n<=t.max.x+r.x;++n)for(var i=t.min.z-r.z;i<=t.max.z+r.z;++i)e.push({origin:new u.Vector3(n,t.min.y-1,i),axis:s.Axes.y})},t.prototype._traverseZ=function(e,t,r){for(var n=t.min.x-r.x;n<=t.max.x+r.x;++n)for(var i=t.min.y-r.y;i<=t.max.y+r.y;++i)e.push({origin:new u.Vector3(n,i,t.min.z-1),axis:s.Axes.z})},t}(r(6065).IVoxeliser);t.NormalCorrectedRayVoxeliser=f},5796:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.RayVoxeliser=void 0;var o=r(7168),a=r(4374),s=r(9347),l=r(2989),u=r(7464),c=r(8493),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._voxelise=function(e,t){this._mesh=e,this._voxelMesh=new c.VoxelMesh(t),this._voxeliseParams=t;var r,n=e.getBounds().getDimensions(),i=new u.Vector3(0,0,0);switch(t.constraintAxis){case"x":r=(t.size-1)/n.x,i=t.size%2==0?new u.Vector3(.5,0,0):new u.Vector3(0,0,0);break;case"y":r=(t.size-1)/n.y,i=t.size%2==0?new u.Vector3(0,.5,0):new u.Vector3(0,0,0);break;case"z":r=(t.size-1)/n.z,i=t.size%2==0?new u.Vector3(0,0,.5):new u.Vector3(0,0,0)}e.setTransform((function(e){return e.copy().mulScalar(r).add(i)}));for(var o=e.getTriangleCount(),s=a.ProgressManager.Get.start("Voxelising"),l=0;l<o;++l){a.ProgressManager.Get.progress(s,l/o);var f=e.getUVTriangle(l),h=e.getMaterialByTriangle(l);this._voxeliseTri(f,h)}return a.ProgressManager.Get.end(s),e.clearTransform(),this._voxelMesh},t.prototype._voxeliseTri=function(e,t){var r=this._generateRays(e.v0,e.v1,e.v2);(0,l.ASSERT)(void 0!==this._mesh),(0,l.ASSERT)(void 0!==this._voxeliseParams),(0,l.ASSERT)(void 0!==this._voxelMesh);for(var n=0,i=r;n<i.length;n++){var o=i[n],a=(0,s.rayIntersectTriangle)(o,e.v0,e.v1,e.v2);if(a){var c=void 0;switch(o.axis){case s.Axes.x:c=new u.Vector3(Math.round(a.x),a.y,a.z);break;case s.Axes.y:c=new u.Vector3(a.x,Math.round(a.y),a.z);break;case s.Axes.z:c=new u.Vector3(a.x,a.y,Math.round(a.z))}var f=this._getVoxelColour(this._mesh,e,t,c,this._voxeliseParams.useMultisampleColouring);this._voxelMesh.addVoxel(c,f)}}},t.prototype._generateRays=function(e,t,r){var n=new o.Bounds(new u.Vector3(Math.floor(Math.min(e.x,t.x,r.x)),Math.floor(Math.min(e.y,t.y,r.y)),Math.floor(Math.min(e.z,t.z,r.z))),new u.Vector3(Math.ceil(Math.max(e.x,t.x,r.x)),Math.ceil(Math.max(e.y,t.y,r.y)),Math.ceil(Math.max(e.z,t.z,r.z)))),i=[];return this._traverseX(i,n),this._traverseY(i,n),this._traverseZ(i,n),i},t.prototype._traverseX=function(e,t){for(var r=t.min.y;r<=t.max.y;++r)for(var n=t.min.z;n<=t.max.z;++n)e.push({origin:new u.Vector3(t.min.x-1,r,n),axis:s.Axes.x})},t.prototype._traverseY=function(e,t){for(var r=t.min.x;r<=t.max.x;++r)for(var n=t.min.z;n<=t.max.z;++n)e.push({origin:new u.Vector3(r,t.min.y-1,n),axis:s.Axes.y})},t.prototype._traverseZ=function(e,t){for(var r=t.min.x;r<=t.max.x;++r)for(var n=t.min.y;n<=t.max.y;++n)e.push({origin:new u.Vector3(r,n,t.min.z-1),axis:s.Axes.z})},t}(r(6065).IVoxeliser);t.RayVoxeliser=f},418:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoxeliserFactory=void 0;var n=r(2989),i=r(1890),o=r(1493),a=r(4262),s=r(5796),l=function(){function e(){}return e.GetVoxeliser=function(e){switch(e){case"bvh-ray":return new i.BVHRayVoxeliser;case"ncrb":return new a.NormalCorrectedRayVoxeliser;case"ray-based":return new s.RayVoxeliser;case"bvh-ray-plus-thickness":return new o.BVHRayVoxeliserPlusThickness;default:(0,n.ASSERT)(!1,"Unreachable")}},e}();t.VoxeliserFactory=l},5827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doWork=void 0;var n=r(4374),i=r(1535),o=r(2989),a=r(7673);t.doWork=function(e){i.StatusHandler.Get.clear(),"RenderNextVoxelMeshChunk"!==e.action&&"RenderNextBlockMeshChunk"!==e.action&&n.ProgressManager.Get.clear();try{switch(e.action){case"Init":return{action:"Init",result:a.WorkerClient.Get.init(e.params),statusMessages:i.StatusHandler.Get.getAllStatusMessages()};case"Import":return{action:"Import",result:a.WorkerClient.Get.import(e.params),statusMessages:i.StatusHandler.Get.getAllStatusMessages()};case"SetMaterials":return{action:"SetMaterials",result:a.WorkerClient.Get.setMaterials(e.params),statusMessages:i.StatusHandler.Get.getAllStatusMessages()};case"RenderMesh":return{action:"RenderMesh",result:a.WorkerClient.Get.renderMesh(e.params),statusMessages:i.StatusHandler.Get.getAllStatusMessages()};case"Voxelise":return{action:"Voxelise",result:a.WorkerClient.Get.voxelise(e.params),statusMessages:i.StatusHandler.Get.getAllStatusMessages()};case"RenderNextVoxelMeshChunk":return{action:"RenderNextVoxelMeshChunk",result:a.WorkerClient.Get.renderChunkedVoxelMesh(e.params),statusMessages:i.StatusHandler.Get.getAllStatusMessages()};case"Assign":return{action:"Assign",result:a.WorkerClient.Get.assign(e.params),statusMessages:i.StatusHandler.Get.getAllStatusMessages()};case"RenderNextBlockMeshChunk":return{action:"RenderNextBlockMeshChunk",result:a.WorkerClient.Get.renderChunkedBlockMesh(e.params),statusMessages:i.StatusHandler.Get.getAllStatusMessages()};case"Export":return{action:"Export",result:a.WorkerClient.Get.export(e.params),statusMessages:i.StatusHandler.Get.getAllStatusMessages()}}}catch(e){return{action:e instanceof o.AppError?"KnownError":"UnknownError",error:e}}}},7673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerClient=void 0;var n=r(3485),i=r(7594),o=r(4917),a=r(9712),s=r(2758),l=r(1801),u=r(4374),c=r(2989),f=r(418),h=function(){function e(){this._voxelMeshChunkIndex=0,this._blockMeshChunkIndex=0}return Object.defineProperty(e,"Get",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.init=function(e){return a.EventManager.Get.add(a.EAppEvent.onTaskStart,(function(e){var t={action:"Progress",payload:{type:"Started",taskId:e[0]}};postMessage(t)})),a.EventManager.Get.add(a.EAppEvent.onTaskProgress,(function(e){var t={action:"Progress",payload:{type:"Progress",taskId:e[0],percentage:e[1]}};postMessage(t)})),a.EventManager.Get.add(a.EAppEvent.onTaskEnd,(function(e){var t={action:"Progress",payload:{type:"Finished",taskId:e[0]}};postMessage(t)})),{}},e.prototype.import=function(e){var t=l.ImporterFactor.GetImporter(e.importer);return t.parse(e.fileSource),this._loadedMesh=t.toMesh(),this._loadedMesh.processMesh(e.rotation.y,e.rotation.x,e.rotation.z),{triangleCount:this._loadedMesh.getTriangleCount(),dimensions:this._loadedMesh.getBounds().getDimensions(),materials:this._loadedMesh.getMaterials()}},e.prototype.setMaterials=function(e){return(0,c.ASSERT)(void 0!==this._loadedMesh),this._loadedMesh.setMaterials(e.materials),{materials:this._loadedMesh.getMaterials(),materialsChanged:Array.from(e.materials.keys())}},e.prototype.renderMesh=function(e){return(0,c.ASSERT)(void 0!==this._loadedMesh),{buffers:o.BufferGenerator.fromMesh(this._loadedMesh),dimensions:this._loadedMesh.getBounds().getDimensions()}},e.prototype.voxelise=function(e){(0,c.ASSERT)(void 0!==this._loadedMesh);var t=f.VoxeliserFactory.GetVoxeliser(e.voxeliser);return this._loadedVoxelMesh=t.voxelise(this._loadedMesh,e),this._voxelMeshChunkIndex=0,{}},e.prototype.renderChunkedVoxelMesh=function(e){(0,c.ASSERT)(void 0!==this._loadedVoxelMesh);var t=0===this._voxelMeshChunkIndex;t&&(this._voxelMeshProgressHandle=u.ProgressManager.Get.start("VoxelMeshBuffer"),this._loadedVoxelMesh.setRenderParams(e));var r=this._loadedVoxelMesh.getChunkedBuffer(this._voxelMeshChunkIndex);return++this._voxelMeshChunkIndex,void 0!==this._voxelMeshProgressHandle&&(r.moreVoxelsToBuffer?u.ProgressManager.Get.progress(this._voxelMeshProgressHandle,r.progress):(u.ProgressManager.Get.end(this._voxelMeshProgressHandle),this._voxelMeshProgressHandle=void 0)),{buffer:r,dimensions:this._loadedVoxelMesh.getBounds().getDimensions(),voxelSize:8/e.desiredHeight,moreVoxelsToBuffer:r.moreVoxelsToBuffer,isFirstChunk:t}},e.prototype.assign=function(e){return(0,c.ASSERT)(void 0!==this._loadedVoxelMesh),this._loadedBlockMesh=i.BlockMesh.createFromVoxelMesh(this._loadedVoxelMesh,e),this._blockMeshChunkIndex=0,{}},e.prototype.renderChunkedBlockMesh=function(e){(0,c.ASSERT)(void 0!==this._loadedBlockMesh);var t=0===this._blockMeshChunkIndex,r=this._loadedBlockMesh.getChunkedBuffer(this._blockMeshChunkIndex);++this._blockMeshChunkIndex;var i=n.Atlas.load(e.textureAtlas);return(0,c.ASSERT)(void 0!==i),{buffer:r,dimensions:this._loadedBlockMesh.getVoxelMesh().getBounds().getDimensions(),atlasTexturePath:i.getAtlasTexturePath(),atlasSize:i.getAtlasSize(),moreBlocksToBuffer:r.moreBlocksToBuffer,isFirstChunk:t}},e.prototype.export=function(e){(0,c.ASSERT)(void 0!==this._loadedBlockMesh);var t=s.ExporterFactory.GetExporter(e.exporter),r="."+t.getFileExtension();return e.filepath.endsWith(r)||(e.filepath+=r),t.export(this._loadedBlockMesh,e.filepath),{}},e}();t.WorkerClient=h},2649:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerController=void 0;var n=r(8913),i=r(9712),o=r(2989),a=r(3243),s=r(5827),l=function(){function e(e,t){n.AppConfig.Get.USE_WORKER_THREAD&&(this._worker=new Worker(e,t),this._worker.onmessage=this._onWorkerMessage.bind(this)),this._jobQueue=[],this._jobStartTime=0,this._timerOn=!1}return e.prototype.addJob=function(e){return this._jobQueue.some((function(t){return t.id===e.id}))?((0,a.LOG)("[WorkerController]: Job already queued with ID",e.id),!1):(this._jobQueue.push(e),this._tryStartNextJob(),!0)},e.prototype.isBusy=function(){return void 0!==this._jobPending&&n.AppConfig.Get.USE_WORKER_THREAD},e.prototype._onWorkerMessage=function(e){if((0,o.ASSERT)(void 0!==this._jobPending,"Received worker message when no job is pending"),"Progress"!==e.data.action){var t=!0;if("RenderNextVoxelMeshChunk"===e.data.action?e.data.result.moreVoxelsToBuffer&&(t=!1):"RenderNextBlockMeshChunk"===e.data.action&&e.data.result.moreBlocksToBuffer&&(t=!1),t){var r=Date.now()-this._jobStartTime;(0,a.LOG)("[WorkerController]: '".concat(this._jobPending.id,"' completed in ").concat(r,"ms")),this._timerOn=!1}this._jobPending.callback&&this._jobPending.callback(e.data),this._jobPending=void 0,this._tryStartNextJob()}else switch(e.data.payload.type){case"Started":i.EventManager.Get.broadcast(i.EAppEvent.onTaskStart,e.data.payload.taskId);break;case"Progress":i.EventManager.Get.broadcast(i.EAppEvent.onTaskProgress,e.data.payload.taskId,e.data.payload.percentage);break;case"Finished":i.EventManager.Get.broadcast(i.EAppEvent.onTaskEnd,e.data.payload.taskId)}},e.prototype._tryStartNextJob=function(){if(!this.isBusy()&&(this._jobPending=this._jobQueue.shift(),void 0!==this._jobPending))if(this._timerOn||((0,a.LOG)("[WorkerController]: Starting Job '".concat(this._jobPending.id,"' (").concat(this._jobQueue.length," remaining)")),(0,a.LOG)("[WorkerController]: ".concat(JSON.stringify(this._jobPending.payload,null,4))),this._jobStartTime=Date.now(),this._timerOn=!0),n.AppConfig.Get.USE_WORKER_THREAD)(0,o.ASSERT)(void 0!==this._worker,"No worker instance"),this._worker.postMessage(this._jobPending.payload);else{var e=(0,s.doWork)(this._jobPending.payload);this._jobPending.callback&&this._jobPending.callback(e)}},e}();t.WorkerController=l},3141:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addExtensionsToContext:()=>wa,attributes:()=>ge,bindFramebufferInfo:()=>ca,bindTransformFeedbackInfo:()=>To,bindUniformBlock:()=>Co,canFilter:()=>Pn,canGenerateMipmap:()=>Vn,createAttribsFromArrays:()=>ue,createAttributeSetters:()=>No,createBufferFromArray:()=>de,createBufferFromTypedArray:()=>te,createBufferInfoFromArrays:()=>he,createBuffersFromArrays:()=>pe,createFramebufferInfo:()=>la,createProgram:()=>fo,createProgramAsync:()=>ho,createProgramFromScripts:()=>yo,createProgramFromSources:()=>_o,createProgramInfo:()=>Go,createProgramInfoAsync:()=>po,createProgramInfoFromProgram:()=>zo,createSampler:()=>qn,createSamplers:()=>Yn,createTexture:()=>si,createTextures:()=>ui,createTransformFeedback:()=>So,createTransformFeedbackInfo:()=>Ao,createUniformBlockInfo:()=>Ro,createUniformBlockInfoFromProgram:()=>Io,createUniformBlockSpecFromProgram:()=>Mo,createUniformSetters:()=>Eo,createVAOAndSetAttributes:()=>pa,createVAOFromBufferInfo:()=>ga,createVertexArrayInfo:()=>da,draw:()=>Xo,drawBufferInfo:()=>qo,drawObjectList:()=>Yo,framebuffers:()=>fa,getArray_:()=>ne,getBytesPerElementForInternalFormat:()=>Cn,getContext:()=>Aa,getFormatAndTypeForInternalFormat:()=>Ln,getGLTypeForTypedArray:()=>I,getGLTypeForTypedArrayType:()=>R,getNumComponentsForFormat:()=>Un,getNumComponents_:()=>se,getTypedArrayTypeForGLType:()=>C,getWebGLContext:()=>Ea,glEnumToString:()=>mt,isArrayBuffer:()=>L,isWebGL1:()=>gt,isWebGL2:()=>pt,loadTextureFromUrl:()=>ii,m4:()=>x,primitives:()=>dt,programs:()=>Ho,resizeCanvasToDisplaySize:()=>Ta,resizeFramebufferInfo:()=>ua,resizeTexture:()=>li,setAttribInfoBufferFromArray:()=>ce,setAttributeDefaults_:()=>Q,setAttributePrefix:()=>J,setAttributes:()=>Fo,setBlockUniforms:()=>Bo,setBuffersAndAttributes:()=>jo,setDefaultTextureColor:()=>jn,setDefaults:()=>_a,setEmptyTexture:()=>ai,setSamplerParameters:()=>Zn,setTextureDefaults_:()=>zn,setTextureFilteringForSize:()=>Xn,setTextureFromArray:()=>oi,setTextureFromElement:()=>Qn,setTextureParameters:()=>Wn,setUniformBlock:()=>Lo,setUniforms:()=>Po,setUniformsAndBindTextures:()=>Uo,textures:()=>ci,typedarrays:()=>B,utils:()=>yt,v3:()=>f,vertexArrays:()=>ma});var n=r(5108);let i=Float32Array;function o(e,t,r){const n=new i(3);return e&&(n[0]=e),t&&(n[1]=t),r&&(n[2]=r),n}function a(e,t,r){return(r=r||new i(3))[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function s(e,t,r){return(r=r||new i(3))[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function l(e,t,r){r=r||new i(3);const n=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=n,r[2]=o,r}function u(e,t){t=t||new i(3);const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=Math.sqrt(r);return n>1e-5?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=0,t[1]=0,t[2]=0),t}function c(e,t,r){return(r=r||new i(3))[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}var f=Object.freeze({__proto__:null,add:a,copy:function(e,t){return(t=t||new i(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t},create:o,cross:l,distance:function(e,t){const r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)},distanceSq:function(e,t){const r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i},divide:function(e,t,r){return(r=r||new i(3))[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r},divScalar:function(e,t,r){return(r=r||new i(3))[0]=e[0]/t,r[1]=e[1]/t,r[2]=e[2]/t,r},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},lerp:function(e,t,r,n){return(n=n||new i(3))[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n[2]=e[2]+r*(t[2]-e[2]),n},lerpV:function(e,t,r,n){return(n=n||new i(3))[0]=e[0]+r[0]*(t[0]-e[0]),n[1]=e[1]+r[1]*(t[1]-e[1]),n[2]=e[2]+r[2]*(t[2]-e[2]),n},length:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},lengthSq:function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},max:function(e,t,r){return(r=r||new i(3))[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r},min:function(e,t,r){return(r=r||new i(3))[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r},mulScalar:function(e,t,r){return(r=r||new i(3))[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r},multiply:c,negate:function(e,t){return(t=t||new i(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},normalize:u,setDefaultType:function(e){const t=i;return i=e,t},subtract:s});let h,d,p,g=Float32Array;function m(e,t){return(t=t||new g(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function y(e){return(e=e||new g(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _(e,t){t=t||new g(16);const r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],y=e[14],_=e[15],b=h*_,v=y*d,x=l*_,w=y*u,E=l*d,A=h*u,T=i*_,S=y*o,M=i*d,k=h*o,O=i*u,I=l*o,R=c*m,C=p*f,L=a*m,B=p*s,V=a*f,P=c*s,U=r*m,N=p*n,F=r*f,j=c*n,z=r*s,D=a*n,G=b*s+w*f+E*m-(v*s+x*f+A*m),H=v*n+T*f+k*m-(b*n+S*f+M*m),W=x*n+S*s+O*m-(w*n+T*s+I*m),Z=A*n+M*s+I*f-(E*n+k*s+O*f),q=1/(r*G+a*H+c*W+p*Z);return t[0]=q*G,t[1]=q*H,t[2]=q*W,t[3]=q*Z,t[4]=q*(v*a+x*c+A*p-(b*a+w*c+E*p)),t[5]=q*(b*r+S*c+M*p-(v*r+T*c+k*p)),t[6]=q*(w*r+T*a+I*p-(x*r+S*a+O*p)),t[7]=q*(E*r+k*a+O*c-(A*r+M*a+I*c)),t[8]=q*(R*u+B*d+V*_-(C*u+L*d+P*_)),t[9]=q*(C*o+U*d+j*_-(R*o+N*d+F*_)),t[10]=q*(L*o+N*u+z*_-(B*o+U*u+D*_)),t[11]=q*(P*o+F*u+D*d-(V*o+j*u+z*d)),t[12]=q*(L*h+P*y+C*l-(V*y+R*l+B*h)),t[13]=q*(F*y+R*i+N*h-(U*h+j*y+C*i)),t[14]=q*(U*l+D*y+B*i-(z*y+L*i+N*l)),t[15]=q*(z*h+V*i+j*l-(F*l+D*h+P*i)),t}function b(e,t,r){r=r||o();const n=t[0],i=t[1],a=t[2],s=n*e[3]+i*e[7]+a*e[11]+e[15];return r[0]=(n*e[0]+i*e[4]+a*e[8]+e[12])/s,r[1]=(n*e[1]+i*e[5]+a*e[9]+e[13])/s,r[2]=(n*e[2]+i*e[6]+a*e[10]+e[14])/s,r}function v(e,t,r){r=r||o();const n=t[0],i=t[1],a=t[2];return r[0]=n*e[0]+i*e[4]+a*e[8],r[1]=n*e[1]+i*e[5]+a*e[9],r[2]=n*e[2]+i*e[6]+a*e[10],r}var x=Object.freeze({__proto__:null,axisRotate:function(e,t,r,n){n=n||new g(16);let i=t[0],o=t[1],a=t[2];const s=Math.sqrt(i*i+o*o+a*a);i/=s,o/=s,a/=s;const l=i*i,u=o*o,c=a*a,f=Math.cos(r),h=Math.sin(r),d=1-f,p=l+(1-l)*f,m=i*o*d+a*h,y=i*a*d-o*h,_=i*o*d-a*h,b=u+(1-u)*f,v=o*a*d+i*h,x=i*a*d+o*h,w=o*a*d-i*h,E=c+(1-c)*f,A=e[0],T=e[1],S=e[2],M=e[3],k=e[4],O=e[5],I=e[6],R=e[7],C=e[8],L=e[9],B=e[10],V=e[11];return n[0]=p*A+m*k+y*C,n[1]=p*T+m*O+y*L,n[2]=p*S+m*I+y*B,n[3]=p*M+m*R+y*V,n[4]=_*A+b*k+v*C,n[5]=_*T+b*O+v*L,n[6]=_*S+b*I+v*B,n[7]=_*M+b*R+v*V,n[8]=x*A+w*k+E*C,n[9]=x*T+w*O+E*L,n[10]=x*S+w*I+E*B,n[11]=x*M+w*R+E*V,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},axisRotation:function(e,t,r){r=r||new g(16);let n=e[0],i=e[1],o=e[2];const a=Math.sqrt(n*n+i*i+o*o);n/=a,i/=a,o/=a;const s=n*n,l=i*i,u=o*o,c=Math.cos(t),f=Math.sin(t),h=1-c;return r[0]=s+(1-s)*c,r[1]=n*i*h+o*f,r[2]=n*o*h-i*f,r[3]=0,r[4]=n*i*h-o*f,r[5]=l+(1-l)*c,r[6]=i*o*h+n*f,r[7]=0,r[8]=n*o*h+i*f,r[9]=i*o*h-n*f,r[10]=u+(1-u)*c,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},copy:m,create:function(){return new g(16).fill(0)},frustum:function(e,t,r,n,i,o,a){const s=t-e,l=n-r,u=i-o;return(a=a||new g(16))[0]=2*i/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*i/l,a[6]=0,a[7]=0,a[8]=(e+t)/s,a[9]=(n+r)/l,a[10]=o/u,a[11]=-1,a[12]=0,a[13]=0,a[14]=i*o/u,a[15]=0,a},getAxis:function(e,t,r){const n=4*t;return(r=r||o())[0]=e[n+0],r[1]=e[n+1],r[2]=e[n+2],r},getTranslation:function(e,t){return(t=t||o())[0]=e[12],t[1]=e[13],t[2]=e[14],t},identity:y,inverse:_,lookAt:function(e,t,r,n){return n=n||new g(16),h=h||o(),d=d||o(),p=p||o(),u(s(e,t,p),p),u(l(r,p,h),h),u(l(p,h,d),d),n[0]=h[0],n[1]=h[1],n[2]=h[2],n[3]=0,n[4]=d[0],n[5]=d[1],n[6]=d[2],n[7]=0,n[8]=p[0],n[9]=p[1],n[10]=p[2],n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},multiply:function(e,t,r){r=r||new g(16);const n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],m=e[12],y=e[13],_=e[14],b=e[15],v=t[0],x=t[1],w=t[2],E=t[3],A=t[4],T=t[5],S=t[6],M=t[7],k=t[8],O=t[9],I=t[10],R=t[11],C=t[12],L=t[13],B=t[14],V=t[15];return r[0]=n*v+s*x+f*w+m*E,r[1]=i*v+l*x+h*w+y*E,r[2]=o*v+u*x+d*w+_*E,r[3]=a*v+c*x+p*w+b*E,r[4]=n*A+s*T+f*S+m*M,r[5]=i*A+l*T+h*S+y*M,r[6]=o*A+u*T+d*S+_*M,r[7]=a*A+c*T+p*S+b*M,r[8]=n*k+s*O+f*I+m*R,r[9]=i*k+l*O+h*I+y*R,r[10]=o*k+u*O+d*I+_*R,r[11]=a*k+c*O+p*I+b*R,r[12]=n*C+s*L+f*B+m*V,r[13]=i*C+l*L+h*B+y*V,r[14]=o*C+u*L+d*B+_*V,r[15]=a*C+c*L+p*B+b*V,r},negate:function(e,t){return(t=t||new g(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},ortho:function(e,t,r,n,i,o,a){return(a=a||new g(16))[0]=2/(t-e),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(n-r),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(i-o),a[11]=0,a[12]=(t+e)/(e-t),a[13]=(n+r)/(r-n),a[14]=(o+i)/(i-o),a[15]=1,a},perspective:function(e,t,r,n,i){i=i||new g(16);const o=Math.tan(.5*Math.PI-.5*e),a=1/(r-n);return i[0]=o/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(r+n)*a,i[11]=-1,i[12]=0,i[13]=0,i[14]=r*n*a*2,i[15]=0,i},rotateX:function(e,t,r){r=r||new g(16);const n=e[4],i=e[5],o=e[6],a=e[7],s=e[8],l=e[9],u=e[10],c=e[11],f=Math.cos(t),h=Math.sin(t);return r[4]=f*n+h*s,r[5]=f*i+h*l,r[6]=f*o+h*u,r[7]=f*a+h*c,r[8]=f*s-h*n,r[9]=f*l-h*i,r[10]=f*u-h*o,r[11]=f*c-h*a,e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},rotateY:function(e,t,r){r=r||new g(16);const n=e[0],i=e[1],o=e[2],a=e[3],s=e[8],l=e[9],u=e[10],c=e[11],f=Math.cos(t),h=Math.sin(t);return r[0]=f*n-h*s,r[1]=f*i-h*l,r[2]=f*o-h*u,r[3]=f*a-h*c,r[8]=f*s+h*n,r[9]=f*l+h*i,r[10]=f*u+h*o,r[11]=f*c+h*a,e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},rotateZ:function(e,t,r){r=r||new g(16);const n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=Math.cos(t),h=Math.sin(t);return r[0]=f*n+h*s,r[1]=f*i+h*l,r[2]=f*o+h*u,r[3]=f*a+h*c,r[4]=f*s-h*n,r[5]=f*l-h*i,r[6]=f*u-h*o,r[7]=f*c-h*a,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},rotationX:function(e,t){t=t||new g(16);const r=Math.cos(e),n=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationY:function(e,t){t=t||new g(16);const r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationZ:function(e,t){t=t||new g(16);const r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},scale:function(e,t,r){r=r||new g(16);const n=t[0],i=t[1],o=t[2];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=n*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=i*e[6],r[7]=i*e[7],r[8]=o*e[8],r[9]=o*e[9],r[10]=o*e[10],r[11]=o*e[11],e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},scaling:function(e,t){return(t=t||new g(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},setAxis:function(e,t,r,n){n!==e&&(n=m(e,n));const i=4*r;return n[i+0]=t[0],n[i+1]=t[1],n[i+2]=t[2],n},setDefaultType:function(e){const t=g;return g=e,t},setTranslation:function(e,t,r){return e!==(r=r||y())&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11]),r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},transformDirection:v,transformNormal:function(e,t,r){r=r||o();const n=_(e),i=t[0],a=t[1],s=t[2];return r[0]=i*n[0]+a*n[1]+s*n[2],r[1]=i*n[4]+a*n[5]+s*n[6],r[2]=i*n[8]+a*n[9]+s*n[10],r},transformPoint:b,translate:function(e,t,r){r=r||new g(16);const n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],l=e[2],u=e[3],c=e[4],f=e[5],h=e[6],d=e[7],p=e[8],m=e[9],y=e[10],_=e[11],b=e[12],v=e[13],x=e[14],w=e[15];return e!==r&&(r[0]=a,r[1]=s,r[2]=l,r[3]=u,r[4]=c,r[5]=f,r[6]=h,r[7]=d,r[8]=p,r[9]=m,r[10]=y,r[11]=_),r[12]=a*n+c*i+p*o+b,r[13]=s*n+f*i+m*o+v,r[14]=l*n+h*i+y*o+x,r[15]=u*n+d*i+_*o+w,r},translation:function(e,t){return(t=t||new g(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},transpose:function(e,t){if((t=t||new g(16))===e){let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,t}const r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],y=e[14],_=e[15];return t[0]=r,t[1]=a,t[2]=c,t[3]=p,t[4]=n,t[5]=s,t[6]=f,t[7]=m,t[8]=i,t[9]=l,t[10]=h,t[11]=y,t[12]=o,t[13]=u,t[14]=d,t[15]=_,t}});const w=5120,E=5121,A=5122,T=5123,S=5124,M=5125,k=5126,O={};{const e=O;e[w]=Int8Array,e[E]=Uint8Array,e[A]=Int16Array,e[T]=Uint16Array,e[S]=Int32Array,e[M]=Uint32Array,e[k]=Float32Array,e[32819]=Uint16Array,e[32820]=Uint16Array,e[33635]=Uint16Array,e[5131]=Uint16Array,e[33640]=Uint32Array,e[35899]=Uint32Array,e[35902]=Uint32Array,e[36269]=Uint32Array,e[34042]=Uint32Array}function I(e){if(e instanceof Int8Array)return w;if(e instanceof Uint8Array)return E;if(e instanceof Uint8ClampedArray)return E;if(e instanceof Int16Array)return A;if(e instanceof Uint16Array)return T;if(e instanceof Int32Array)return S;if(e instanceof Uint32Array)return M;if(e instanceof Float32Array)return k;throw new Error("unsupported typed array type")}function R(e){if(e===Int8Array)return w;if(e===Uint8Array)return E;if(e===Uint8ClampedArray)return E;if(e===Int16Array)return A;if(e===Uint16Array)return T;if(e===Int32Array)return S;if(e===Uint32Array)return M;if(e===Float32Array)return k;throw new Error("unsupported typed array type")}function C(e){const t=O[e];if(!t)throw new Error("unknown gl type");return t}const L="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};var B=Object.freeze({__proto__:null,getGLTypeForTypedArray:I,getGLTypeForTypedArrayType:R,getTypedArrayTypeForGLType:C,isArrayBuffer:L});function V(e,t){Object.keys(t).forEach((function(r){t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(t[r]=e[r])}))}function P(...e){n.error(...e)}function U(...e){n.warn(...e)}function N(e,t){return"undefined"!=typeof WebGLRenderbuffer&&t instanceof WebGLRenderbuffer}function F(e,t){return"undefined"!=typeof WebGLTexture&&t instanceof WebGLTexture}const j=35044,z=34962,D=34963,G=34660,H=5120,W=5121,Z=5122,q=5123,Y=5124,X=5125,$=5126,K={attribPrefix:""};function J(e){K.attribPrefix=e}function Q(e){V(e,K)}function ee(e,t,r,n,i){e.bindBuffer(t,r),e.bufferData(t,n,i||j)}function te(e,t,r,n){if("undefined"!=typeof WebGLBuffer&&t instanceof WebGLBuffer)return t;r=r||z;const i=e.createBuffer();return ee(e,r,i,t,n),i}function re(e){return"indices"===e}function ne(e){return e.length?e:e.data}const ie=/coord|texture/i,oe=/color|colour/i;function ae(e,t){let r;if(r=ie.test(e)?2:oe.test(e)?4:3,t%r>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${r} but ${t} values is not evenly divisible by ${r}. You should specify it.`);return r}function se(e,t){return e.numComponents||e.size||ae(t,ne(e).length)}function le(e,t){if(L(e))return e;if(L(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type;return r||(r=re(t)?Uint16Array:Float32Array),new r(e.data)}function ue(e,t){const r={};return Object.keys(t).forEach((function(n){if(!re(n)){const o=t[n],a=o.attrib||o.name||o.attribName||K.attribPrefix+n;if(o.value){if(!Array.isArray(o.value)&&!L(o.value))throw new Error("array.value is not array or typedarray");r[a]={value:o.value}}else{let t,s,l,u;if(o.buffer&&o.buffer instanceof WebGLBuffer)t=o.buffer,u=o.numComponents||o.size,s=o.type,l=o.normalize;else if("number"==typeof o||"number"==typeof o.data){const r=o.data||o,a=o.type||Float32Array,c=r*a.BYTES_PER_ELEMENT;s=R(a),l=void 0!==o.normalize?o.normalize:(i=a)===Int8Array||i===Uint8Array,u=o.numComponents||o.size||ae(n,r),t=e.createBuffer(),e.bindBuffer(z,t),e.bufferData(z,c,o.drawType||j)}else{const r=le(o,n);t=te(e,r,void 0,o.drawType),s=I(r),l=void 0!==o.normalize?o.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(r),u=se(o,n)}r[a]={buffer:t,numComponents:u,type:s,normalize:l,stride:o.stride||0,offset:o.offset||0,divisor:void 0===o.divisor?void 0:o.divisor,drawType:o.drawType}}}var i})),e.bindBuffer(z,null),r}function ce(e,t,r,n){r=le(r),void 0!==n?(e.bindBuffer(z,t.buffer),e.bufferSubData(z,n,r)):ee(e,z,t.buffer,r,t.drawType)}const fe=["position","positions","a_position"];function he(e,t,r){const n=ue(e,t),i=Object.assign({},r||{});i.attribs=Object.assign({},r?r.attribs:{},n);const o=t.indices;if(o){const t=le(o,"indices");i.indices=te(e,t,D),i.numElements=t.length,i.elementType=I(t)}else i.numElements||(i.numElements=function(e,t){let r,n;for(n=0;n<fe.length&&(r=fe[n],!(r in t))&&(r=K.attribPrefix+r,!(r in t));++n);n===fe.length&&(r=Object.keys(t)[0]);const i=t[r];if(!i.buffer)return 1;e.bindBuffer(z,i.buffer);const o=e.getBufferParameter(z,G);var a;e.bindBuffer(z,null);const s=o/((a=i.type)===H||a===W?1:a===Z||a===q?2:a===Y||a===X||a===$?4:0),l=i.numComponents||i.size,u=s/l;if(u%1!=0)throw new Error(`numComponents ${l} not correct for length ${length}`);return u}(e,i.attribs));return i}function de(e,t,r){const n="indices"===r?D:z;return te(e,le(t,r),n)}function pe(e,t){const r={};return Object.keys(t).forEach((function(n){r[n]=de(e,t[n],n)})),t.indices?(r.numElements=t.indices.length,r.elementType=I(le(t.indices))):r.numElements=function(e){let t,r;for(r=0;r<fe.length&&(t=fe[r],!(t in e));++r);r===fe.length&&(t=Object.keys(e)[0]);const n=e[t],i=ne(n).length;if(void 0===i)return 1;const o=se(n,t),a=i/o;if(i%o>0)throw new Error(`numComponents ${o} not correct for length ${i}`);return a}(t),r}var ge=Object.freeze({__proto__:null,createAttribsFromArrays:ue,createBuffersFromArrays:pe,createBufferFromArray:de,createBufferFromTypedArray:te,createBufferInfoFromArrays:he,setAttribInfoBufferFromArray:ce,setAttributePrefix:J,setAttributeDefaults_:Q,getNumComponents_:se,getArray_:ne});const me=ne,ye=se;function _e(e,t){let r=0;return e.push=function(){for(let t=0;t<arguments.length;++t){const n=arguments[t];if(n instanceof Array||L(n))for(let t=0;t<n.length;++t)e[r++]=n[t];else e[r++]=n}},e.reset=function(e){r=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function be(e,t,r){return _e(new(r||Float32Array)(e*t),e)}function ve(e){return"indices"!==e}function xe(e,t,r){const n=e.length,i=new Float32Array(3);for(let o=0;o<n;o+=3)r(t,[e[o],e[o+1],e[o+2]],i),e[o]=i[0],e[o+1]=i[1],e[o+2]=i[2]}function we(e,t,r){r=r||o();const n=t[0],i=t[1],a=t[2];return r[0]=n*e[0]+i*e[1]+a*e[2],r[1]=n*e[4]+i*e[5]+a*e[6],r[2]=n*e[8]+i*e[9]+a*e[10],r}function Ee(e,t){return xe(e,t,v),e}function Ae(e,t){return xe(e,_(t),we),e}function Te(e,t){return xe(e,t,b),e}function Se(e,t){return Object.keys(e).forEach((function(r){const n=e[r];r.indexOf("pos")>=0?Te(n,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?Ee(n,t):r.indexOf("norm")>=0&&Ae(n,t)})),e}function Me(e,t,r){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(r=r||0)+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function ke(e,t,r,n,i){e=e||1,t=t||1,r=r||1,n=n||1,i=i||y();const o=(r+1)*(n+1),a=be(3,o),s=be(3,o),l=be(2,o);for(let i=0;i<=n;i++)for(let o=0;o<=r;o++){const u=o/r,c=i/n;a.push(e*u-.5*e,0,t*c-.5*t),s.push(0,1,0),l.push(u,c)}const u=r+1,c=be(3,r*n*2,Uint16Array);for(let e=0;e<n;e++)for(let t=0;t<r;t++)c.push((e+0)*u+t,(e+1)*u+t,(e+0)*u+t+1),c.push((e+1)*u+t,(e+1)*u+t+1,(e+0)*u+t+1);return Se({position:a,normal:s,texcoord:l,indices:c},i)}function Oe(e,t,r,n,i,o,a){if(t<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,o=o||0;const s=(i=i||Math.PI)-n,l=(a=a||2*Math.PI)-o,u=(t+1)*(r+1),c=be(3,u),f=be(3,u),h=be(2,u);for(let i=0;i<=r;i++)for(let a=0;a<=t;a++){const u=a/t,d=i/r,p=l*u+o,g=s*d+n,m=Math.sin(p),y=Math.cos(p),_=Math.sin(g),b=y*_,v=Math.cos(g),x=m*_;c.push(e*b,e*v,e*x),f.push(b,v,x),h.push(1-u,d)}const d=t+1,p=be(3,t*r*2,Uint16Array);for(let e=0;e<t;e++)for(let t=0;t<r;t++)p.push((t+0)*d+e,(t+0)*d+e+1,(t+1)*d+e),p.push((t+1)*d+e,(t+0)*d+e+1,(t+1)*d+e+1);return{position:c,normal:f,texcoord:h,indices:p}}const Ie=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function Re(e){const t=(e=e||1)/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],i=[[1,0],[0,0],[0,1],[1,1]],o=be(3,24),a=be(3,24),s=be(2,24),l=be(3,12,Uint16Array);for(let e=0;e<6;++e){const t=Ie[e];for(let l=0;l<4;++l){const u=r[t[l]],c=n[e],f=i[l];o.push(u),a.push(c),s.push(f)}const u=4*e;l.push(u+0,u+1,u+2),l.push(u+0,u+2,u+3)}return{position:o,normal:a,texcoord:s,indices:l}}function Ce(e,t,r,n,i,o,a){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(i<1)throw new Error("verticalSubdivisions must be 1 or greater");const s=void 0===o||o,l=void 0===a||a,u=(s?2:0)+(l?2:0),c=(n+1)*(i+1+u),f=be(3,c),h=be(3,c),d=be(2,c),p=be(3,n*(i+u/2)*2,Uint16Array),g=n+1,m=Math.atan2(e-t,r),y=Math.cos(m),_=Math.sin(m),b=i+(l?2:0);for(let o=s?-2:0;o<=b;++o){let a,s=o/i,l=r*s;o<0?(l=0,s=1,a=e):o>i?(l=r,s=1,a=t):a=e+o/i*(t-e),-2!==o&&o!==i+2||(a=0,s=0),l-=r/2;for(let e=0;e<g;++e){const t=Math.sin(e*Math.PI*2/n),r=Math.cos(e*Math.PI*2/n);f.push(t*a,l,r*a),o<0?h.push(0,-1,0):o>i?h.push(0,1,0):0===a?h.push(0,0,0):h.push(t*y,_,r*y),d.push(e/n,1-s)}}for(let e=0;e<i+u;++e)if(!(1===e&&s||e===i+u-2&&l))for(let t=0;t<n;++t)p.push(g*(e+0)+0+t,g*(e+0)+1+t,g*(e+1)+1+t),p.push(g*(e+0)+0+t,g*(e+1)+1+t,g*(e+1)+0+t);return{position:f,normal:h,texcoord:d,indices:p}}function Le(e,t){t=t||[];const r=[];for(let n=0;n<e.length;n+=4){const i=e[n],o=e.slice(n+1,n+4);o.push.apply(o,t);for(let e=0;e<i;++e)r.push.apply(r,o)}return r}function Be(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=Le([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=Le([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,i={position:be(3,n),texcoord:be(2,n),normal:be(3,n),color:be(4,n,Uint8Array),indices:be(3,n/3,Uint16Array)};i.position.push(e),i.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),i.normal.push(t),i.color.push(r);for(let e=0;e<n;++e)i.indices.push(e);return i}function Ve(e,t,r,n,i,o,s){if(i<=0)throw new Error("subdivisionDown must be > 0");const l=2,u=(s=s||1)-(o=o||0),f=2*(i+1)*(2+l),h=be(3,f),d=be(3,f),p=be(2,f);function g(e,t,r){return e+(t-e)*r}function m(t,r,s,f,m,y){for(let _=0;_<=i;_++){const b=r/(l-1),v=_/i,x=2*(b-.5),w=(o+v*u)*Math.PI,E=Math.sin(w),A=Math.cos(w),T=g(e,t,E),S=x*n,M=A*e,k=E*T;h.push(S,M,k);const O=a(c([0,E,A],s),f);d.push(O),p.push(b*m+y,v)}}for(let e=0;e<l;e++){const n=2*(e/(l-1)-.5);m(t,e,[1,1,1],[0,0,0],1,0),m(t,e,[0,0,0],[n,0,0],0,0),m(r,e,[1,1,1],[0,0,0],1,0),m(r,e,[0,0,0],[n,0,0],0,1)}const y=be(3,2*i*(2+l),Uint16Array);function _(e,t){for(let r=0;r<i;++r)y.push(e+r+0,e+r+1,t+r+0),y.push(e+r+1,t+r+1,t+r+0)}const b=i+1;return _(0*b,4*b),_(5*b,7*b),_(6*b,2*b),_(3*b,1*b),{position:h,normal:d,texcoord:p,indices:y}}function Pe(e,t,r,n,i,o){return Ce(e,e,t,r,n,i,o)}function Ue(e,t,r,n,i,o){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");i=i||0;const a=(o=o||2*Math.PI)-i,s=r+1,l=n+1,u=s*l,c=be(3,u),f=be(3,u),h=be(2,u),d=be(3,r*n*2,Uint16Array);for(let o=0;o<l;++o){const l=o/n,u=l*Math.PI*2,d=Math.sin(u),p=e+d*t,g=Math.cos(u),m=g*t;for(let e=0;e<s;++e){const t=e/r,n=i+t*a,o=Math.sin(n),s=Math.cos(n),u=o*p,y=s*p,_=o*d,b=s*d;c.push(u,m,y),f.push(_,g,b),h.push(t,1-l)}}for(let e=0;e<n;++e)for(let t=0;t<r;++t){const r=1+t,n=1+e;d.push(s*e+t,s*n+t,s*e+r),d.push(s*n+t,s*n+r,s*e+r)}return{position:c,normal:f,texcoord:h,indices:d}}function Ne(e,t,r,n,i){if(t<3)throw new Error("divisions must be at least 3");i=i||1,n=n||0;const o=(t+1)*((r=r||1)+1),a=be(3,o),s=be(3,o),l=be(2,o),u=be(3,r*t*2,Uint16Array);let c=0;const f=e-n,h=t+1;for(let e=0;e<=r;++e){const o=n+f*Math.pow(e/r,i);for(let n=0;n<=t;++n){const i=2*Math.PI*n/t,f=o*Math.cos(i),d=o*Math.sin(i);if(a.push(f,0,d),s.push(0,1,0),l.push(1-n/t,e/r),e>0&&n!==t){const e=c+(n+1),t=c+n,r=c+n-h,i=c+(n+1)-h;u.push(e,t,r),u.push(e,r,i)}}c+=t+1}return{position:a,normal:s,texcoord:l,indices:u}}function Fe(e){return function(t){return pe(t,e.apply(this,Array.prototype.slice.call(arguments,1)))}}function je(e){return function(t){return he(t,e.apply(null,Array.prototype.slice.call(arguments,1)))}}const ze=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function De(e,t,r,n){n=n||0;const i=e.length;for(let o=0;o<i;++o)t[r+o]=e[o]+n}function Ge(e,t){const r=me(e),n=new r.constructor(t);let i=n;var o,a;return r.numComponents&&r.numElements&&_e(n,r.numComponents),e.data&&(i={data:n},o=e,a=i,ze.forEach((function(e){const t=o[e];void 0!==t&&(a[e]=t)}))),i}const He=je(Be),We=Fe(Be),Ze=je(Re),qe=Fe(Re),Ye=je(ke),Xe=Fe(ke),$e=je(Oe),Ke=Fe(Oe),Je=je(Ce),Qe=Fe(Ce),et=je(Me),tt=Fe(Me),rt=je(Ve),nt=Fe(Ve),it=je(Pe),ot=Fe(Pe),at=je(Ue),st=Fe(Ue),lt=je(Ne),ut=Fe(Ne),ct=rt,ft=nt,ht=Ve;var dt=Object.freeze({__proto__:null,create3DFBufferInfo:He,create3DFBuffers:We,create3DFVertices:Be,createAugmentedTypedArray:be,createCubeBufferInfo:Ze,createCubeBuffers:qe,createCubeVertices:Re,createPlaneBufferInfo:Ye,createPlaneBuffers:Xe,createPlaneVertices:ke,createSphereBufferInfo:$e,createSphereBuffers:Ke,createSphereVertices:Oe,createTruncatedConeBufferInfo:Je,createTruncatedConeBuffers:Qe,createTruncatedConeVertices:Ce,createXYQuadBufferInfo:et,createXYQuadBuffers:tt,createXYQuadVertices:Me,createCresentBufferInfo:ct,createCresentBuffers:ft,createCresentVertices:ht,createCrescentBufferInfo:rt,createCrescentBuffers:nt,createCrescentVertices:Ve,createCylinderBufferInfo:it,createCylinderBuffers:ot,createCylinderVertices:Pe,createTorusBufferInfo:at,createTorusBuffers:st,createTorusVertices:Ue,createDiscBufferInfo:lt,createDiscBuffers:ut,createDiscVertices:Ne,deindexVertices:function(e){const t=e.indices,r={},n=t.length;return Object.keys(e).filter(ve).forEach((function(i){const o=e[i],a=o.numComponents,s=be(a,n,o.constructor);for(let e=0;e<n;++e){const r=t[e]*a;for(let e=0;e<a;++e)s.push(o[r+e])}r[i]=s})),r},flattenNormals:function(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal,r=t.length;for(let e=0;e<r;e+=9){const r=t[e+0],n=t[e+1],i=t[e+2],o=t[e+3],a=t[e+4],s=t[e+5];let l=r+o+t[e+6],u=n+a+t[e+7],c=i+s+t[e+8];const f=Math.sqrt(l*l+u*u+c*c);l/=f,u/=f,c/=f,t[e+0]=l,t[e+1]=u,t[e+2]=c,t[e+3]=l,t[e+4]=u,t[e+5]=c,t[e+6]=l,t[e+7]=u,t[e+8]=c}return e},makeRandomVertexColors:function(e,t){t=t||{};const r=e.position.numElements,n=be(4,r,Uint8Array),i=t.rand||function(e,t){return t<3?(256,256*Math.random()|0):255};if(e.color=n,e.indices)for(let e=0;e<r;++e)n.push(i(e,0),i(e,1),i(e,2),i(e,3));else{const e=t.vertsPerColor||3,o=r/e;for(let t=0;t<o;++t){const r=[i(t,0),i(t,1),i(t,2),i(t,3)];for(let t=0;t<e;++t)n.push(r)}}return e},reorientDirections:Ee,reorientNormals:Ae,reorientPositions:Te,reorientVertices:Se,concatVertices:function(e){const t={};let r;for(let n=0;n<e.length;++n){const i=e[n];Object.keys(i).forEach((function(e){t[e]||(t[e]=[]),r||"indices"===e||(r=e);const n=i[e],o=ye(n,e),a=me(n).length/o;t[e].push(a)}))}const n=t[r],i={};return Object.keys(t).forEach((function(t){const r=function(t){let r,n=0;for(let i=0;i<e.length;++i){const o=e[i][t];n+=me(o).length,r&&!o.data||(r=o)}return{length:n,spec:r}}(t),o=Ge(r.spec,r.length);!function(t,r,n){let i=0,o=0;for(let a=0;a<e.length;++a){const s=e[a][t],l=me(s);"indices"===t?(De(l,n,o,i),i+=r[a]):De(l,n,o),o+=l.length}}(t,n,me(o)),i[t]=o})),i},duplicateVertices:function(e){const t={};return Object.keys(e).forEach((function(r){const n=e[r],i=me(n),o=Ge(n,i.length);De(i,me(o),0),t[r]=o})),t}});function pt(e){return!!e.texStorage2D}function gt(e){return!e.texStorage2D}const mt=function(){const e={},t={};return function(r,n){return function(r){const n=r.constructor.name;if(!e[n]){for(const e in r)if("number"==typeof r[e]){const n=t[r[e]];t[r[e]]=n?`${n} | ${e}`:e}e[n]=!0}}(r),t[n]||("number"==typeof n?`0x${n.toString(16)}`:n)}}();var yt=Object.freeze({__proto__:null,glEnumToString:mt,isWebGL1:gt,isWebGL2:pt});const _t={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},bt=L,vt=function(){let e;return function(){return e=e||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),xt=6406,wt=6407,Et=6408,At=6409,Tt=6410,St=6402,Mt=34041,kt=33071,Ot=9728,It=9729,Rt=3553,Ct=34067,Lt=32879,Bt=35866,Vt=34069,Pt=34070,Ut=34071,Nt=34072,Ft=34073,jt=34074,zt=10241,Dt=10240,Gt=10242,Ht=10243,Wt=32882,Zt=33082,qt=33083,Yt=33084,Xt=33085,$t=3317,Kt=3314,Jt=32878,Qt=3316,er=3315,tr=32877,rr=37443,nr=37441,ir=37440,or=33321,ar=36756,sr=33325,lr=33326,ur=33330,cr=33329,fr=33338,hr=33337,dr=33340,pr=33339,gr=33323,mr=36757,yr=33327,_r=33328,br=33336,vr=33335,xr=33332,wr=33331,Er=33334,Ar=33333,Tr=32849,Sr=35905,Mr=36194,kr=36758,Or=35898,Ir=35901,Rr=34843,Cr=34837,Lr=36221,Br=36239,Vr=36215,Pr=36233,Ur=36209,Nr=36227,Fr=32856,jr=35907,zr=36759,Dr=32855,Gr=32854,Hr=32857,Wr=34842,Zr=34836,qr=36220,Yr=36238,Xr=36975,$r=36214,Kr=36232,Jr=36226,Qr=36208,en=33189,tn=33190,rn=36012,nn=36013,on=35056,an=5120,sn=5121,ln=5122,un=5123,cn=5124,fn=5125,hn=5126,dn=32819,pn=32820,gn=33635,mn=5131,yn=36193,_n=33640,bn=35899,vn=35902,xn=36269,wn=34042,En=33319,An=33320,Tn=6403,Sn=36244,Mn=36248,kn=36249,On={};{const e=On;e[xt]={numColorComponents:1},e[At]={numColorComponents:1},e[Tt]={numColorComponents:2},e[wt]={numColorComponents:3},e[Et]={numColorComponents:4},e[Tn]={numColorComponents:1},e[Sn]={numColorComponents:1},e[En]={numColorComponents:2},e[An]={numColorComponents:2},e[wt]={numColorComponents:3},e[Mn]={numColorComponents:3},e[Et]={numColorComponents:4},e[kn]={numColorComponents:4},e[St]={numColorComponents:1},e[Mt]={numColorComponents:2}}let In;function Rn(e){if(!In){const e={};e[xt]={textureFormat:xt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[sn,mn,yn,hn]},e[At]={textureFormat:At,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[sn,mn,yn,hn]},e[Tt]={textureFormat:Tt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[sn,mn,yn,hn]},e[wt]={textureFormat:wt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[sn,mn,yn,hn,gn]},e[Et]={textureFormat:Et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[sn,mn,yn,hn,dn,pn]},e[St]={textureFormat:St,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[fn,un]},e[or]={textureFormat:Tn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[sn]},e[ar]={textureFormat:Tn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[an]},e[sr]={textureFormat:Tn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[hn,mn]},e[lr]={textureFormat:Tn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[hn]},e[ur]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[sn]},e[cr]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[an]},e[xr]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[un]},e[wr]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[ln]},e[Er]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[fn]},e[Ar]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[cn]},e[gr]={textureFormat:En,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[sn]},e[mr]={textureFormat:En,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[an]},e[yr]={textureFormat:En,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[hn,mn]},e[_r]={textureFormat:En,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[hn]},e[br]={textureFormat:An,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[sn]},e[vr]={textureFormat:An,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[an]},e[fr]={textureFormat:An,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[un]},e[hr]={textureFormat:An,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ln]},e[dr]={textureFormat:An,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[fn]},e[pr]={textureFormat:An,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[cn]},e[Tr]={textureFormat:wt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[sn]},e[Sr]={textureFormat:wt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[sn]},e[Mr]={textureFormat:wt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[sn,gn]},e[kr]={textureFormat:wt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[an]},e[Or]={textureFormat:wt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[hn,mn,bn]},e[Ir]={textureFormat:wt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[hn,mn,vn]},e[Rr]={textureFormat:wt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[hn,mn]},e[Cr]={textureFormat:wt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[hn]},e[Lr]={textureFormat:Mn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[sn]},e[Br]={textureFormat:Mn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[an]},e[Vr]={textureFormat:Mn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[un]},e[Pr]={textureFormat:Mn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[ln]},e[Ur]={textureFormat:Mn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[fn]},e[Nr]={textureFormat:Mn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[cn]},e[Fr]={textureFormat:Et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[sn]},e[jr]={textureFormat:Et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[sn]},e[zr]={textureFormat:Et,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[an]},e[Dr]={textureFormat:Et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[sn,pn,_n]},e[Gr]={textureFormat:Et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[sn,dn]},e[Hr]={textureFormat:Et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[_n]},e[Wr]={textureFormat:Et,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[hn,mn]},e[Zr]={textureFormat:Et,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[hn]},e[qr]={textureFormat:kn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[sn]},e[Yr]={textureFormat:kn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[an]},e[Xr]={textureFormat:kn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[_n]},e[$r]={textureFormat:kn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[un]},e[Kr]={textureFormat:kn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[ln]},e[Jr]={textureFormat:kn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[cn]},e[Qr]={textureFormat:kn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[fn]},e[en]={textureFormat:St,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[un,fn]},e[tn]={textureFormat:St,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[fn]},e[rn]={textureFormat:St,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[hn]},e[on]={textureFormat:Mt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[wn]},e[nn]={textureFormat:Mt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[xn]},Object.keys(e).forEach((function(t){const r=e[t];r.bytesPerElementMap={},r.bytesPerElement.forEach((function(e,t){const n=r.type[t];r.bytesPerElementMap[n]=e}))})),In=e}return In[e]}function Cn(e,t){const r=Rn(e);if(!r)throw"unknown internal format";const n=r.bytesPerElementMap[t];if(void 0===n)throw"unknown internal format";return n}function Ln(e){const t=Rn(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function Bn(e){return 0==(e&e-1)}function Vn(e,t,r,n){if(!pt(e))return Bn(t)&&Bn(r);const i=Rn(n);if(!i)throw"unknown internal format";return i.colorRenderable&&i.textureFilterable}function Pn(e){const t=Rn(e);if(!t)throw"unknown internal format";return t.textureFilterable}function Un(e){const t=On[e];if(!t)throw"unknown format: "+e;return t.numColorComponents}function Nn(e,t,r){return bt(t)?I(t):r||sn}function Fn(e,t,r,n,i){if(i%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=i/n)%1)throw"can't guess dimensions"}else if((n=i/r)%1)throw"can't guess dimensions"}else{const e=Math.sqrt(i/(t===Ct?6:1));e%1==0?(r=e,n=e):(r=i,n=1)}return{width:r,height:n}}function jn(e){_t.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function zn(e){V(e,_t),e.textureColor&&jn(e.textureColor)}function Dn(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(rr,t.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(nr,t.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(ir,t.flipY)}function Gn(e){e.pixelStorei($t,4),pt(e)&&(e.pixelStorei(Kt,0),e.pixelStorei(Jt,0),e.pixelStorei(Qt,0),e.pixelStorei(er,0),e.pixelStorei(tr,0))}function Hn(e,t,r,n){n.minMag&&(r.call(e,t,zt,n.minMag),r.call(e,t,Dt,n.minMag)),n.min&&r.call(e,t,zt,n.min),n.mag&&r.call(e,t,Dt,n.mag),n.wrap&&(r.call(e,t,Gt,n.wrap),r.call(e,t,Ht,n.wrap),(t===Lt||"undefined"!=typeof WebGLSampler&&t instanceof WebGLSampler)&&r.call(e,t,Wt,n.wrap)),n.wrapR&&r.call(e,t,Wt,n.wrapR),n.wrapS&&r.call(e,t,Gt,n.wrapS),n.wrapT&&r.call(e,t,Ht,n.wrapT),n.minLod&&r.call(e,t,Zt,n.minLod),n.maxLod&&r.call(e,t,qt,n.maxLod),n.baseLevel&&r.call(e,t,Yt,n.baseLevel),n.maxLevel&&r.call(e,t,Xt,n.maxLevel)}function Wn(e,t,r){const n=r.target||Rt;e.bindTexture(n,t),Hn(e,n,e.texParameteri,r)}function Zn(e,t,r){Hn(e,t,e.samplerParameteri,r)}function qn(e,t){const r=e.createSampler();return Zn(e,r,t),r}function Yn(e,t){const r={};return Object.keys(t).forEach((function(n){r[n]=qn(e,t[n])})),r}function Xn(e,t,r,n,i,o){r=r||_t.textureOptions,o=o||Et;const a=r.target||Rt;if(n=n||r.width,i=i||r.height,e.bindTexture(a,t),Vn(e,n,i,o))e.generateMipmap(a);else{const t=Pn(o)?It:Ot;e.texParameteri(a,zt,t),e.texParameteri(a,Dt,t),e.texParameteri(a,Gt,kt),e.texParameteri(a,Ht,kt)}}function $n(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function Kn(e,t){return(t=t||{}).cubeFaceOrder||[Vt,Pt,Ut,Nt,Ft,jt]}function Jn(e,t){const r=Kn(0,t).map((function(e,t){return{face:e,ndx:t}}));return r.sort((function(e,t){return e.face-t.face})),r}function Qn(e,t,r,n){const i=(n=n||_t.textureOptions).target||Rt,o=n.level||0;let a=r.width,s=r.height;const l=n.internalFormat||n.format||Et,u=Ln(l),c=n.format||u.format,f=n.type||u.type;if(Dn(e,n),e.bindTexture(i,t),i===Ct){const u=r.width,h=r.height;let d,p;if(u/6===h)d=h,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(h/6===u)d=u,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(u/3==h/2)d=u/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(u/2!=h/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);d=u/2,p=[0,0,1,0,0,1,1,1,0,2,1,2]}const g=vt();g?(g.canvas.width=d,g.canvas.height=d,a=d,s=d,Jn(0,n).forEach((function(t){const n=p[2*t.ndx+0]*d,i=p[2*t.ndx+1]*d;g.drawImage(r,n,i,d,d,0,0,d,d),e.texImage2D(t.face,o,l,c,f,g.canvas)})),g.canvas.width=1,g.canvas.height=1):"undefined"!=typeof createImageBitmap&&(a=d,s=d,Jn(0,n).forEach((function(u){const h=p[2*u.ndx+0]*d,g=p[2*u.ndx+1]*d;e.texImage2D(u.face,o,l,d,d,0,c,f,null),createImageBitmap(r,h,g,d,d,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(r){Dn(e,n),e.bindTexture(i,t),e.texImage2D(u.face,o,l,c,f,r),$n(n)&&Xn(e,t,n,a,s,l)}))})))}else if(i===Lt||i===Bt){const t=Math.min(r.width,r.height),n=Math.max(r.width,r.height),a=n/t;if(a%1!=0)throw"can not compute 3D dimensions of element";const s=r.width===n?1:0,u=r.height===n?1:0;e.pixelStorei($t,1),e.pixelStorei(Kt,r.width),e.pixelStorei(Jt,0),e.pixelStorei(tr,0),e.texImage3D(i,o,l,t,t,t,0,c,f,null);for(let n=0;n<a;++n){const a=n*t*s,l=n*t*u;e.pixelStorei(Qt,a),e.pixelStorei(er,l),e.texSubImage3D(i,o,0,0,n,t,t,1,c,f,r)}Gn(e)}else e.texImage2D(i,o,l,c,f,r);$n(n)&&Xn(e,t,n,a,s,l),Wn(e,t,n)}function ei(){}function ti(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function ri(e,t,r){return ti(e)?(setTimeout((function(){r(null,e)})),e):function(e,t,r){let n;if(r=r||ei,t=void 0!==t?t:_t.crossOrigin,t=function(e,t){return void 0!==t||function(e){if("undefined"!=typeof document){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}(e)?t:"anonymous"}(e,t),"undefined"!=typeof Image){n=new Image,void 0!==t&&(n.crossOrigin=t);const i=function(){n.removeEventListener("error",o),n.removeEventListener("load",a),n=null},o=function(){const t="couldn't load image: "+e;P(t),r(t,n),i()},a=function(){r(null,n),i()};return n.addEventListener("error",o),n.addEventListener("load",a),n.src=e,n}if("undefined"!=typeof ImageBitmap){let i,o;const a=function(){r(i,o)},s={};t&&(s.mode="cors"),fetch(e,s).then((function(e){if(!e.ok)throw e;return e.blob()})).then((function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(e){o=e,setTimeout(a)})).catch((function(e){i=e,setTimeout(a)})),n=null}return n}(e,t,r)}function ni(e,t,r){const n=(r=r||_t.textureOptions).target||Rt;if(e.bindTexture(n,t),!1===r.color)return;const i=function(e){return e=e||_t.textureColor,bt(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(r.color);if(n===Ct)for(let t=0;t<6;++t)e.texImage2D(Vt+t,0,Et,1,1,0,Et,sn,i);else n===Lt||n===Bt?e.texImage3D(n,0,Et,1,1,1,0,Et,sn,i):e.texImage2D(n,0,Et,1,1,0,Et,sn,i)}function ii(e,t,r,n){return n=n||ei,r=r||_t.textureOptions,ni(e,t,r),ri((r=Object.assign({},r)).src,r.crossOrigin,(function(i,o){i?n(i,t,o):(Qn(e,t,o,r),n(null,t,o))}))}function oi(e,t,r,n){const i=(n=n||_t.textureOptions).target||Rt;e.bindTexture(i,t);let o=n.width,a=n.height,s=n.depth;const l=n.level||0,u=n.internalFormat||n.format||Et,c=Ln(u),f=n.format||c.format,h=n.type||Nn(0,r,c.type);if(bt(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{const e=C(h);r=new e(r)}const d=Cn(u,h),p=r.byteLength/d;if(p%1)throw"length wrong size for format: "+mt(e,f);let g;if(i===Lt||i===Bt)if(o||a||s)!o||a&&s?!a||o&&s?(g=Fn(0,i,o,a,p/s),o=g.width,a=g.height):(g=Fn(0,i,o,s,p/a),o=g.width,s=g.height):(g=Fn(0,i,a,s,p/o),a=g.width,s=g.height);else{const e=Math.cbrt(p);if(e%1!=0)throw"can't guess cube size of array of numElements: "+p;o=e,a=e,s=e}else g=Fn(0,i,o,a,p),o=g.width,a=g.height;if(Gn(e),e.pixelStorei($t,n.unpackAlignment||1),Dn(e,n),i===Ct){const t=p/6*(d/r.BYTES_PER_ELEMENT);Jn(0,n).forEach((n=>{const i=t*n.ndx,s=r.subarray(i,i+t);e.texImage2D(n.face,l,u,o,a,0,f,h,s)}))}else i===Lt||i===Bt?e.texImage3D(i,l,u,o,a,s,0,f,h,r):e.texImage2D(i,l,u,o,a,0,f,h,r);return{width:o,height:a,depth:s,type:h}}function ai(e,t,r){const n=r.target||Rt;e.bindTexture(n,t);const i=r.level||0,o=r.internalFormat||r.format||Et,a=Ln(o),s=r.format||a.format,l=r.type||a.type;if(Dn(e,r),n===Ct)for(let t=0;t<6;++t)e.texImage2D(Vt+t,i,o,r.width,r.height,0,s,l,null);else n===Lt||n===Bt?e.texImage3D(n,i,o,r.width,r.height,r.depth,0,s,l,null):e.texImage2D(n,i,o,r.width,r.height,0,s,l,null)}function si(e,t,r){r=r||ei,t=t||_t.textureOptions;const n=e.createTexture(),i=t.target||Rt;let o=t.width||1,a=t.height||1;const s=t.internalFormat||Et;e.bindTexture(i,n),i===Ct&&(e.texParameteri(i,Gt,kt),e.texParameteri(i,Ht,kt));let l=t.src;if(l)if("function"==typeof l&&(l=l(e,t)),"string"==typeof l)ii(e,n,t,r);else if(bt(l)||Array.isArray(l)&&("number"==typeof l[0]||Array.isArray(l[0])||bt(l[0]))){const r=oi(e,n,l,t);o=r.width,a=r.height}else Array.isArray(l)&&("string"==typeof l[0]||ti(l[0]))?i===Ct?function(e,t,r,n){n=n||ei;const i=r.src;if(6!==i.length)throw"there must be 6 urls for a cubemap";const o=r.level||0,a=r.internalFormat||r.format||Et,s=Ln(a),l=r.format||s.format,u=r.type||sn,c=r.target||Rt;if(c!==Ct)throw"target must be TEXTURE_CUBE_MAP";ni(e,t,r),r=Object.assign({},r);let f=6;const h=[],d=Kn(0,r);let p;p=i.map((function(i,s){return ri(i,r.crossOrigin,(g=d[s],function(i,s){--f,i?h.push(i):s.width!==s.height?h.push("cubemap face img is not a square: "+s.src):(Dn(e,r),e.bindTexture(c,t),5===f?Kn().forEach((function(t){e.texImage2D(t,o,a,l,u,s)})):e.texImage2D(g,o,a,l,u,s),$n(r)&&e.generateMipmap(c)),0===f&&n(h.length?h:void 0,t,p)}));var g}))}(e,n,t,r):function(e,t,r,n){n=n||ei;const i=r.src,o=r.internalFormat||r.format||Et,a=Ln(o),s=r.format||a.format,l=r.type||sn,u=r.target||Bt;if(u!==Lt&&u!==Bt)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";ni(e,t,r),r=Object.assign({},r);let c=i.length;const f=[];let h;const d=r.level||0;let p=r.width,g=r.height;const m=i.length;let y=!0;h=i.map((function(i,a){return ri(i,r.crossOrigin,(_=a,function(i,a){if(--c,i)f.push(i);else{if(Dn(e,r),e.bindTexture(u,t),y){y=!1,p=r.width||a.width,g=r.height||a.height,e.texImage3D(u,d,o,p,g,m,0,s,l,null);for(let t=0;t<m;++t)e.texSubImage3D(u,d,0,0,t,p,g,1,s,l,a)}else{let t,r=a;a.width===p&&a.height===g||(t=vt(),r=t.canvas,t.canvas.width=p,t.canvas.height=g,t.drawImage(a,0,0,p,g)),e.texSubImage3D(u,d,0,0,_,p,g,1,s,l,r),t&&r===t.canvas&&(t.canvas.width=0,t.canvas.height=0)}$n(r)&&e.generateMipmap(u)}0===c&&n(f.length?f:void 0,t,h)}));var _}))}(e,n,t,r):(Qn(e,n,l,t),o=l.width,a=l.height);else ai(e,n,t);return $n(t)&&Xn(e,n,t,o,a,s),Wn(e,n,t),n}function li(e,t,r,n,i,o){n=n||r.width,i=i||r.height,o=o||r.depth;const a=r.target||Rt;e.bindTexture(a,t);const s=r.level||0,l=r.internalFormat||r.format||Et,u=Ln(l),c=r.format||u.format;let f;const h=r.src;if(f=h&&(bt(h)||Array.isArray(h)&&"number"==typeof h[0])?r.type||Nn(0,h,u.type):r.type||u.type,a===Ct)for(let t=0;t<6;++t)e.texImage2D(Vt+t,s,l,n,i,0,c,f,null);else a===Lt||a===Bt?e.texImage3D(a,s,l,n,i,o,0,c,f,null):e.texImage2D(a,s,l,n,i,0,c,f,null)}function ui(e,t,r){r=r||ei;let n=0;const i=[],o={},a={};function s(){0===n&&setTimeout((function(){r(i.length?i:void 0,o,a)}),0)}return Object.keys(t).forEach((function(r){const l=t[r];let u;var c;("string"==typeof(c=l.src)||Array.isArray(c)&&"string"==typeof c[0])&&(u=function(e,t,o){a[r]=o,--n,e&&i.push(e),s()},++n),o[r]=si(e,l,u)})),s(),o}var ci=Object.freeze({__proto__:null,setTextureDefaults_:zn,createSampler:qn,createSamplers:Yn,setSamplerParameters:Zn,createTexture:si,setEmptyTexture:ai,setTextureFromArray:oi,loadTextureFromUrl:ii,setTextureFromElement:Qn,setTextureFilteringForSize:Xn,setTextureParameters:Wn,setDefaultTextureColor:jn,createTextures:ui,resizeTexture:li,canGenerateMipmap:Vn,canFilter:Pn,getNumComponentsForFormat:Un,getBytesPerElementForInternalFormat:Cn,getFormatAndTypeForInternalFormat:Ln});const fi=P,hi=U;function di(e){return"undefined"!=typeof document&&document.getElementById?document.getElementById(e):null}const pi=33984,gi=35048,mi=34962,yi=34963,_i=35345,bi=35982,vi=36386,xi=35713,wi=35714,Ei=35632,Ai=35633,Ti=35981,Si=35718,Mi=35721,ki=35971,Oi=35382,Ii=35396,Ri=35398,Ci=35392,Li=35395,Bi=5126,Vi=5124,Pi=5125,Ui=3553,Ni=34067,Fi=32879,ji=35866,zi={};function Di(e,t){return zi[t].bindPoint}function Gi(e,t){return function(r){e.uniform1i(t,r)}}function Hi(e,t){return function(r){e.uniform1iv(t,r)}}function Wi(e,t){return function(r){e.uniform2iv(t,r)}}function Zi(e,t){return function(r){e.uniform3iv(t,r)}}function qi(e,t){return function(r){e.uniform4iv(t,r)}}function Yi(e,t,r,n){const i=Di(0,t);return pt(e)?function(t){let o,a;F(0,t)?(o=t,a=null):(o=t.texture,a=t.sampler),e.uniform1i(n,r),e.activeTexture(pi+r),e.bindTexture(i,o),e.bindSampler(r,a)}:function(t){e.uniform1i(n,r),e.activeTexture(pi+r),e.bindTexture(i,t)}}function Xi(e,t,r,n,i){const o=Di(0,t),a=new Int32Array(i);for(let e=0;e<i;++e)a[e]=r+e;return pt(e)?function(t){e.uniform1iv(n,a),t.forEach((function(t,n){let i,s;e.activeTexture(pi+a[n]),F(0,t)?(i=t,s=null):(i=t.texture,s=t.sampler),e.bindSampler(r,s),e.bindTexture(o,i)}))}:function(t){e.uniform1iv(n,a),t.forEach((function(t,r){e.activeTexture(pi+a[r]),e.bindTexture(o,t)}))}}function $i(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(mi,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||Bi,r.normalize||!1,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function Ki(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an integer constant value must be 4!");e.vertexAttrib4iv(t,r.value)}else e.bindBuffer(mi,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||Vi,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function Ji(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");e.vertexAttrib4uiv(t,r.value)}else e.bindBuffer(mi,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||Pi,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function Qi(e,t,r){const n=r.size,i=r.count;return function(r){e.bindBuffer(mi,r.buffer);const o=r.size||r.numComponents||n,a=o/i,s=r.type||Bi,l=zi[s].size*o,u=r.normalize||!1,c=r.offset||0,f=l/i;for(let n=0;n<i;++n)e.enableVertexAttribArray(t+n),e.vertexAttribPointer(t+n,a,s,u,l,c+f*n),void 0!==r.divisor&&e.vertexAttribDivisor(t+n,r.divisor)}}zi[Bi]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},zi[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}},cols:2},zi[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}},cols:3},zi[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}},cols:4},zi[Vi]={Type:Int32Array,size:4,setter:Gi,arraySetter:Hi},zi[35667]={Type:Int32Array,size:8,setter:Wi,cols:2},zi[35668]={Type:Int32Array,size:12,setter:Zi,cols:3},zi[35669]={Type:Int32Array,size:16,setter:qi,cols:4},zi[Pi]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},zi[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}},cols:2},zi[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}},cols:3},zi[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}},cols:4},zi[35670]={Type:Uint32Array,size:4,setter:Gi,arraySetter:Hi},zi[35671]={Type:Uint32Array,size:8,setter:Wi,cols:2},zi[35672]={Type:Uint32Array,size:12,setter:Zi,cols:3},zi[35673]={Type:Uint32Array,size:16,setter:qi,cols:4},zi[35674]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}},rows:2,cols:2},zi[35675]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}},rows:3,cols:3},zi[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}},rows:4,cols:4},zi[35685]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}},rows:2,cols:3},zi[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}},rows:2,cols:4},zi[35687]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}},rows:3,cols:2},zi[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}},rows:3,cols:4},zi[35689]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}},rows:4,cols:2},zi[35690]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}},rows:4,cols:3},zi[35678]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:Ui},zi[35680]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:Ni},zi[35679]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:Fi},zi[35682]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:Ui},zi[36289]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:ji},zi[36292]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:ji},zi[36293]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:Ni},zi[36298]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:Ui},zi[36299]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:Fi},zi[36300]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:Ni},zi[36303]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:ji},zi[36306]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:Ui},zi[36307]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:Fi},zi[36308]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:Ni},zi[36311]={Type:null,size:0,setter:Yi,arraySetter:Xi,bindPoint:ji};const eo={};eo[Bi]={size:4,setter:$i},eo[35664]={size:8,setter:$i},eo[35665]={size:12,setter:$i},eo[35666]={size:16,setter:$i},eo[Vi]={size:4,setter:Ki},eo[35667]={size:8,setter:Ki},eo[35668]={size:12,setter:Ki},eo[35669]={size:16,setter:Ki},eo[Pi]={size:4,setter:Ji},eo[36294]={size:8,setter:Ji},eo[36295]={size:12,setter:Ji},eo[36296]={size:16,setter:Ji},eo[35670]={size:4,setter:Ki},eo[35671]={size:8,setter:Ki},eo[35672]={size:12,setter:Ki},eo[35673]={size:16,setter:Ki},eo[35674]={size:4,setter:Qi,count:2},eo[35675]={size:9,setter:Qi,count:3},eo[35676]={size:16,setter:Qi,count:4};const to=/ERROR:\s*\d+:(\d+)/gi,ro=/^[ \t]*\n/;function no(e){let t=0;return ro.test(e)&&(t=1,e=e.replace(ro,"")),{lineOffset:t,shaderSource:e}}function io(e,t){return e.errorCallback(t),e.callback&&setTimeout((()=>{e.callback(`${t}\n${e.errors.join("\n")}`)})),null}function oo(e,t,r,n){const i=e.createShader(r);return e.shaderSource(i,no(t).shaderSource),e.compileShader(i),n.callback||function(e,t,r,n){n=n||fi;const i=e.getShaderParameter(r,xi);if(!i){const i=e.getShaderInfoLog(r),{lineOffset:o,shaderSource:a}=no(e.getShaderSource(r));n(`${function(e,t="",r=0){const n=[...t.matchAll(to)],i=new Map(n.map(((e,r)=>{const i=parseInt(e[1]),o=n[r+1],a=o?o.index:t.length;return[i-1,t.substring(e.index,a)]})));return e.split("\n").map(((e,t)=>{const n=i.get(t);return`${t+1+r}: ${e}${n?`\n\n^^^ ${n}`:""}`})).join("\n")}(a,i,o)}\nError compiling ${mt(e,t)}: ${i}`)}return i}(e,r,i,n.errorCallback)?i:(e.deleteShader(i),null)}function ao(e,t,r){let n,i,o;if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e)r=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback&&e.errors)return e;const t=e;r=t.errorCallback,e=t.attribLocations,n=t.transformFeedbackVaryings,i=t.transformFeedbackMode,o=t.callback}const a=r||fi,s=[],l={errorCallback(e,...t){s.push(e),a(e,...t)},transformFeedbackVaryings:n,transformFeedbackMode:i,callback:o,errors:s};if(e){let r={};Array.isArray(e)?e.forEach((function(e,n){r[e]=t?t[n]:n})):r=e,l.attribLocations=r}return l}const so=["VERTEX_SHADER","FRAGMENT_SHADER"];function lo(e,t){return t.indexOf("frag")>=0?Ei:t.indexOf("vert")>=0?Ai:void 0}function uo(e,t){t.forEach((function(t){e.deleteShader(t)}))}const co=(e=0)=>new Promise((t=>setTimeout(t,e)));function fo(e,t,r,n,i){const o=ao(r,n,i),a=[],s=[];for(let r=0;r<t.length;++r){let n=t[r];if("string"==typeof n){const t=di(n),i=t?t.text:n;let a=e[so[r]];t&&t.type&&(a=lo(0,t.type)||a),n=oo(e,i,a,o),s.push(n)}"undefined"!=typeof WebGLShader&&n instanceof WebGLShader&&a.push(n)}if(a.length!==t.length)return uo(e,s),io(o,"not enough shaders for program");const l=e.createProgram();a.forEach((function(t){e.attachShader(l,t)})),o.attribLocations&&Object.keys(o.attribLocations).forEach((function(t){e.bindAttribLocation(l,o.attribLocations[t],t)}));let u=o.transformFeedbackVaryings;return u&&(u.attribs&&(u=u.attribs),Array.isArray(u)||(u=Object.keys(u)),e.transformFeedbackVaryings(l,u,o.transformFeedbackMode||Ti)),e.linkProgram(l),o.callback?(async function(e,t,r){const n=e.getExtension("KHR_parallel_shader_compile"),i=n?(e,t)=>e.getProgramParameter(t,n.COMPLETION_STATUS_KHR):()=>!0;let o=0;do{await co(o),o=1e3/60}while(!i(e,t));const a=go(e,t,r.errorCallback),s=a?void 0:r.errors.join("\n");a||((r.errorCallback||fi)(s),e.deleteProgram(t),t=null),r.callback(s,t)}(e,l,o),null):go(e,l,o.errorCallback)?l:(e.deleteProgram(l),uo(e,s),null)}function ho(e,t,...r){return new Promise(((n,i)=>{const o=ao(...r);o.callback=(e,t)=>{e?i(e):n(t)},fo(e,t,o)}))}function po(e,t,...r){return new Promise(((n,i)=>{const o=ao(...r);o.callback=(e,t)=>{e?i(e):n(t)},Go(e,t,o)}))}function go(e,t,r){r=r||fi;const n=e.getProgramParameter(t,wi);return n||r(`Error in program linking: ${e.getProgramInfoLog(t)}`),n}function mo(e,t,r,n){let i="";const o=di(t);if(!o)return io(n,`unknown script element: ${t}`);i=o.text;const a=r||lo(0,o.type);return a?oo(e,i,a,n):io(n,"unknown shader type")}function yo(e,t,r,n,i){const o=ao(r,n,i),a=[];for(let r=0;r<t.length;++r){const n=mo(e,t[r],e[so[r]],o);if(!n)return null;a.push(n)}return fo(e,a,o)}function _o(e,t,r,n,i){const o=ao(r,n,i),a=[];for(let r=0;r<t.length;++r){const n=oo(e,t[r],e[so[r]],o);if(!o.callback&&!n)return null;a.push(n)}return fo(e,a,o)}function bo(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const vo=/(\.|\[|]|\w+)/g,xo=e=>e>="0"&&e<="9";function wo(e,t,r,n){const i=e.split(vo).filter((e=>""!==e));let o=0,a="";for(;;){const e=i[o++];a+=e;const s=xo(e[0]),l=s?parseInt(e):e;if(s&&(a+=i[o++]),o===i.length){r[l]=t;break}{const e=i[o++],t="["===e,s=r[l]||(t?[]:{});r[l]=s,r=s,n[a]=n[a]||function(e){return function(t){Vo(e,t)}}(s),a+=e}}}function Eo(e,t){let r=0;function n(t,n,i){const o=n.name.endsWith("[0]"),a=n.type,s=zi[a];if(!s)throw new Error(`unknown type: 0x${a.toString(16)}`);let l;if(s.bindPoint){const t=r;r+=n.size,l=o?s.arraySetter(e,a,t,i,n.size):s.setter(e,a,t,i,n.size)}else l=s.arraySetter&&o?s.arraySetter(e,i):s.setter(e,i);return l.location=i,l}const i={},o={},a=e.getProgramParameter(t,Si);for(let r=0;r<a;++r){const a=e.getActiveUniform(t,r);if(bo(a))continue;let s=a.name;s.endsWith("[0]")&&(s=s.substr(0,s.length-3));const l=e.getUniformLocation(t,a.name);if(l){const e=n(0,a,l);i[s]=e,wo(s,e,o,i)}}return i}function Ao(e,t){const r={},n=e.getProgramParameter(t,ki);for(let i=0;i<n;++i){const n=e.getTransformFeedbackVarying(t,i);r[n.name]={index:i,type:n.type,size:n.size}}return r}function To(e,t,r){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs);for(const n in r){const i=t[n];if(i){const t=r[n];t.offset?e.bindBufferRange(bi,i.index,t.buffer,t.offset,t.size):e.bindBufferBase(bi,i.index,t.buffer)}}}function So(e,t,r){const n=e.createTransformFeedback();return e.bindTransformFeedback(vi,n),e.useProgram(t.program),To(e,t,r),e.bindTransformFeedback(vi,null),n}function Mo(e,t){const r=e.getProgramParameter(t,Si),n=[],i=[];for(let o=0;o<r;++o){i.push(o),n.push({});const r=e.getActiveUniform(t,o);n[o].name=r.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(r){const o=r[0],a=r[1];e.getActiveUniforms(t,i,e[o]).forEach((function(e,t){n[t][a]=e}))}));const o={},a=e.getProgramParameter(t,Oi);for(let r=0;r<a;++r){const n=e.getActiveUniformBlockName(t,r),i={index:e.getUniformBlockIndex(t,n),usedByVertexShader:e.getActiveUniformBlockParameter(t,r,Ii),usedByFragmentShader:e.getActiveUniformBlockParameter(t,r,Ri),size:e.getActiveUniformBlockParameter(t,r,Ci),uniformIndices:e.getActiveUniformBlockParameter(t,r,Li)};i.used=i.usedByVertexShader||i.usedByFragmentShader,o[n]=i}return{blockSpecs:o,uniformData:n}}const ko=/\[\d+\]\.$/,Oo=(e,t)=>((e+(t-1))/t|0)*t;function Io(e,t,r,n){const i=r.blockSpecs,o=r.uniformData,a=i[n];if(!a)return hi("no uniform block object named:",n),{name:n,uniforms:{}};const s=new ArrayBuffer(a.size),l=e.createBuffer(),u=a.index;e.bindBuffer(_i,l),e.uniformBlockBinding(t,a.index,u);let c=n+".";ko.test(c)&&(c=c.replace(ko,"."));const f={},h={},d={};return a.uniformIndices.forEach((function(e){const t=o[e];let r=t.name;r.startsWith(c)&&(r=r.substr(c.length));const n=r.endsWith("[0]");n&&(r=r.substr(0,r.length-3));const i=zi[t.type],a=i.Type,l=n?Oo(i.size,16)*t.size:i.size*t.size,u=new a(s,t.offset,l/a.BYTES_PER_ELEMENT);f[r]=u;const p=function(e,t,r,n){if(t||r){n=n||1;const t=e.length/4;return function(r){let i=0,o=0;for(let a=0;a<t;++a){for(let t=0;t<n;++t)e[i++]=r[o++];i+=4-n}}}return function(t){t.length?e.set(t):e[0]=t}}(u,n,i.rows,i.cols);h[r]=p,wo(r,p,d,h)})),{name:n,array:s,asFloat:new Float32Array(s),buffer:l,uniforms:f,setters:h}}function Ro(e,t,r){return Io(e,t.program,t.uniformBlockSpec,r)}function Co(e,t,r){const n=(t.uniformBlockSpec||t).blockSpecs[r.name];if(n){const t=n.index;return e.bindBufferRange(_i,t,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function Lo(e,t,r){Co(e,t,r)&&e.bufferData(_i,r.array,gi)}function Bo(e,t){const r=e.setters;for(const e in t){const n=r[e];n&&n(t[e])}}function Vo(e,t){for(const r in t){const n=e[r];"function"==typeof n?n(t[r]):Vo(e[r],t[r])}}function Po(e,...t){const r=e.uniformSetters||e,n=t.length;for(let e=0;e<n;++e){const n=t[e];if(Array.isArray(n)){const e=n.length;for(let t=0;t<e;++t)Po(r,n[t])}else for(const e in n){const t=r[e];t&&t(n[e])}}}const Uo=Po;function No(e,t){const r={},n=e.getProgramParameter(t,Mi);for(let i=0;i<n;++i){const n=e.getActiveAttrib(t,i);if(bo(n))continue;const o=e.getAttribLocation(t,n.name),a=eo[n.type],s=a.setter(e,o,a);s.location=o,r[n.name]=s}return r}function Fo(e,t){for(const r in t){const n=e[r];n&&n(t[r])}}function jo(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(Fo(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(yi,r.indices))}function zo(e,t){const r={program:t,uniformSetters:Eo(e,t),attribSetters:No(e,t)};return pt(e)&&(r.uniformBlockSpec=Mo(e,t),r.transformFeedbackInfo=Ao(e,t)),r}const Do=/\s|{|}|;/;function Go(e,t,r,n,i){const o=ao(r,n,i),a=[];if(t=t.map((function(e){if(!Do.test(e)){const t=di(e);if(t)e=t.text;else{const t=`no element with id: ${e}`;o.errorCallback(t),a.push(t)}}return e})),a.length)return io(o,"");const s=o.callback;s&&(o.callback=(t,r)=>{let n;t||(n=zo(e,r)),s(t,n)});const l=_o(e,t,o);return l?zo(e,l):null}var Ho=Object.freeze({__proto__:null,createAttributeSetters:No,createProgram:fo,createProgramAsync:ho,createProgramFromScripts:yo,createProgramFromSources:_o,createProgramInfo:Go,createProgramInfoAsync:po,createProgramInfoFromProgram:zo,createUniformSetters:Eo,createUniformBlockSpecFromProgram:Mo,createUniformBlockInfoFromProgram:Io,createUniformBlockInfo:Ro,createTransformFeedback:So,createTransformFeedbackInfo:Ao,bindTransformFeedbackInfo:To,setAttributes:Fo,setBuffersAndAttributes:jo,setUniforms:Po,setUniformsAndBindTextures:Uo,setUniformBlock:Lo,setBlockUniforms:Bo,bindUniformBlock:Co});const Wo=4,Zo=5123;function qo(e,t,r,n,i,o){r=void 0===r?Wo:r;const a=t.indices,s=t.elementType,l=void 0===n?t.numElements:n;i=void 0===i?0:i,s||a?void 0!==o?e.drawElementsInstanced(r,l,void 0===s?Zo:t.elementType,i,o):e.drawElements(r,l,void 0===s?Zo:t.elementType,i):void 0!==o?e.drawArraysInstanced(r,i,l,o):e.drawArrays(r,i,l)}function Yo(e,t){let r=null,n=null;t.forEach((function(t){if(!1===t.active)return;const i=t.programInfo,o=t.vertexArrayInfo||t.bufferInfo;let a=!1;const s=void 0===t.type?Wo:t.type;i!==r&&(r=i,e.useProgram(i.program),a=!0),(a||o!==n)&&(n&&n.vertexArrayObject&&!o.vertexArrayObject&&e.bindVertexArray(null),n=o,jo(e,i,o)),Po(i,t.uniforms),qo(e,o,s,t.count,t.offset,t.instanceCount)})),n&&n.vertexArrayObject&&e.bindVertexArray(null)}var Xo=Object.freeze({__proto__:null,drawBufferInfo:qo,drawObjectList:Yo});const $o=36160,Ko=36161,Jo=3553,Qo=36064,ea=36096,ta=33306,ra=33071,na=9729,ia=[{format:6408,type:5121,min:na,wrap:ra},{format:34041}],oa={};oa[34041]=ta,oa[6401]=36128,oa[36168]=36128,oa[6402]=ea,oa[33189]=ea,oa[33190]=ea,oa[36012]=ea,oa[35056]=ta,oa[36013]=ta;const aa={32854:!0,32855:!0,36194:!0,34041:!0,33189:!0,6401:!0,36168:!0},sa=32;function la(e,t,r,n){const i=$o,o=e.createFramebuffer();e.bindFramebuffer(i,o),r=r||e.drawingBufferWidth,n=n||e.drawingBufferHeight;const a=[],s={framebuffer:o,attachments:[],width:r,height:n};return(t=t||ia).forEach((function(t,o){let l=t.attachment;const u=t.samples,c=t.format;let f=t.attachmentPoint||function(e,t){return oa[e]||oa[t]}(c,t.internalFormat);if(f||(f=Qo+o),function(e){return e>=Qo&&e<Qo+sa}(f)&&a.push(f),!l)if(void 0!==u||function(e){return aa[e]}(c))l=e.createRenderbuffer(),e.bindRenderbuffer(Ko,l),u>1?e.renderbufferStorageMultisample(Ko,u,c,r,n):e.renderbufferStorage(Ko,c,r,n);else{const i=Object.assign({},t);i.width=r,i.height=n,void 0===i.auto&&(i.auto=!1,i.min=i.min||i.minMag||na,i.mag=i.mag||i.minMag||na,i.wrapS=i.wrapS||i.wrap||ra,i.wrapT=i.wrapT||i.wrap||ra),l=si(e,i)}if(N(0,l))e.framebufferRenderbuffer(i,f,Ko,l);else{if(!F(0,l))throw new Error("unknown attachment type");void 0!==t.layer?e.framebufferTextureLayer(i,f,l,t.level||0,t.layer):e.framebufferTexture2D(i,f,t.target||Jo,l,t.level||0)}s.attachments.push(l)})),e.drawBuffers&&e.drawBuffers(a),s}function ua(e,t,r,n,i){n=n||e.drawingBufferWidth,i=i||e.drawingBufferHeight,t.width=n,t.height=i,(r=r||ia).forEach((function(r,o){const a=t.attachments[o],s=r.format,l=r.samples;if(void 0!==l||N(0,a))e.bindRenderbuffer(Ko,a),l>1?e.renderbufferStorageMultisample(Ko,l,s,n,i):e.renderbufferStorage(Ko,s,n,i);else{if(!F(0,a))throw new Error("unknown attachment type");li(e,a,r,n,i)}}))}function ca(e,t,r){r=r||$o,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}var fa=Object.freeze({__proto__:null,bindFramebufferInfo:ca,createFramebufferInfo:la,resizeFramebufferInfo:ua});const ha=34963;function da(e,t,r){const n=e.createVertexArray();return e.bindVertexArray(n),t.length||(t=[t]),t.forEach((function(t){jo(e,t,r)})),e.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:n}}function pa(e,t,r,n){const i=e.createVertexArray();return e.bindVertexArray(i),Fo(t,r),n&&e.bindBuffer(ha,n),e.bindVertexArray(null),i}function ga(e,t,r){return pa(e,t.attribSetters||t,r.attribs,r.indices)}var ma=Object.freeze({__proto__:null,createVertexArrayInfo:da,createVAOAndSetAttributes:pa,createVAOFromBufferInfo:ga});const ya={addExtensionsToContext:!0};function _a(e){V(e,ya),Q(e),zn(e)}const ba=/^(.*?)_/;function va(e,t){mt(e,0);const r=e.getExtension(t);if(r){const n={},i=ba.exec(t)[1],o="_"+i;for(const t in r){const a=r[t],s="function"==typeof a,l=s?i:o;let u=t;t.endsWith(l)&&(u=t.substring(0,t.length-l.length)),void 0!==e[u]?s||e[u]===a||U(u,e[u],a,t):s?e[u]=function(e){return function(){return e.apply(r,arguments)}}(a):(e[u]=a,n[u]=a)}n.constructor={name:r.constructor.name},mt(n,0)}return r}const xa=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function wa(e){for(let t=0;t<xa.length;++t)va(e,xa[t])}function Ea(e,t){const r=function(e,t){const r=["webgl","experimental-webgl"];let n=null;for(let i=0;i<r.length;++i)if(n=e.getContext(r[i],t),n){ya.addExtensionsToContext&&wa(n);break}return n}(e,t);return r}function Aa(e,t){const r=function(e,t){const r=["webgl2","webgl","experimental-webgl"];let n=null;for(let i=0;i<r.length;++i)if(n=e.getContext(r[i],t),n){ya.addExtensionsToContext&&wa(n);break}return n}(e,t);return r}function Ta(e,t){t=t||1,t=Math.max(0,t);const r=e.clientWidth*t|0,n=e.clientHeight*t|0;return(e.width!==r||e.height!==n)&&(e.width=r,e.height=n,!0)}},4927:(e,t,r)=>{var n=r(5108);function i(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(i("noDeprecation"))return e;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?n.trace(t):n.warn(t),r=!0}return e.apply(this,arguments)}}},384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},5955:(e,t,r)=>{"use strict";var n=r(2584),i=r(8662),o=r(6430),a=r(5692);function s(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,c=s(Object.prototype.toString),f=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),d=s(Boolean.prototype.valueOf);if(l)var p=s(BigInt.prototype.valueOf);if(u)var g=s(Symbol.prototype.valueOf);function m(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function y(e){return"[object Map]"===c(e)}function _(e){return"[object Set]"===c(e)}function b(e){return"[object WeakMap]"===c(e)}function v(e){return"[object WeakSet]"===c(e)}function x(e){return"[object ArrayBuffer]"===c(e)}function w(e){return"undefined"!=typeof ArrayBuffer&&(x.working?x(e):e instanceof ArrayBuffer)}function E(e){return"[object DataView]"===c(e)}function A(e){return"undefined"!=typeof DataView&&(E.working?E(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=i,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||A(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},y.working="undefined"!=typeof Map&&y(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(y.working?y(e):e instanceof Map)},_.working="undefined"!=typeof Set&&_(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(_.working?_(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},v.working="undefined"!=typeof WeakSet&&v(new WeakSet),t.isWeakSet=function(e){return v(e)},x.working="undefined"!=typeof ArrayBuffer&&x(new ArrayBuffer),t.isArrayBuffer=w,E.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&E(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=A;var T="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function S(e){return"[object SharedArrayBuffer]"===c(e)}function M(e){return void 0!==T&&(void 0===S.working&&(S.working=S(new T)),S.working?S(e):e instanceof T)}function k(e){return m(e,f)}function O(e){return m(e,h)}function I(e){return m(e,d)}function R(e){return l&&m(e,p)}function C(e){return u&&m(e,g)}t.isSharedArrayBuffer=M,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},t.isGeneratorObject=function(e){return"[object Generator]"===c(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},t.isNumberObject=k,t.isStringObject=O,t.isBooleanObject=I,t.isBigIntObject=R,t.isSymbolObject=C,t.isBoxedPrimitive=function(e){return k(e)||O(e)||I(e)||R(e)||C(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(w(e)||M(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9539:(e,t,r)=>{var n=r(4155),i=r(5108),o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},a=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(a,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])_(s)||!E(s)?o+=" "+s:o+=" "+c(s);return o},t.deprecate=function(e,r){if(void 0!==n&&!0===n.noDeprecation)return e;if(void 0===n)return function(){return t.deprecate(e,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?i.trace(r):i.error(r),o=!0}return e.apply(this,arguments)}};var s={},l=/^$/;if(n.env.NODE_DEBUG){var u=n.env.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),l=new RegExp("^"+u+"$","i")}function c(e,r){var n={seen:[],stylize:h};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(r)?n.showHidden=r:r&&t._extend(n,r),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=f),d(n,e,n.depth)}function f(e,t){var r=c.styles[t];return r?"["+c.colors[r][0]+"m"+e+"["+c.colors[r][1]+"m":e}function h(e,t){return e}function d(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return v(i)||(i=d(e,i,n)),i}var o=function(e,t){if(x(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return b(t)?e.stylize(""+t,"number"):y(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}(e,r);if(o)return o;var a=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),T(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(r);if(0===a.length){if(S(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(w(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(A(r))return e.stylize(Date.prototype.toString.call(r),"date");if(T(r))return p(r)}var u,c="",f=!1,h=["{","}"];return m(r)&&(f=!0,h=["[","]"]),S(r)&&(c=" [Function"+(r.name?": "+r.name:"")+"]"),w(r)&&(c=" "+RegExp.prototype.toString.call(r)),A(r)&&(c=" "+Date.prototype.toUTCString.call(r)),T(r)&&(c=" "+p(r)),0!==a.length||f&&0!=r.length?n<0?w(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=f?function(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)I(t,String(a))?o.push(g(e,t,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(g(e,t,r,n,i,!0))})),o}(e,r,n,s,a):a.map((function(t){return g(e,r,n,s,t,f)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,c,h)):h[0]+c+h[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,r,n,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),I(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=_(r)?d(e,l.value,null):d(e,l.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function m(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function _(e){return null===e}function b(e){return"number"==typeof e}function v(e){return"string"==typeof e}function x(e){return void 0===e}function w(e){return E(e)&&"[object RegExp]"===M(e)}function E(e){return"object"==typeof e&&null!==e}function A(e){return E(e)&&"[object Date]"===M(e)}function T(e){return E(e)&&("[object Error]"===M(e)||e instanceof Error)}function S(e){return"function"==typeof e}function M(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!s[e])if(l.test(e)){var r=n.pid;s[e]=function(){var n=t.format.apply(t,arguments);i.error("%s %d: %s",e,r,n)}}else s[e]=function(){};return s[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(5955),t.isArray=m,t.isBoolean=y,t.isNull=_,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=x,t.isRegExp=w,t.types.isRegExp=w,t.isObject=E,t.isDate=A,t.types.isDate=A,t.isError=T,t.types.isNativeError=T,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(384);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,r;i.log("%s - %s",(r=[k((e=new Date).getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":"),[e.getDate(),O[e.getMonth()],r].join(" ")),t.format.apply(t,arguments))},t.inherits=r(5717),t._extend=function(e,t){if(!t||!E(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var R="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var t;if("function"!=typeof(t=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),R&&Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=R,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,t).then((function(e){n.nextTick(a.bind(null,null,e))}),(function(e){n.nextTick(C.bind(null,e,a))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,o(e)),t}},6430:(e,t,r)=>{"use strict";var n=r(4029),i=r(3083),o=r(1924),a=r(7296),s=o("Object.prototype.toString"),l=r(6410)(),u="undefined"==typeof globalThis?r.g:globalThis,c=i(),f=o("String.prototype.slice"),h={},d=Object.getPrototypeOf;l&&a&&d&&n(c,(function(e){if("function"==typeof u[e]){var t=new u[e];if(Symbol.toStringTag in t){var r=d(t),n=a(r,Symbol.toStringTag);if(!n){var i=d(r);n=a(i,Symbol.toStringTag)}h[e]=n.get}}}));var p=r(5692);e.exports=function(e){return!!p(e)&&(l&&Symbol.toStringTag in e?function(e){var t=!1;return n(h,(function(r,n){if(!t)try{var i=r.call(e);i===n&&(t=i)}catch(e){}})),t}(e):f(s(e),8,-1))}},9862:()=>{},964:()=>{},3083:(e,t,r)=>{"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof i[n[t]]&&(e[e.length]=n[t]);return e}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nc=void 0,(()=>{"use strict";var e=r(9808),t=r(2830),n=r(9775);function i(e,t,r){var n;null===(n=document.getElementById(e))||void 0===n||n.addEventListener(t,r)}function o(e,t){document.addEventListener(e,t)}var a=t.ArcballCamera.Get;i("canvas","mousedown",(function(e){a.onMouseDown(e)})),o("mouseup",(function(e){a.onMouseUp(e)})),i("canvas","wheel",(function(e){a.onWheelScroll(e)}));var s=n.MouseManager.Get;o("mousemove",(function(e){s.onMouseMove(e)})),window.addEventListener("contextmenu",(function(e){return e.preventDefault()}));var l=new e.AppContext;requestAnimationFrame((function e(){l.draw(),requestAnimationFrame(e)}))})()})();